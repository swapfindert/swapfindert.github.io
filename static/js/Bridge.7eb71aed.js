(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Bridge"],{"05f3":function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),i={class:"tabs-container"},a={class:"tabs"},s=["onClick"];function r(e,t,n,r,c,l){var d=Object(o["resolveComponent"])("RebateImg"),u=Object(o["resolveComponent"])("SwapBridge"),m=Object(o["resolveComponent"])("Limit"),h=Object(o["resolveComponent"])("Liquidity");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(d)]),Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",a,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(l.tabs,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{class:Object(o["normalizeClass"])({active:e.value===r.tabActive}),key:t,onClick:Object(o["withModifiers"])((function(t){return l.handleTab(e)}),["stop"])},Object(o["toDisplayString"])(e.name),11,s)})),128))])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(u,{ref:"swapBridge"},null,512)],512),[[o["vShow"],"swap"===r.tabActive]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(m,{ref:"limitBridge"},null,512)],512),[[o["vShow"],"limit"===r.tabActive]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("div",null,[Object(o["createVNode"])(h,{ref:"liquidityBridge"},null,512)],512),[[o["vShow"],"liquidity"===r.tabActive]])])}var c=n("497e"),l=(n("99af"),n("a9e3"),n("fb6a"),n("e524")),d=n.n(l),u=function(e){return Object(o["pushScopeId"])("data-v-abb1bc6a"),e=e(),Object(o["popScopeId"])(),e},m={class:"bridge-container"},h={class:"card-container t"},b={class:"card-container_top"},p={class:"flex items-center"},f={class:"flex justify-between items-center mt-40"},v={class:"switch-container"},g=u((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-switch"},null,-1)})),k=[g],j={class:"card-container b"},O={class:"card-container_top"},w={class:"flex justify-between items-center mt-40"},T={key:0,class:"card-container flex items-center justify-between mt-6 min-h-40"},y={key:3,class:"swap-label"},N={class:"swap-label_item-left"},S={style:{display:"flex","align-items":"center"}},x={style:{"margin-right":"0.1rem"}},V={class:"swap-label_item-left"},A={style:{display:"flex","align-items":"center"}},E={key:0},C={key:1},$={class:"swap-label_item-left"},_={key:4,class:"swap-label"},B={class:"swap-label_item-left"},D={class:"swap-label_item-left"},I={style:{display:"flex","align-items":"center"}},L={class:"swap-label_item-left"},R={class:"swap-label_item-left"},P={key:0},F={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},U={key:1},z={key:0},M={key:1,class:"path-amm"},q=u((function(){return Object(o["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)})),H={key:0,class:"select-token iconfont icon-collapse-down"},G={key:0},Q={class:"swap-label_item-left"},W={class:"card-container txs-container"},J={class:"van-hairline--bottom"},Z={class:"pop-content"},Y={class:"icon-container"},K={class:"text-1"},X={class:"select-container"},ee={class:"select-title"},te=u((function(){return Object(o["createElementVNode"])("div",{class:"select-placeholder"},null,-1)})),ne={key:0,class:"select-content"},oe=["onClick"],ie={class:"select-item_left"},ae={class:"select-item_left-top"},se={class:"select-item_left-bottom"},re={key:1,class:"select-content"},ce=["onClick"],le={class:"select-item_left"},de={class:"select-item_left-top"},ue={class:"select-item_left-bottom"},me={style:{background:"#fff","padding-bottom":"1rem"}},he={class:"token-item header"},be={class:"flex-2"},pe={class:"flex-1"},fe={class:"flex-1 right-label"},ve=u((function(){return Object(o["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),ge=["onClick"],ke={class:"path-list flex-start flex-2"},je={key:0},Oe={key:1,class:"path-amm"},we=u((function(){return Object(o["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:d.a,alt:"",srcset:""},null,-1)})),Te={key:0,class:"tag"},ye={class:"flex-1"},Ne=Object(o["createTextVNode"])(" <0.01% "),Se=Object(o["createTextVNode"])(" >40% ");function xe(e,t,i,a,s,r){var c=this,l=Object(o["resolveComponent"])("van-count-down"),d=Object(o["resolveComponent"])("van-button"),u=Object(o["resolveComponent"])("SelectBridgeToken"),g=Object(o["resolveComponent"])("van-field"),xe=Object(o["resolveComponent"])("SlippageButton"),Ve=Object(o["resolveComponent"])("SelectDex"),Ae=Object(o["resolveComponent"])("SwapModeSet"),Ee=Object(o["resolveComponent"])("van-image"),Ce=Object(o["resolveComponent"])("van-form"),$e=Object(o["resolveComponent"])("van-empty"),_e=Object(o["resolveComponent"])("BridgeTxItem"),Be=Object(o["resolveComponent"])("DynamicScrollerItem"),De=Object(o["resolveComponent"])("DynamicScroller"),Ie=Object(o["resolveComponent"])("ConfirmBridgeSwap"),Le=Object(o["resolveComponent"])("van-icon"),Re=Object(o["resolveComponent"])("van-action-sheet"),Pe=Object(o["resolveComponent"])("ConfirmSwap"),Fe=Object(o["resolveDirective"])("copy");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",m,[Object(o["createVNode"])(l,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:3e4,format:"sss",onFinish:r.onCountDownFinish},{default:Object(o["withCtx"])((function(e){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(o["createVNode"])(Ce,{class:"form-container",onSubmit:r.onSubmit},{default:Object(o["withCtx"])((function(){var i,c,l,m,W,J,Z,Y,K,X;return[Object(o["createElementVNode"])("div",h,[Object(o["createElementVNode"])("div",b,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("from")),1),Object(o["createElementVNode"])("div",p,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(i=a.fromToken)||void 0===i?void 0:i.balance)||"0")),1),Object(o["createVNode"])(d,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(o["withModifiers"])(r.handleMax,["stop"])},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]})),_:1},8,["onClick"])])]),Object(o["createElementVNode"])("div",f,[Object(o["createVNode"])(u,{ref:"selectFrom",token:a.fromToken,"onUpdate:token":[t[0]||(t[0]=function(e){return a.fromToken=e}),t[1]||(t[1]=function(e){return r.handelTokenChange("from")})],otherToken:a.toToken,tokens:a.tokens,balanceList:s.userBalanceTokens,switchChain:""},null,8,["token","otherToken","tokens","balanceList"]),Object(o["createVNode"])(g,{modelValue:s.fromTokenAmount,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return s.fromTokenAmount=e}),r.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"])])]),Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",{class:"switch-box",onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(){return r.switchToken&&r.switchToken.apply(r,arguments)}),["stop"]))},k)]),Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("to")),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(c=a.toToken)||void 0===c?void 0:c.balance)||"0")),1)]),Object(o["createElementVNode"])("div",w,[Object(o["createVNode"])(u,{ref:"selectTo",token:a.toToken,"onUpdate:token":[t[4]||(t[4]=function(e){return a.toToken=e}),t[5]||(t[5]=function(e){return r.handelTokenChange("to")})],otherToken:a.fromToken,tokens:a.tokens,balanceList:s.userBalanceTokens},null,8,["token","otherToken","tokens","balanceList"]),r.isSwap()?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:r.isSwap(),modelValue:s.toAmount,"onUpdate:modelValue":[t[6]||(t[6]=function(e){return s.toAmount=e}),r.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"])):(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:1,"model-value":r.toTokenAmount,readonly:"",placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number"},null,8,["model-value"]))])]),r.isSwap()?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",T,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("receiveAddress")),1),Object(o["createVNode"])(g,{modelValue:s.toAddress,"onUpdate:modelValue":t[7]||(t[7]=function(e){return s.toAddress=e}),onBlur:t[8]||(t[8]=function(e){return r.watchFromAmount(s.fromTokenAmount)}),placeholder:e.$t("noCex"),"input-align":"right",clearable:"",class:"input-address"},null,8,["modelValue","placeholder"]),s.isAppGetContactList?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:0,class:"iconfont icon-contacts clickable",onClick:t[9]||(t[9]=Object(o["withModifiers"])((function(e){return s.show1=!0}),["stop"]))})):Object(o["createCommentVNode"])("",!0)])),-1===r.errorCode?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,class:"submit-btn",block:"",loadingText:s.loadingText,loading:s.loadingApprove,"native-type":"submit",color:"#3F80F7"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.submitMsg||""),1)]})),_:1},8,["loadingText","loading"])):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:2,class:"submit-btn",block:"","native-type":"submit",color:r.errorCode<=1||s.loading?"#3F80F7":"#aaa",loading:s.loading||s.loading1,"loading-text":s.loadingText,disabled:(r.errorCode>1||!s.fromTokenAmount||!r.toTokenAmount)&&1!==r.errorCode||!(null!==(l=e.$refs)&&void 0!==l&&null!==(m=l.selectFrom)&&void 0!==m&&m.isCanSwap)||!(null!==(W=e.$refs)&&void 0!==W&&null!==(J=W.selectTo)&&void 0!==J&&J.isCanSwap)},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.submitMsg||""),1)]})),_:1},8,["color","loading","loading-text","disabled"])),r.isSwap()?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",_,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",B,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("slippage1")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[13]||(t[13]=Object(o["withModifiers"])((function(t){return r.alertTips(e.$t("slippage1"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(o["createVNode"])(Ae,{swapMode:s.customSwapMode,"onUpdate:swapMode":t[14]||(t[14]=function(e){return s.customSwapMode=e}),autoSwapMode:s.autoSwapMode,slippage:s.customSlippage,"onUpdate:slippage":t[15]||(t[15]=function(e){return s.customSlippage=e}),autoSlippage:s.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",D,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(o["createElementVNode"])("div",I,[Object(o["createElementVNode"])("span",null,"$"+Object(o["toDisplayString"])(r.getAvgPrice()),1)])],512),[[o["vShow"],s.fromTokenAmount&&r.toTokenAmount]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",L,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("priceImpact")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[16]||(t[16]=Object(o["withModifiers"])((function(t){return r.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips"))}),["stop"]))})]),Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])({color:r.priceImpactColor})},Object(o["toDisplayString"])(r.priceImpact)+Object(o["toDisplayString"])(null!==(Z=r.priceImpactV)&&void 0!==Z&&null!==(Y=Z.gt)&&void 0!==Y&&Y.call(Z,.05)?"(".concat(e.$t("excessivePriceImpact"),")"):""),5)],512),[[o["vShow"],s.fromTokenAmount&&r.toTokenAmount]]),Object(o["withDirectives"])(Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",R,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("tokenRoute")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[17]||(t[17]=Object(o["withModifiers"])((function(t){return r.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips"))}),["stop"]))})]),1===(null===(K=s.swapQuoteInfo)||void 0===K?void 0:K.toWrapper)||2===(null===(X=s.swapQuoteInfo)||void 0===X?void 0:X.toWrapper)?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",P,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.swapRouterPath,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:t},[0!==t?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",F)):Object(o["createCommentVNode"])("",!0),e.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",U,Object(o["toDisplayString"])(e.symbol),1)):Object(o["createCommentVNode"])("",!0)],64)})),128))])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",{key:1,class:"path-list clickable",onClick:t[18]||(t[18]=Object(o["withModifiers"])((function(e){return s.dialogListRouterVisible=!0}),["stop","prevent"]))},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.swapRouterPath,(function(t,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:i},[t.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",z,Object(o["toDisplayString"])(t.symbol),1)):Object(o["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",M,[Object(o["createVNode"])(Ee,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),q])):Object(o["createCommentVNode"])("",!0)],64)})),128)),s.listRouter.length>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",H)):Object(o["createCommentVNode"])("",!0)]))],512),[[o["vShow"],s.fromTokenAmount&&r.toTokenAmount]]),Number(r.estimatedFee)>0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",G,[Object(o["createElementVNode"])("div",Q,Object(o["toDisplayString"])(e.$t("estimatedGas")),1),Object(o["createElementVNode"])("div",null,"≈ $"+Object(o["toDisplayString"])(r.estimatedFee),1)])):Object(o["createCommentVNode"])("",!0)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",y,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[10]||(t[10]=Object(o["withModifiers"])((function(t){return r.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(o["createElementVNode"])("div",S,[Object(o["createElementVNode"])("span",x,Object(o["toDisplayString"])(s.slippage)+"%",1),Object(o["createVNode"])(xe,{slippage:s.slippage,"onUpdate:slippage":t[11]||(t[11]=function(e){return s.slippage=e}),icon:1},null,8,["slippage"])])]),Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",V,Object(o["toDisplayString"])(e.$t("exchangeRates")),1),Object(o["createElementVNode"])("div",A,[s.rateType?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",E,"1 "+Object(o["toDisplayString"])(a.fromToken.symbol)+" = "+Object(o["toDisplayString"])(r.getRate(1))+" "+Object(o["toDisplayString"])(a.toToken.symbol),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",C,"1 "+Object(o["toDisplayString"])(a.toToken.symbol)+" = "+Object(o["toDisplayString"])(r.getRate(0))+" "+Object(o["toDisplayString"])(a.fromToken.symbol),1)),Object(o["createElementVNode"])("i",{class:"iconfont icon-switch-h ml-5 clickable",onClick:t[12]||(t[12]=Object(o["withModifiers"])((function(e){return s.rateType=!s.rateType}),["stop"]))})])]),Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("span",$,Object(o["toDisplayString"])(e.$t("exchangeChannel")),1),Object(o["createVNode"])(Ve,{ref:"selectDex",bridge:s.bridge,"bridge-list":s.bridgeList,style:{background:"transparent"}},null,8,["bridge","bridge-list"])])]))]})),_:1},8,["onSubmit"]),Object(o["createElementVNode"])("div",W,[Object(o["createElementVNode"])("h3",J,Object(o["toDisplayString"])(e.$t("exchangeHistory")),1),Object(o["withDirectives"])(Object(o["createVNode"])($e,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[o["vShow"],r.totalTxs&&0===r.totalTxs.length&&!s.loadingTxs]]),Object(o["createElementVNode"])("ul",null,[Object(o["createVNode"])(De,{items:r.totalTxs,"min-item-size":30,"key-field":"createTimeT",class:"tokens"},{default:Object(o["withCtx"])((function(e){var t=e.item,n=e.index,i=e.active;return[Object(o["createVNode"])(Be,{item:t,active:i,"data-index":n},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(_e,{item:t},null,8,["item"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])]),Object(o["createVNode"])(Ie,{visible:s.show,"onUpdate:visible":t[19]||(t[19]=function(e){return s.show=e}),fromToken:a.fromToken,toToken:a.toToken,bridge:s.bridge,fromTokenAmount:s.fromTokenAmount,toTokenAmount:r.toTokenAmount,bridgeSwapTxData:s.bridgeSwapTxData,loading:s.loadingConfirm,onConfirmSwap:r.confirmSwap},null,8,["visible","fromToken","toToken","bridge","fromTokenAmount","toTokenAmount","bridgeSwapTxData","loading","onConfirmSwap"]),Object(o["createVNode"])(Re,{show:s.confirmTxVisible,"onUpdate:show":t[21]||(t[21]=function(e){return s.confirmTxVisible=e}),title:e.$t("confirmSwap")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Z,[Object(o["createElementVNode"])("div",Y,[Object(o["createVNode"])(Le,{class:"icon-s",name:"success",size:"0.64rem",color:"#3F80F7"})]),Object(o["createElementVNode"])("div",K,Object(o["toDisplayString"])(e.$t("transactionSubmitted")),1),Object(o["createElementVNode"])("a",{class:"text-2 clickable",href:"javascript:;",onClick:t[20]||(t[20]=function(t){return e.$f.openBrowser(e.$f.formatExplorerUrl(a.fromToken.chain,c.txHash,"tx"))}),rel:"noopener noreferrer"},Object(o["toDisplayString"])(e.$t("viewBlockExplorerTransactionHistory")),1)])]})),_:1},8,["show","title"]),Object(o["createVNode"])(Re,{show:s.show1,"onUpdate:show":t[26]||(t[26]=function(e){return s.show1=e}),title:" ",style:{height:"50%","--van-popup-background-color":"#fff"},class:"select-action-pop"},{default:Object(o["withCtx"])((function(){var n,i,a,c,l,d;return[Object(o["createElementVNode"])("div",X,[Object(o["createElementVNode"])("div",ee,[Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])({active:"contact"===s.tabActive}),onClick:t[22]||(t[22]=Object(o["withModifiers"])((function(e){return s.tabActive="contact"}),["stop"]))},Object(o["toDisplayString"])(e.$t("contacts")),3),Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])({active:"wallet"===s.tabActive}),onClick:t[23]||(t[23]=Object(o["withModifiers"])((function(e){return s.tabActive="wallet"}),["stop"]))},Object(o["toDisplayString"])(e.$t("myWallet")),3)]),te,"contact"===s.tabActive?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",ne,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.accounts.contact,(function(e,n){var i,a,c,l,d,u,m,h;return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:n,class:"select-item clickable",onClick:Object(o["withModifiers"])((function(t){return r.handleSelectAccount(e)}),["stop"])},[Object(o["createElementVNode"])("div",ie,[Object(o["createElementVNode"])("div",ae,Object(o["toDisplayString"])((null===e||void 0===e?void 0:e.contact_name)||""),1),Object(o["createElementVNode"])("div",se,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(null!==e&&void 0!==e&&e.contact_address?(null===e||void 0===e||null===(i=e.contact_address)||void 0===i||null===(a=i.slice)||void 0===a?void 0:a.call(i,0,10))+"..."+(null===e||void 0===e||null===(c=e.contact_address)||void 0===c||null===(l=c.slice)||void 0===l?void 0:l.call(c,-5)):""),1),Object(o["withDirectives"])(Object(o["createElementVNode"])("i",{class:"iconfont icon-copy clickable",onClick:t[24]||(t[24]=Object(o["withModifiers"])((function(){}),["stop"]))},null,512),[[Fe,(null===e||void 0===e?void 0:e.contact_address)||""]])])]),(null===e||void 0===e||null===(d=e.contact_address)||void 0===d||null===(u=d.toLowerCase)||void 0===u?void 0:u.call(d))===(null===(m=s.toAddress)||void 0===m||null===(h=m.toLowerCase)||void 0===h?void 0:h.call(m))?(Object(o["openBlock"])(),Object(o["createBlock"])(Le,{key:0,size:"0.32rem",color:"#3F80F7",name:"success"})):Object(o["createCommentVNode"])("",!0)],8,oe)})),128)),Object(o["withDirectives"])(Object(o["createVNode"])($e,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[o["vShow"],(null===(n=s.accounts)||void 0===n?void 0:n.contact)&&0===(null===(i=s.accounts)||void 0===i||null===(a=i.contact)||void 0===a?void 0:a.length)]])])):Object(o["createCommentVNode"])("",!0),"wallet"===s.tabActive?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",re,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.accounts.wallet,(function(e,n){var i,a,c,l,d,u,m,h;return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:n,class:"select-item clickable",onClick:Object(o["withModifiers"])((function(t){return r.handleSelectAccount(e)}),["stop"])},[Object(o["createElementVNode"])("div",le,[Object(o["createElementVNode"])("div",de,Object(o["toDisplayString"])((null===e||void 0===e?void 0:e.contact_name)||""),1),Object(o["createElementVNode"])("div",ue,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(null!==e&&void 0!==e&&e.contact_address?(null===e||void 0===e||null===(i=e.contact_address)||void 0===i||null===(a=i.slice)||void 0===a?void 0:a.call(i,0,10))+"..."+(null===e||void 0===e||null===(c=e.contact_address)||void 0===c||null===(l=c.slice)||void 0===l?void 0:l.call(c,-5)):""),1),Object(o["withDirectives"])(Object(o["createElementVNode"])("i",{class:"iconfont icon-copy clickable",onClick:t[25]||(t[25]=Object(o["withModifiers"])((function(){}),["stop"]))},null,512),[[Fe,(null===e||void 0===e?void 0:e.contact_address)||""]])])]),(null===e||void 0===e||null===(d=e.contact_address)||void 0===d||null===(u=d.toLowerCase)||void 0===u?void 0:u.call(d))===(null===(m=s.toAddress)||void 0===m||null===(h=m.toLowerCase)||void 0===h?void 0:h.call(m))?(Object(o["openBlock"])(),Object(o["createBlock"])(Le,{key:0,size:"0.32rem",color:"#3F80F7",name:"success"})):Object(o["createCommentVNode"])("",!0)],8,ce)})),128)),Object(o["withDirectives"])(Object(o["createVNode"])($e,{class:"empty",image:e.emptyNoDataLight,description:e.$t("emptyData")},null,8,["image","description"]),[[o["vShow"],(null===(c=s.accounts)||void 0===c?void 0:c.wallet)&&0===(null===(l=s.accounts)||void 0===l||null===(d=l.wallet)||void 0===d?void 0:d.length)]])])):Object(o["createCommentVNode"])("",!0)])]})),_:1},8,["show"]),Object(o["createVNode"])(Re,{show:s.dialogListRouterVisible,"onUpdate:show":t[27]||(t[27]=function(e){return s.dialogListRouterVisible=e}),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("ul",me,[Object(o["createElementVNode"])("li",he,[Object(o["createElementVNode"])("span",be,Object(o["toDisplayString"])(e.$t("router")),1),Object(o["createElementVNode"])("span",pe,Object(o["toDisplayString"])(s.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(o["createElementVNode"])("span",fe,Object(o["toDisplayString"])(e.$t("priceImpact")),1),ve]),Object(o["withDirectives"])(Object(o["createVNode"])($e,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[o["vShow"],s.listRouter&&0===s.listRouter.length]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(s.listRouter,(function(t,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{key:i,class:"token-item",onClick:Object(o["withModifiers"])((function(e){return r.getSelectedRouter(i)}),["stop"])},[Object(o["createElementVNode"])("div",ke,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(t,(function(t,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:i},[t.symbol?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",je,Object(o["toDisplayString"])(t.symbol),1)):Object(o["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Oe,[Object(o["createVNode"])(Ee,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),we])):Object(o["createCommentVNode"])("",!0)],64)})),128)),0===i?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Te,Object(o["toDisplayString"])(e.$t("best")),1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",ye,Object(o["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(o["normalizeStyle"])({color:r.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Ne],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(o["normalizeStyle"])({color:r.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Se],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),s.selectedRouterIndex===i?(Object(o["openBlock"])(),Object(o["createBlock"])(Le,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(Le,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,ge)})),128))])]})),_:1},8,["show","title"]),Object(o["createVNode"])(Pe,{visible:s.dialogVisibleSwap,"onUpdate:visible":t[28]||(t[28]=function(e){return s.dialogVisibleSwap=e}),swapInfo:s.swapInfo,slippage:a.swapSlippageInfo.slippage,onSubmit:r.submitSwap,loading:s.loadingConfirmSwap,chain:e.$store.getters.netId||a.fromToken.chain,nativePrice:s.nativePrice,gasPrice:s.gasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"])])}var Ve=n("1da1"),Ae=n("2909"),Ee=n("5530"),Ce=(n("96cf"),n("ac1f"),n("00b4"),n("b680"),n("d81d"),n("4e82"),n("d3b7"),n("25f0"),n("7db0"),n("4d63"),n("c607"),n("2c3e"),n("9129"),n("4de4"),n("caad"),n("c740"),n("466d"),n("2532"),n("b64b"),n("159b"),n("449c")),$e=function(e){return Object(o["pushScopeId"])("data-v-7e9283e5"),e=e(),Object(o["popScopeId"])(),e},_e={class:"select-box"},Be={key:0,class:"token-container"},De={class:"icon-token-container"},Ie=["src"],Le={class:"text-s"},Re={class:"text-l"},Pe={class:"un-tag"},Fe={key:1},Ue=$e((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),ze={class:"rules-content"},Me={class:"search-bar",action:"/"},qe=["onClick"],He={class:"main"},Ge={key:0,class:"risk-status high"},Qe={key:0,class:"minor"},We=$e((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Je={class:"right-label"},Ze=$e((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),Ye={key:0,class:"minor"};function Ke(e,t,i,a,s,r){var c,l,d,u,m,h,b=Object(o["resolveComponent"])("van-image"),p=Object(o["resolveComponent"])("van-search"),f=Object(o["resolveComponent"])("van-tab"),v=Object(o["resolveComponent"])("van-tabs"),g=Object(o["resolveComponent"])("van-empty"),k=Object(o["resolveComponent"])("van-icon"),j=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",_e,[Object(o["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[i.token.address?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Be,[Object(o["createElementVNode"])("div",De,[Object(o["createVNode"])(b,{round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem","lazy-load":"","show-loading":"",src:i.token.logoURI||(i.token.logo_url?e.$f.formatIcon({logo_url:i.token.logo_url}):e.$f.formatIcon((null===(c=i.token)||void 0===c?void 0:c.address)+"-"+(null===(l=i.token)||void 0===l?void 0:l.chain)||s.active)),"error-icon":n("aecc")},null,8,["src","error-icon"]),null!==(d=i.token)&&void 0!==d&&d.chain||s.active?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat((null===(u=i.token)||void 0===u?void 0:u.chain)||s.active,".png"),alt:"",srcset:""},null,8,Ie)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",Le,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(m=i.token)||void 0===m?void 0:m.symbol)||""),1),Object(o["createElementVNode"])("span",Re,Object(o["toDisplayString"])(r.getChainName(null===(h=i.token)||void 0===h?void 0:h.chain)||s.active),1)]),Object(o["createElementVNode"])("div",Pe,Object(o["toDisplayString"])(r.isCanSwap?"":e.$t("notSupported")),1)])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Fe,Object(o["toDisplayString"])(e.$t("pleaseSelectToken")),1)),Ue]),Object(o["createVNode"])(j,{show:s.show,"onUpdate:show":t[3]||(t[3]=function(e){return s.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ze,[Object(o["createElementVNode"])("form",Me,[Object(o["createVNode"])(p,{modelValue:s.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword=e}),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:e.$t("searchContractORName")},null,8,["modelValue","placeholder"])]),Object(o["createVNode"])(v,{class:"tabs",active:s.active,"onUpdate:active":t[2]||(t[2]=function(e){return s.active=e}),shrink:"",color:"#558BED",style:{"--van-tabs-nav-background-color":"#fff"},onChange:r.tabChainChange},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.chains,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(f,{title:e.name,name:e.chain,key:t},null,8,["title","name"])})),128))]})),_:1},8,["active","onChange"]),(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",{style:{background:"#fff","padding-bottom":"1rem"},key:s.active},[Object(o["withDirectives"])(Object(o["createVNode"])(g,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[o["vShow"],r.searchTokens1&&0===r.searchTokens1.length&&!s.loading]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(r.searchTokens1,(function(t,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"token-item",key:a,onClick:Object(o["withModifiers"])((function(e){return r.handleSelectToken(t)}),["stop"])},[Object(o["createVNode"])(b,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:t.logoURI||(t.logo_url?e.$f.formatIcon({logo_url:t.logo_url}):n("aecc")),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",He,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(t.symbol),1),t.risk_score>60&&2===t.risk_level||t.risk_level<0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ge,Object(o["toDisplayString"])(e.$t("highRisk")),1)):Object(o["createCommentVNode"])("",!0)]),t.address!==s.NATIVE_TOKEN?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Qe,Object(o["toDisplayString"])(t.address.slice(0,6)+"..."+t.address.slice(-6)),1)):Object(o["createCommentVNode"])("",!0)]),We,Object(o["createElementVNode"])("div",Je,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(t.balance&&0!==Number(t.balance)?e.$f.formatNumber2(t.balance):""),1),Ze,t.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ye,Object(o["toDisplayString"])(t.balance?e.$f.formatNumberCurrencyUnit(t.balance*t.price):""),1)):Object(o["createCommentVNode"])("",!0)]),t.address===i.token.address&&s.active===i.token.chain?(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,qe)})),128))]))])]})),_:1},8,["show","title"])])}n("07ac"),n("841c");var Xe=n("c9d9"),et=n("fa7d"),tt=n("365c"),nt=n("6779"),ot=n("335a"),it=null,at={name:"SelectBridgeToken",props:{tokens:{type:Object,default:function(){return{}}},balanceList:{type:Array,default:function(){return[]}},token:{type:Object,default:function(){return{address:"",chain:""}}},otherToken:{type:Object,default:function(){return{address:"",chain:""}}},switchChain:{type:Boolean,default:!1}},emits:["onSelect","update:token"],data:function(){return{show:!1,keyword:"",loading:!1,NATIVE_TOKEN:Xe["k"],active:"",searchTokens:[]}},computed:{filterTokens:function(){var e,t=this;if(!this.active||!this.tokens)return[];var n=Object(tt["l"])(this.active,2)||this.active,o=(null===(e=this.tokens)||void 0===e?void 0:e[n])||[],i=[];this.balanceList&&this.balanceList.length>0&&this.balanceList[0].chain===this.active&&(i=this.otherToken.chain===this.active?this.balanceList:this.balanceList.filter((function(e){return o.some((function(t){var n,o;return(null===t||void 0===t||null===(n=t.address)||void 0===n||null===(o=n.toLowerCase)||void 0===o?void 0:o.call(n))===e.address}))})));var a=Object(Ae["a"])(i.slice());if(o.slice().forEach((function(e){var n=a.find((function(n){var o,i;return n.id===(null===e||void 0===e||null===(o=(i=e.address).toLowerCase)||void 0===o?void 0:o.call(i))+"-"+t.active}));n?n.logoURI=e.logoURI:a.push(e)})),""===this.keyword)return a;var s=new RegExp(this.keyword,"i");return o.filter((function(e){return s.test(e.symbol)||s.test(e.name)||s.test(e.address)}))},searchTokens1:function(){var e;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.filterTokens},chain:function(){return this.$store.getters.netId},tabChain:function(){return Object(tt["l"])(this.active)},chains:function(){var e,t,n,o=ot["a"].get("chainConfig",Xe["l"])||{},i=Object.values(o).sort((function(e,t){return e.sort_id-t.sort_id})),a=(null===i||void 0===i||null===(e=i.filter)||void 0===e||null===(t=e.call(i,(function(e){return!!Xe["t"][e.netName]||Object(tt["l"])(e.netName,2)})))||void 0===t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(e){return{chain:e.netName,name:e.name,bridgeChain:Object(tt["l"])(e.netName,2)}})))||[];return a},isCanSwap:function(){var e=this;if(this.token.chain){var t,n,o,i=Object(tt["l"])(this.token.chain,2);if(!i&&this.otherToken.chain!==this.token.chain)return!1;if("brc20"===this.token.chain&&this.switchChain&&(null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||!n.appGetContactListV2))return!1;var a=this.tokens[i];return!(this.otherToken.chain!==this.token.chain&&null!==a&&void 0!==a&&null!==(o=a.every)&&void 0!==o&&o.call(a,(function(t){return(t.address||t.token)!==e.token.address})))}return!0}},watch:{show:function(e){var t,n,o,i=this;e&&this.$nextTick((function(){i.active=i.token.chain||i.$store.getters.netId})),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||null===(o=n.isRefreshEnable)||void 0===o||o.call(n,"bridge",!e)},tokens:function(){this.tokens[this.active]&&this.getBalanceList(this.active)},keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=[]}},methods:{getBridgeChain:tt["l"],getBalanceList:function(e){var t,n,o=this,i=Object(tt["l"])(e,2),a=(null===(t=this.tokens)||void 0===t?void 0:t[i])||[];Array.isArray(null===(n=this.tokens)||void 0===n?void 0:n[i])&&"TRON"!==i&&"BTC"!==i&&/^0x[0-9a-zA-Z]{40}$/.test(this.$store.state.currentAccount)&&Object(tt["k"])(a.map((function(e){return e.address})),e).then((function(e){o.tokens[i]=a.map((function(t,n){return Object(Ee["a"])(Object(Ee["a"])({},t),{},{balance:nt["utils"].formatUnits(e[n].toString(),t.decimals)})}))}))},getChainName:function(e){var t,n=ot["a"].get("chainConfig",Xe["l"])||{};return(null===(t=n[e])||void 0===t?void 0:t.name)||e},getUserTokenList:function(e){var t=this;Object(tt["I"])(e).then((function(n){var o=(null===n||void 0===n?void 0:n.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[];t.tokens[e]=o,Object(tt["Q"])(e).then((function(n){var i,a,s,r,c,l=null===(i=(null===n||void 0===n||null===(s=n.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token,balance:(null===e||void 0===e?void 0:e.value)||0})})))||void 0===s||null===(r=s.filter)||void 0===r?void 0:r.call(s,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.call(i,(function(e){return Number(e.balance)>0})),d=(null===o||void 0===o||null===(c=o.filter)||void 0===c?void 0:c.call(o,(function(e){var t,n;return null===(t=l)||void 0===t||null===(n=t.every)||void 0===n?void 0:n.call(t,(function(t){return e.token!==t.token}))})))||[];l=[].concat(Object(Ae["a"])(l),Object(Ae["a"])(d)),t.tokens[e]=l,l.length>0&&"tron"!==e&&"brc20"!==e&&/^0x[0-9a-zA-Z]{40}$/.test(t.$store.state.currentAccount)&&Object(tt["k"])(l.map((function(e){return e.token||""})),e).then((function(n){var o,i;l=null===(o=l)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,(function(e,t){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{balance:nt["utils"].formatUnits(n[t],e.decimals||0)})})),t.tokens[e]=l}))}))}))},tabChainChange:function(e){var t=Object(tt["l"])(e,2);this.show&&(t?this.getBalanceList(e):this.getUserTokenList(e))},tokenSearch:function(){var e=this;this.otherToken.chain===this.active&&(it&&(clearTimeout(it),it=null),it=setTimeout((function(){e.search()}),500))},search:function(){var e=this;if(""!==this.keyword){var t,n=new RegExp(this.keyword,"i"),o=Object(tt["l"])(this.active,2),i=(null===(t=this.tokens)||void 0===t?void 0:t[o])||[],a=i.filter((function(e){return n.test(e.address)||n.test(e.symbol)||n.test(e.name)}));this.loading=!0,Object(tt["V"])(this.keyword,this.active).then((function(t){var n,o,i,s=null===(n=t.filter)||void 0===n||null===(o=n.call(t,(function(t){return t.chain===e.active&&!a.some((function(e){return(e.token||e.address)===(t.token||t.address)}))})))||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,(function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{address:e.token})}));e.searchTokens=[].concat(Object(Ae["a"])(a),Object(Ae["a"])(s))})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.filterTokens},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address){var n=Object(Ee["a"])(Object(Ee["a"])({},e),{},{chain:this.active,bridgeChain:Object(tt["l"])(this.active,2)||this.active});if(this.$emit("update:token",n),Object.keys(n).forEach((function(e){t.token[e]=n[e]})),this.show=!1,this.switchChain){var o=this.active;if("tron"!==o||window.tronLink)if("brc20"!==o||window.unisat)if(o&&"tron"!==o&&"brc20"!==o&&!window.ethereum){var i=this.getChainName(o);this.$dialog.alert({title:this.$t("tips"),message:this.$t("goEvm",{chain:i}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}else o&&"tron"!==o&&"brc20"!==o&&window.ethereum&&Object(et["h"])(o);else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goBtc"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"});else this.$dialog.alert({title:this.$t("tips"),message:this.$t("goTron"),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}}}}},st=(n("cd1a"),n("6b0d")),rt=n.n(st);const ct=rt()(at,[["render",Ke],["__scopeId","data-v-7e9283e5"]]);var lt=ct,dt=function(e){return Object(o["pushScopeId"])("data-v-89e7b480"),e=e(),Object(o["popScopeId"])(),e},ut={class:"select-box"},mt={key:0,class:"tag color-3f80f7"},ht=dt((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),bt={key:1},pt={style:{background:"#fff","padding-bottom":"1rem"}},ft={class:"token-item header"},vt=dt((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),gt={class:"right-label"},kt=dt((function(){return Object(o["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),jt=["onClick"],Ot={class:"token-item"},wt={class:"main"},Tt={key:0,class:"tag"},yt=dt((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Nt={class:"right-label"},St={key:0,class:"tag-no-gas"},xt={key:0,class:"tag-no-gas_content"},Vt={key:1,class:"tag-no-gas_content"};function At(e,t,i,a,s,r){var c=Object(o["resolveComponent"])("van-image"),l=Object(o["resolveComponent"])("van-empty"),d=Object(o["resolveComponent"])("van-icon"),u=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ut,[i.bridge.dex?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[Object(o["createVNode"])(c,{class:"icon-token mr-5",round:"",width:"0.36rem",height:"0.36rem","lazy-load":"","show-loading":"",src:i.bridge.logoUrl,"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.bridge.dex),1),i.bridge.isSupportNoGas?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",mt,Object(o["toDisplayString"])(e.$t("noGasSwap")),1)):Object(o["createCommentVNode"])("",!0),ht])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",bt,"--")),Object(o["createVNode"])(u,{show:s.show,"onUpdate:show":t[1]||(t[1]=function(e){return s.show=e}),title:e.$t("exchangeChannel"),style:{height:"70%","--van-popup-background-color":"#fff"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("ul",pt,[Object(o["createElementVNode"])("li",ft,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("channel")),1),vt,Object(o["createElementVNode"])("span",gt,Object(o["toDisplayString"])(e.$t("expectedAmount1")),1),kt]),Object(o["withDirectives"])(Object(o["createVNode"])(l,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[o["vShow"],i.bridgeList&&0===i.bridgeList.length&&!s.loading]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(i.bridgeList,(function(t,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:Object(o["normalizeClass"])(["token-item-li",{"no-gas":t.isSupportNoGas}]),key:a,onClick:Object(o["withModifiers"])((function(e){return r.handleSelectToken(t)}),["stop"])},[Object(o["createElementVNode"])("div",Ot,[Object(o["createVNode"])(c,{class:"icon-token",round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:t.logoUrl,"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("div",wt,Object(o["toDisplayString"])(t.dex),1),0===a?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Tt,Object(o["toDisplayString"])(e.$t("best")),1)):Object(o["createCommentVNode"])("",!0),yt,Object(o["createElementVNode"])("div",Nt,Object(o["toDisplayString"])(t.toTokenAmount),1),t.dex===i.bridge.dex?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,size:"0.32rem",color:"#558BED",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:2,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))]),t.isSupportNoGas?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",St,[0===a?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",xt,Object(o["toDisplayString"])(e.$t("noGasSwapTips")),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Vt,Object(o["toDisplayString"])(e.$t("channelProvidesNoGasSwap")),1))])):Object(o["createCommentVNode"])("",!0)],10,jt)})),128))])]})),_:1},8,["show","title"])])}var Et={name:"SelectDex",props:{bridgeList:{type:Array,default:function(){return[]}},bridge:{type:Object,default:function(){return{dex:"",logoUrl:""}}}},emits:["onSelect","update:bridge"],data:function(){return{show:!1,keyword:"",loading:!1}},watch:{show:function(e){var t,n,o;console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||null===(o=n.isRefreshEnable)||void 0===o||o.call(n,"bridge",!e)}},methods:{handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.dex){var n=Object(Ee["a"])({},e);this.$emit("update:bridge",n),Object.keys(n).forEach((function(e){var o;t.bridge[e]=n[e],t.bridge.isSupportNoGas=null!==(o=null===n||void 0===n?void 0:n.isSupportNoGas)&&void 0!==o&&o})),this.show=!1}}}};n("3ff4");const Ct=rt()(Et,[["render",At],["__scopeId","data-v-89e7b480"]]);var $t=Ct,_t=(n("2ca0"),function(e){return Object(o["pushScopeId"])("data-v-7069ce48"),e=e(),Object(o["popScopeId"])(),e}),Bt={style:{background:"#fff","padding-bottom":"1rem"},class:"swap-container"},Dt={class:"flex justify-between"},It=_t((function(){return Object(o["createElementVNode"])("span",null,null,-1)})),Lt={class:"flex justify-between mt-20"},Rt={key:0,class:"token-container"},Pt={class:"icon-token-container"},Ft=["src"],Ut={class:"flex justify-between mt-20"},zt={key:0,class:"token-container"},Mt={class:"icon-token-container"},qt=["src"],Ht={class:"flex justify-between li-item mt-20"},Gt={class:"flex justify-between li-item"},Qt={class:"flex justify-between items-center"},Wt={key:0,class:"tag"},Jt={class:"flex justify-between li-item"},Zt={class:"flex justify-between li-item"},Yt={class:"flex justify-between li-item"},Kt={key:0,class:"flex justify-between li-item"},Xt={class:"tips"};function en(e,t,i,a,s,r){var c=Object(o["resolveComponent"])("van-image"),l=Object(o["resolveComponent"])("van-button"),d=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createBlock"])(d,{show:r.show,"onUpdate:show":t[1]||(t[1]=function(e){return r.show=e}),title:e.$t("confirmSwap"),style:{height:"70%","--van-popup-background-color":"#fff"}},{default:Object(o["withCtx"])((function(){var a,s,r,d,u,m,h,b,p,f,v,g,k,j,O,w,T,y,N,S,x,V,A,E,C,$,_,B;return[Object(o["createElementVNode"])("ul",Bt,[Object(o["createElementVNode"])("li",Dt,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("youWillSwap")),1),It]),Object(o["createElementVNode"])("li",Lt,[i.fromToken.address?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Rt,[Object(o["createElementVNode"])("div",Pt,[Object(o["createVNode"])(c,{round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:i.fromToken.logoURI||e.$f.formatIcon((null===(a=i.fromToken)||void 0===a?void 0:a.address)+"-"+(null===(s=i.fromToken)||void 0===s?void 0:s.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),null!==(r=i.fromToken)&&void 0!==r&&r.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null===(d=i.fromToken)||void 0===d?void 0:d.chain,".png"),alt:"",srcset:""},null,8,Ft)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(u=i.fromToken)||void 0===u?void 0:u.symbol)||""),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.fromTokenAmount),1)]),Object(o["createElementVNode"])("li",Ut,[i.fromToken.address?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",zt,[Object(o["createElementVNode"])("div",Mt,[Object(o["createVNode"])(c,{round:"",width:"0.48rem",height:"0.48rem","icon-size":"0.48rem","lazy-load":"","show-loading":"",src:i.toToken.logoURI||e.$f.formatIcon((null===(m=i.toToken)||void 0===m?void 0:m.address)+"-"+(null===(h=i.toToken)||void 0===h?void 0:h.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),null!==(b=i.toToken)&&void 0!==b&&b.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(null===(p=i.toToken)||void 0===p?void 0:p.chain,".png"),alt:"",srcset:""},null,8,qt)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(f=i.toToken)||void 0===f?void 0:f.symbol)||""),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.bridge.toTokenAmount),1)]),Object(o["createElementVNode"])("li",Ht,[Object(o["createElementVNode"])("span",null,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("receiveAddress")),1),(null!==(v=i.bridgeSwapTxData)&&void 0!==v&&null!==(g=v.txInfo)&&void 0!==g&&null!==(k=g.toAddress)&&void 0!==k&&null!==(j=k.startsWith)&&void 0!==j&&j.call(k,"0x")?null===(O=i.bridgeSwapTxData)||void 0===O||null===(w=O.txInfo)||void 0===w||null===(T=w.toAddress)||void 0===T||null===(y=T.toLowerCase)||void 0===y?void 0:y.call(T):null===(N=i.bridgeSwapTxData)||void 0===N||null===(S=N.txInfo)||void 0===S?void 0:S.toAddress)===e.$store.state.currentAccount?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createTextVNode"])("("+Object(o["toDisplayString"])(e.$t("defaultCurrentAddress"))+")",1)],64)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(x=i.bridgeSwapTxData)||void 0===x||null===(V=x.txInfo)||void 0===V||null===(A=V.toAddress)||void 0===A?void 0:A.slice(0,6))+"..."+(null===(E=i.bridgeSwapTxData)||void 0===E||null===(C=E.txInfo)||void 0===C||null===($=C.toAddress)||void 0===$?void 0:$.slice(-3))),1)]),Object(o["createElementVNode"])("li",Gt,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("exchangeChannel")),1),Object(o["createElementVNode"])("div",Qt,[Object(o["createVNode"])(c,{class:"mr-5",round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem","lazy-load":"","show-loading":"",src:i.bridge.logoUrl,"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.bridge.dex||""),1),null!==(_=i.bridge)&&void 0!==_&&_.isSupportNoGas?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Wt,Object(o["toDisplayString"])(e.$t("noGasSwap")),1)):Object(o["createCommentVNode"])("",!0)])]),Object(o["createElementVNode"])("li",Jt,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("fee")),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2((i.fromTokenAmount||0)*(i.bridge.fee||0)))+" "+Object(o["toDisplayString"])(i.fromToken.symbol)+" ("+Object(o["toDisplayString"])(100*i.bridge.fee)+"%)",1)]),Object(o["createElementVNode"])("li",Zt,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("referenceRate")),1),Object(o["createElementVNode"])("span",null,"1 "+Object(o["toDisplayString"])(i.fromToken.symbol)+" = "+Object(o["toDisplayString"])(e.$f.formatNumber2(i.toTokenAmount/i.fromTokenAmount))+" "+Object(o["toDisplayString"])(i.toToken.symbol),1)]),Object(o["createElementVNode"])("li",Yt,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("expectedReceipt")),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber2((null===(B=i.bridge)||void 0===B?void 0:B.receiveTokenAmount)||"0"))+" "+Object(o["toDisplayString"])(i.toToken.symbol),1)]),i.bridge.estimatedTime?(Object(o["openBlock"])(),Object(o["createElementBlock"])("li",Kt,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("estimatedCompletionTime")),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.bridge.estimatedTime)+"~"+Object(o["toDisplayString"])(i.bridge.estimatedTime+2)+" "+Object(o["toDisplayString"])(e.$t("min")),1)])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(l,{class:"submit-btn",block:"",round:"",loading:i.loading,"loading-text":e.$t("confirmSwap"),onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(t){return e.$emit("confirmSwap")}),["stop"])),size:"normal",type:"primary"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("confirmSwap")),1)]})),_:1},8,["loading","loading-text"]),Object(o["createElementVNode"])("div",Xt,"*"+Object(o["toDisplayString"])(e.$t("confirmSwapTips")),1)])]})),_:1},8,["show","title"])}var tn={name:"confirmBridgeSwap",props:{visible:{type:Boolean,default:!1},fromToken:Object,toToken:Object,fromTokenAmount:String,toTokenAmount:[String,Number],bridge:Object,loading:Boolean,bridgeSwapTxData:Object},emits:["update:visible","confirmSwap"],data:function(){return{}},computed:{show:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}}};n("6b59");const nn=rt()(tn,[["render",en],["__scopeId","data-v-7069ce48"]]);var on=nn,an={class:"flex items-center"},sn={class:"label mr-20"},rn={key:0,class:"token-container"},cn={class:"icon-token-container mr-5"},ln=["src"],dn={class:"mr-5"},un={class:"flex items-center mt-10"},mn={class:"label mr-20"},hn={key:0,class:"token-container"},bn={class:"icon-token-container mr-5"},pn=["src"],fn={class:"mr-5"},vn={class:"flex items-center justify-between mt-10 label"};function gn(e,t,i,a,s,r){var c,l,d,u,m,h,b,p,f=Object(o["resolveComponent"])("van-image"),v=Object(o["resolveComponent"])("van-loading");return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return r.goBridgeTx(i.item)}),["stop"]))},[Object(o["createElementVNode"])("div",an,[Object(o["createElementVNode"])("span",sn,Object(o["toDisplayString"])(e.$t("from")),1),i.item.txHash?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",rn,[Object(o["createElementVNode"])("div",cn,[Object(o["createVNode"])(f,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:i.item.fromTokenUrl||e.$f.formatIcon(i.item.fromTokenAddress+"-"+(i.item.chain||s.getBridgeChain(null===(c=i.item)||void 0===c?void 0:c.fromTokenChain))),"error-icon":n("aecc")},null,8,["src","error-icon"]),null!==(l=i.item)&&void 0!==l&&l.fromTokenChain||i.item.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain||s.getBridgeChain(null===(d=i.item)||void 0===d?void 0:d.fromTokenChain),".png"),alt:"",srcset:""},null,8,ln)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",dn,Object(o["toDisplayString"])(e.$f.formatNumber2(i.item.fromAmount,5)),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(u=i.item)||void 0===u?void 0:u.fromTokenSymbol)||""),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",un,[Object(o["createElementVNode"])("span",mn,Object(o["toDisplayString"])(e.$t("to")),1),i.item.txHash?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",hn,[Object(o["createElementVNode"])("div",bn,[Object(o["createVNode"])(f,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:i.item.toTokenUrl||e.$f.formatIcon(i.item.toTokenAddress+"-"+(i.item.chain||s.getBridgeChain(null===(m=i.item)||void 0===m?void 0:m.toTokenChain))),"error-icon":n("aecc")},null,8,["src","error-icon"]),null!==(h=i.item)&&void 0!==h&&h.toTokenChain||i.item.chain?(Object(o["openBlock"])(),Object(o["createElementBlock"])("img",{key:0,class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain||s.getBridgeChain(null===(b=i.item)||void 0===b?void 0:b.toTokenChain),".png"),alt:"",srcset:""},null,8,pn)):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("span",fn,Object(o["toDisplayString"])(e.$f.formatNumber2(i.item.toTokenAmount,5)),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(p=i.item)||void 0===p?void 0:p.toTokenSymbol)||""),1)])):Object(o["createCommentVNode"])("",!0)]),Object(o["createElementVNode"])("div",vn,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatDate(i.item.createTimeT)),1),"pending"===i.item.status||"wait_kyc"===i.item.status||"wait_refund"===i.item.status?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:0,size:"0.24rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.formatStatus(i.item.status)),1)]})),_:1})):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",{key:1,style:Object(o["normalizeStyle"])({color:r.formatStatusColor(i.item.status)})},Object(o["toDisplayString"])(r.formatStatus(i.item.status)),5))])])}var kn={name:"BridgeTxItem",props:{item:{type:Object,default:function(){return{}}}},data:function(){return{getBridgeChain:tt["l"]}},methods:{goBridgeTx:function(e){e.chain&&e.transaction?this.$router.push({name:"BridgeTx",params:{hash:"".concat(e.transaction,"-").concat(e.chain,"-").concat(e.source_type)}}):this.$router.push({name:"BridgeTx",params:{hash:e.txHash}})},formatStatus:function(e){var t,n={pending:this.$t("pending"),success:this.$t("succeed"),fail:this.$t("failed"),wait_kyc:this.$t("wait_kyc"),wait_refund:this.$t("wait_refund"),refund_complete:this.$t("refund_complete"),timeout:this.$t("timeout")};return null!==(t=n[e])&&void 0!==t?t:e},formatStatusColor:function(e){return"pending"===e||"wait_kyc"===e||"wait_refund"===e?"#3F80F7":"success"===e||"refund_complete"===e?"#12B886":"#999999"}}};n("6c4c");const jn=rt()(kn,[["render",gn],["__scopeId","data-v-12774480"]]);var On,wn,Tn,yn=jn,Nn=n("a2ef"),Sn=n("fadf"),xn=n("e36d"),Vn=n("901e"),An=n.n(Vn),En=n("2c28"),Cn=n("4360"),$n=n("a18c");function _n(){window.addEventListener("message",(function(e){e.data.message&&"accountsChanged"===e.data.message.action&&(console.log("got accountsChanged event",e.data),Cn["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58)),e.data.message&&"setNode"==e.data.message.action&&console.log("got setNode event",e.data),e.data.message&&"connect"==e.data.message.action&&console.log("got connect event",e.data),e.data.message&&"disconnect"==e.data.message.action&&(console.log("got connect event",e.data),Cn["a"].commit("setWallet",""),Cn["a"].commit("setProvider",""))}))}function Bn(){return new Promise((function(e,t){window.tronLink?e(!0):(window.addEventListener("tronLink#initialized",(function(){window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))}),{once:!0}),setTimeout((function(){window.tronLink?(console.log("tronLink successfully detected!"),e(!0)):(console.log("Please install TronLink-Extension!"),t("Please install TronLink-Extension!"))}),3e3))}))}function Dn(){return _n(),new Promise((function(e,t){var n,o,i;window.tronWeb?(console.log("---tron_requestAccounts start----",null===(n=window)||void 0===n?void 0:n.tronWeb),null===(o=window)||void 0===o||null===(i=o.tronWeb)||void 0===i||i.request({method:"tron_requestAccounts"}).then((function(n){var o,i,a;console.log("tron_requestAccounts",n),200===n.code&&null!==(o=window)&&void 0!==o&&null!==(i=o.tronWeb)&&void 0!==i&&null!==(a=i.defaultAddress)&&void 0!==a&&a.base58?(Cn["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),Cn["a"].commit("setProvider",window.tronWeb),Cn["a"].commit("setChainId","tron"),e(window.tronWeb.defaultAddress.base58)):4001===n.code&&t(n)})).catch((function(e){console.log("connect tronLink error",e),4001===e.code?t("please connect tronLink"):console.error(e)}))):Bn().then((function(){var n,o;null===(n=window)||void 0===n||null===(o=n.tronWeb)||void 0===o||o.request({method:"tron_requestAccounts"}).then((function(n){var o,i,a;console.log("tron_requestAccounts",n),200===n.code&&null!==(o=window)&&void 0!==o&&null!==(i=o.tronWeb)&&void 0!==i&&null!==(a=i.defaultAddress)&&void 0!==a&&a.base58?(Cn["a"].commit("setProvider",window.tronWeb),Cn["a"].commit("setChainId","tron"),Cn["a"].commit("setWallet","TronLink"),Cn["a"].commit("setCurrentAccount",window.tronWeb.defaultAddress.base58),e(window.tronWeb.defaultAddress.base58)):4001===n.code&&t(n)})).catch((function(e){console.log("connect tronLink error",e),4001===e.code?t("请连接"):console.error(e)}))}))}))}function In(){var e;null===(e=window.unisat)||void 0===e||e.on("accountsChanged",(function(e){var t=Array.isArray(e)?e:[];Cn["a"].commit("setCurrentAccount",(null===t||void 0===t?void 0:t[0])||""),$n["a"].go(0)}))}function Ln(){return new Promise((function(e,t){window.unisat?e(!0):setTimeout((function(){window.unisat?(console.log("unisat successfully detected!"),e(!0)):(console.log("Please install unisat-Extension!"),t("Please install unisat-Extension!"))}),3e3)}))}function Rn(){return new Promise((function(e,t){Ln().then((function(){var n,o;null===(n=window)||void 0===n||null===(o=n.unisat)||void 0===o||o.requestAccounts().then((function(t){console.log("unisat requestAccounts",t),Cn["a"].commit("setProvider",window.unisat),Cn["a"].commit("setChainId","brc20"),Cn["a"].commit("setWallet","Unisat"),Cn["a"].commit("setCurrentAccount",(null===t||void 0===t?void 0:t[0])||""),In(),e((null===t||void 0===t?void 0:t[0])||"")})).catch((function(e){console.log("connect unisat error",e),4001===e.code?t("请连接"):console.error(e)}))}))}))}var Pn="2",Fn={name:"Bridge",components:{SlippageButton:Ce["a"],SelectBridgeToken:lt,SelectDex:$t,ConfirmBridgeSwap:on,BridgeTxItem:yn,ConfirmSwap:Nn["a"],SwapModeSet:Sn["a"]},setup:function(){var e=Object(En["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),t=Object(En["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),n=Object(En["useStorage"])("bridge_swapSlippageInfo",{slippage:Pn,auto:!0},localStorage),o=Object(En["useStorage"])("bridge_tokens",{},localStorage);return{fromToken:e,toToken:t,swapSlippageInfo:n,tokens:o}},data:function(){var e,t,n,o,i=localStorage.swapSlippage||"auto";return{currentTime:Date.now(),slippageVisible:!1,slippage:Pn,fromTokenAmount:"",toAddress:this.$store.state.currentAccount||"",bridge:{dex:"",logoUrl:""},bridgeList:[],loading:!1,loadingApprove:!1,loadingText:"",bridgeSwapTxData:{},show:!1,loadingConfirm:!1,allowance:xn["a"].from(Xe["i"]),loading1:!1,txHash:"",txs:[],getBridgeChain:tt["l"],loadingTxs:!1,rateType:!0,confirmTxVisible:!1,show1:!1,isAppGetContactList:(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t?void 0:t.appGetContactList)||(null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o?void 0:o.appGetContactListV2),tabActive:"wallet",accounts:{wallet:[],contact:[]},swapQuoteInfo:{},swapRouterPath:[],listRouter:[],isTax:!1,isTaxHigh:!1,dialogListRouterVisible:!1,selectedRouterIndex:0,isAmount:!0,isCannotSellAll:!1,toAmount:"",fromAmount:"",dialogVisibleSwap:!1,loadingConfirmSwap:!1,nativePrice:0,gasPrice:"0",swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},swapTxs:[],fromTokenInfo:{},userBalanceTokens:[],autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:Pn,customSlippage:i,gasBalance:0}},computed:{swapMode:function(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},swapSlippage:function(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},errorCode:function(){this.currentTime;if(!this.$store.state.currentAccount)return 1;if(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId)return 2;if(new An.a(this.fromTokenAmount||0).gt(this.fromToken.balance||0))return 3;if(!/(^0x[0-9a-zA-Z]{40}$)|(^(T|t)[0-9a-zA-Z]{33}$)|(^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$)/.test(this.toAddress)&&this.toAddress)return 6;var e=/^(T|t)[0-9a-zA-Z]{33}$/,t=/^0x[0-9a-zA-Z]{40}$/,n=/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$/,o=(e.test(this.toToken.address)||"tron"===this.toToken.chain)&&!e.test(this.toAddress),i=(n.test(this.toToken.address)||"brc20"===this.toToken.chain)&&!n.test(this.toAddress),a=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&!t.test(this.toAddress);if(o||i||a)return 6;if(new An.a(this.fromTokenAmount).lt(this.bridge.depositMin||0)&&this.bridge.depositMin)return 4;if(new An.a(this.fromTokenAmount).gt(this.bridge.depositMax||0)&&this.bridge.depositMax)return 5;var s=this.fromToken.chain,r=this.$f.getSwapContract(s),c=this.isSwap(),l=c?r:this.bridge.contractAddress;return Number(this.allowance)&&!this.allowance.lt(nt["utils"].parseUnits(this.fromTokenAmount||"0",this.fromToken.decimals||0))||!l?this.isSwap()?.5:0:-1},submitMsg:function(){var e,t=this.fromToken.chain,n=ot["a"].get("chainConfig",Xe["l"])||{},o=(null===(e=n[t])||void 0===e?void 0:e.name)||t,i={0:this.$t("oneClickCrossChain"),.5:this.$t("oneClickSwap"),1:this.$t("connectWallet"),2:this.$t("switchChain2",{chain:o}),3:this.$t("insufficientBalance"),6:this.$t("pleaseEnterCorrectReceiveAddress"),4:"".concat(this.$t("swapAmountCannotLess")," ").concat(this.bridge.depositMin||0," ").concat(this.fromToken.symbol),5:"".concat(this.$t("swapAmountCannotMore")," ").concat(this.bridge.depositMax||0," ").concat(this.fromToken.symbol),"-1":this.$t("approve")};return i[this.errorCode]},toTokenAmount:function(){if(this.isSwap())return this.toAmount||"";this.toAmount;return this.bridge.toTokenAmount||""},addressPattern:function(){return/^0x[0-9a-zA-Z]{40}$/},priceImpactV:function(){if(!Number(this.fromTokenAmount)&&!Number(this.toTokenAmount)||!this.isSwap())return"";var e=this.swapQuoteInfo.routerPath,t=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[0]:null,n=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[e.length-1]:null;if(t&&n){var o=this.swapQuoteInfo.from_price,i=this.swapQuoteInfo.to_price,a=nt["utils"].formatUnits(t.amount,t.decimals),s=nt["utils"].formatUnits(n.amount,n.decimals);return new An.a(a).times(o).div(new An.a(s).times(i)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},priceImpactColor:function(){var e,t,n,o,i,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(o=n.gt)&&void 0!==o&&o.call(n,.1)?"#F7933F":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(a=i.gt)&&void 0!==a&&a.call(i,.05)?"#f8be46":""},contractAddress:function(){var e=this.bridge.contractAddress;return this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):e},totalTxs:function(){var e=this.swapTxs.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{createTimeT:1e3*e.time,txHash:e.transaction,fromTokenAddress:e.from_address,fromAmount:e.from_amount,fromTokenSymbol:e.from_symbol,toTokenAddress:e.to_address,toTokenAmount:e.to_amount,toTokenSymbol:e.to_symbol,status:0===e.is_merged?"pending":"success"})})),t=[].concat(Object(Ae["a"])(this.txs),Object(Ae["a"])(e));return t=t.sort((function(e,t){return t.createTimeT-e.createTimeT})),t},estimatedFee:function(){var e=this.swapInfo.gasValue;if(!e)return"0";var t=this.gasPrice,n=this.nativePrice;return this.$f.formatNumber2(new An.a(e.toString()).times(n).times(t).div(String(Math.pow(10,18))).toFixed()||"0",2)}},watch:{contractAddress:function(e){e?(this.loadingText=this.$t("checkingAllowance"),this.getBalanceAndAllowance()):this.isSwap()||(this.allowance=xn["a"].from(Xe["i"]))},fromTokenAmount:function(e){""===e&&(this.bridge={dex:"",logoUrl:"",toTokenAmount:""},this.isSwap()&&this.isAmount&&(this.toAmount=""))},"$store.state.currentAccount":function(e){e&&!this.toAddress&&(this.toAddress=e)},show1:function(e){var t,n,o;console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||null===(o=n.isRefreshEnable)||void 0===o||o.call(n,"bridge",!e)}},methods:{init:function(){var e,t,n=this;this.fromToken=Object(En["useStorage"])("bridge_FromToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),this.toToken=Object(En["useStorage"])("bridge_toToken",{address:"",chain:"",symbol:"",decimals:0},sessionStorage),null!==(e=window)&&void 0!==e&&e.tronLink?Dn().then((function(e){console.log("currentAccount",n.$store.state.currentAccount),n.toAddress=e,n.currentTime=Date.now(),n.getBalance(),n.getUserTokenList(),n.getBridgeTokens()})):null!==(t=window)&&void 0!==t&&t.unisat?Rn().then((function(e){console.log("currentAccount",n.$store.state.currentAccount),n.toAddress=e,n.currentTime=Date.now(),n.getBalance(),n.getUserTokenList(),n.getBridgeTokens()})):(this.fromToken.chain&&this.fromToken.chain!==this.$store.getters.netId&&window.ethereum&&Object(et["h"])(this.fromToken.chain),this.getBalance(),this.getUserTokenList(),this.getBridgeTokens()),this.getBridgeTransData(),this.appGetContactList(),this.getUserAllTxs(),this.$f.setSwapSendType(""),this.getGasBalance()},getGasBalance:function(){var e=this;"tron"===this.$store.getters.netId&&"brc20"===this.$store.getters.netId&&Object(tt["v"])().then((function(t){e.gasBalance=t}))},appGetContactList:function(){var e,t,n,o,i=this;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appGetContactListV2){var a,s,r,c,l,d=this.toToken.chain||this.fromToken.chain||this.$store.getters.netId,u=null===(a=window)||void 0===a||null===(s=a._tw_)||void 0===s||null===(r=s.appGetContactListV2)||void 0===r?void 0:r.call(s,d);console.log("accounts",u),this.accounts=u&&Object(et["g"])(u)?JSON.parse(u):{wallet:[],contact:[]},console.log("this.accounts",this.accounts),this.tabActive=null!==(c=this.accounts)&&void 0!==c&&null!==(l=c.contact)&&void 0!==l&&l.some((function(e){return e.contact_address===i.toAddress}))?"contact":"wallet",console.log("tabActive",this.tabActive)}else if(null!==(n=window)&&void 0!==n&&null!==(o=n._tw_)&&void 0!==o&&o.appGetContactList){var m,h,b,p,f,v=null===(m=window)||void 0===m||null===(h=m._tw_)||void 0===h||null===(b=h.appGetContactList)||void 0===b?void 0:b.call(h);console.log("accounts",v),this.accounts=v&&Object(et["g"])(v)?JSON.parse(v):{wallet:[],contact:[]},console.log("this.accounts",this.accounts),this.tabActive=null!==(p=this.accounts)&&void 0!==p&&null!==(f=p.contact)&&void 0!==f&&f.some((function(e){return e.contact_address===i.toAddress}))?"contact":"wallet",console.log("tabActive",this.tabActive)}},getBridgeTokens:function(){var e=this;Object(tt["o"])().then((function(t){console.log(t),e.tokens=t.tokens,e.initToken(),e.getSwapTokenList((function(){e.initToken()}))}))},initToken:function(){var e=this,t=this.$store.getters.netId,n=t?Object(tt["l"])(this.$store.getters.netId,2)||t:"";if(n&&this.tokens[n]){var o,i;if(this.fromToken.address&&this.fromToken.bridgeChain){if(this.fromToken.address){var a=this.tokens[n].find((function(t){var n,o,i,a,s;return(null===(n=t.address)||void 0===n||null===(o=n.toLowerCase)||void 0===o?void 0:o.call(n))===(null===(i=e.fromToken)||void 0===i||null===(a=i.address)||void 0===a||null===(s=a.toLowerCase)||void 0===s?void 0:s.call(a))}));a&&(this.fromToken=Object(Ee["a"])(Object(Ee["a"])({},a),{},{chain:t,bridgeChain:n}))}}else this.fromToken=Object(Ee["a"])(Object(Ee["a"])({},this.tokens[n][0]),{},{chain:t,bridgeChain:n});if(this.toToken.address&&this.toToken.bridgeChain||null===(o=this.tokens)||void 0===o||null===(i=o[n])||void 0===i||!i[1]){if(this.toToken.address&&this.toToken.bridgeChain){var s=Object(tt["l"])(this.toToken.bridgeChain),r=this.toToken.bridgeChain;if(s){var c=this.tokens[r].find((function(t){var n,o,i,a,s;return(null===(n=t.address)||void 0===n||null===(o=n.toLowerCase)||void 0===o?void 0:o.call(n))===(null===(i=e.toToken)||void 0===i||null===(a=i.address)||void 0===a||null===(s=a.toLowerCase)||void 0===s?void 0:s.call(a))}));c&&(this.toToken=Object(Ee["a"])(Object(Ee["a"])({},c),{},{chain:s,bridgeChain:r}))}}}else{var l,d,u=null===(l=this.tokens)||void 0===l||null===(d=l[n])||void 0===d?void 0:d.find((function(e){return new RegExp("USDT").test(e.symbol)}));this.toToken=Object(Ee["a"])(Object(Ee["a"])({},null!==u&&void 0!==u?u:this.tokens[n][1]),{},{chain:t,bridgeChain:n})}var m=/^(T|t)[0-9a-zA-Z]{33}$/,h=/^0x[0-9a-zA-Z]{40}$/,b=/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$/,p=(m.test(this.toToken.address)||"tron"===this.toToken.chain)&&!m.test(this.toAddress),f=(b.test(this.toToken.address)||"brc20"===this.toToken.chain)&&!b.test(this.toAddress),v=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain)&&!h.test(this.toAddress);(p||f||v)&&(this.toAddress=""),this.fromToken.address&&this.fromToken.chain&&this.getBalanceAndAllowance()}},getBalanceAndAllowance:function(){var e=this;if("brc20"===this.fromToken.chain)return this.allowance=xn["a"].from(Xe["i"]),void this.getFromBalance();if(!this.fromToken.chain||this.fromToken.chain===this.$store.getters.netId){this.loadingText=this.$t("checkingAllowance"),this.loading1=!0;var t=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;Object(tt["j"])(this.fromToken.address,t||this.bridge.contractAddress,this.fromToken.chain).then((function(t){e.allowance=t.allowance,e.fromToken.balance=nt["utils"].formatUnits(t.balance.toString(),e.fromToken.decimals)})).finally((function(){e.loading1=!1})),this.getToBalance()}},getBalance:function(){this.getFromBalance(),this.getToBalance()},getFromBalance:function(){var e=this;this.fromToken.address&&this.fromToken.chain&&this.$store.state.currentAccount&&Object(tt["i"])(this.fromToken.address,this.fromToken.chain).then((function(t){e.fromToken.balance=nt["utils"].formatUnits(t.toString(),e.fromToken.decimals)}))},getToBalance:function(){var e=this;this.toToken.address&&this.toToken.chain&&this.$store.state.currentAccount&&Object(tt["i"])(this.toToken.address,this.toToken.chain).then((function(t){e.toToken.balance=nt["utils"].formatUnits(t.toString(),e.toToken.decimals)}))},watchFromAmount:function(e){var t=this;if(this.isSwap()){if(this.loading&&!this.isAmount)return;var n=Number(e);if(""===e||"."===e)return this.fromTokenAmount="",this.toAmount="",void(this.loading=!1);if(0===n&&0!==Number(this.toAmount))return this.toAmount=0,void(this.loading=!1);n&&(this.isAmount=!0,this.toAmount="")}(Number(e)<0||Number.isNaN(Number(e)))&&(this.fromTokenAmount="0"),this.fromToken.address&&this.toToken.address&&this.fromTokenAmount&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount&&(new An.a(this.fromTokenAmount).lte(0)||(On&&(clearTimeout(On),On=null),this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),On=setTimeout((function(){t.getBridgeQuote()}),500)))},watchToAmount:function(e){var t=this;if(this.isSwap()){if(this.loading&&this.isAmount)return;var n=Number(e);if(""===e||"."===e)return this.fromTokenAmount="",this.toAmount="",void(this.loading=!1);if(0===n&&0!==Number(this.fromTokenAmount))return this.fromTokenAmount=0,void(this.loading=!1);n&&(this.fromTokenAmount="",this.isAmount=!1)}(Number(e)<0||Number.isNaN(Number(e)))&&(this.toAmount="0"),this.fromToken.address&&this.toToken.address&&this.toAmount&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount&&(new An.a(this.toAmount).lte(0)||(On&&(clearTimeout(On),On=null),this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),On=setTimeout((function(){t.getBridgeQuote(!1)}),500)))},handelTokenChange:function(e){if(this.bridgeList=[],this.bridge={},"from"===e){var t;this.fromTokenAmount="";var n=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;n?this.getBalanceAndAllowance():this.getFromBalance(),0!==(null===(t=this.userBalanceTokens)||void 0===t?void 0:t.length)&&this.userBalanceTokens[0].chain===this.fromToken.chain||this.getUserTokenList()}else{this.getToBalance();var o=/^(T|t)[0-9a-zA-Z]{33}$/,i=/^0x[0-9a-zA-Z]{40}$/,a=/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$/,s=(o.test(this.toToken.address)||"tron"===this.toToken.chain)&&!o.test(this.toAddress),r=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&!i.test(this.toAddress)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain),c=(a.test(this.toToken.address)||"tron"===this.toToken.chain)&&!a.test(this.toAddress);(s||r||c)&&(this.toAddress=""),this.appGetContactList()}this.watchFromAmount(this.fromTokenAmount)},onCountDownFinish:function(){var e,t;this.loading||this.loading1||this.loadingConfirm||this.show||"hidden"===document.visibilityState||null!==(e=this.$refs)&&void 0!==e&&null!==(t=e.selectDex)&&void 0!==t&&t.show?this.countDownFinishReset():(this.bridgeList=[],this.bridge={},this.isSwap()&&!this.isAmount?this.watchToAmount(this.toAmount):this.watchFromAmount(this.fromTokenAmount))},countDownFinishReset:function(){this.$refs.countDown.reset(),this.isSwap()&&this.dialogVisibleSwap&&.5===this.errorCode&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},switchToken:function(){var e=Object(Ee["a"])({},this.fromToken);this.fromToken=this.toToken,this.toToken=e,this.fromTokenAmount="",this.getBridgeQuote(),this.getBalanceAndAllowance(),this.fromToken.chain!==this.$store.getters.netId&&Object(et["h"])(this.fromToken.chain)},getBridgeQuote:function(){var e,t=this;if(this.fromToken.address&&this.toToken.address&&(this.fromTokenAmount||this.toAmount)&&this.fromToken.bridgeChain&&this.toToken.bridgeChain&&this.$store.state.currentAccount){if(this.fromToken.address===this.toToken.address&&this.fromToken.bridgeChain===this.toToken.bridgeChain)return this.$toast({position:"top",message:this.$t("twoTokensCannotBeTheSame")}),void(this.loading=!1);if(this.isSwap())this.getQuoteInfo(this.isAmount);else{if(!this.$refs.selectFrom.isCanSwap||!this.$refs.selectTo.isCanSwap){var n=this.$refs.selectFrom.isCanSwap?this.toToken.chain:this.fromToken.chain,o=Object(tt["l"])(n,2);if(!o){var i,a=ot["a"].get("chainConfig",Xe["l"])||{},s=(null===(i=a[n])||void 0===i?void 0:i.name)||n;return this.$toast({position:"top",message:"".concat(s," ")+this.$t("chain")+this.$t("tokenDoesNotSupportCross-chain")}),void(this.loading=!1)}var r=this.$refs.selectFrom.isCanSwap?this.toToken.symbol:this.fromToken.symbol;return this.$toast({position:"top",message:"".concat(r," ")+this.$t("tokenDoesNotSupportCross-chain")}),void(this.loading=!1)}var c=/^(T|t)[0-9a-zA-Z]{33}$/,l=/^0x[0-9a-zA-Z]{40}$/,d=/^(bc1|[13])[a-zA-HJ-NP-Z0-9]{20,62}$/,u=""===this.toAddress,m=(c.test(this.toToken.address)||"tron"===this.toToken.chain)&&!c.test(this.toAddress),h=("TRON"!==this.toToken.bridgeChain||"tron"!==this.toToken.chain)&&!l.test(this.toAddress)&&("BTC"!==this.toToken.bridgeChain||"brc20"!==this.toToken.chain),b=(d.test(this.toToken.address)||"tron"===this.toToken.chain)&&!d.test(this.toAddress);if(u||m||h||b)return this.$toast({position:"top",message:this.$t("pleaseEnterCorrectReceiveAddress")}),void(this.loading=!1);var p={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromTokenAmount:null===(e=nt["utils"].parseUnits(this.fromTokenAmount,this.fromToken.decimals||0))||void 0===e?void 0:e.toString(),fromTokenChain:this.fromToken.bridgeChain,toTokenChain:this.toToken.bridgeChain,toAddress:this.toAddress||this.$store.state.currentAccount||"",slippage:this.slippage};this.loading=!0,this.loadingText=this.$t("lookingForBestChannel"),Object(tt["m"])(p).then((function(e){var n,o,i=(e.txData||[]).filter((function(e){return p.fromTokenChain!==p.toTokenChain&&["SWFT","Bridgers","Aggregator"].includes(e.dex)||p.fromTokenChain===p.toTokenChain}));if(null!==(n=window)&&void 0!==n&&null!==(o=n._tw_)&&void 0!==o&&o.appSendSwftTxs&&"ETH"!==p.fromTokenChain&&"TRON"!==p.fromTokenChain&&"BTC"!==p.toTokenChain||(i=i.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{isSupportNoGas:!1})}))),t.hasNoGas()){var a=i.findIndex((function(e){return e.isSupportNoGas}));if(a>-1&&i.length>1){var s=Object(Ee["a"])({},i[a]),r=Object(Ee["a"])({},i[0]);i[0]=s,i[a]=r}}t.bridgeList=i,t.bridge=Object(Ee["a"])({},t.bridgeList[0])})).catch((function(e){console.log(e),t.$toast({position:"top",message:e})})).finally((function(){t.loading=!1,t.countDownFinishReset()}))}}},getBridgeSwap:function(){var e,t=this,n={fromTokenAddress:this.fromToken.address,toTokenAddress:this.toToken.address,fromAddress:this.$store.state.currentAccount,amountOutMin:this.bridge.amountOutMin||this.$f.formatNumShort(this.bridge.toTokenAmount*(1-this.slippage/100),3)||"0",routerPath:this.bridge.path,amounts:[],dex:this.bridge.dex,aggregator:"",fromTokenChain:this.fromToken.bridgeChain,toTokenChain:this.toToken.bridgeChain,toAddress:this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:this.bridge.fromTokenAmount,slippage:this.slippage,isNoGas:(null===(e=this.bridge)||void 0===e?void 0:e.isSupportNoGas)||!1};this.loading=!0,this.loadingText=this.$t("oneClickCrossChain"),Object(tt["n"])(n).then((function(e){var o,i,a,s;(console.log(null===e||void 0===e||null===(o=e.txData)||void 0===o?void 0:o.noGasTxInfo),"TRON"===n.fromTokenChain||"BTC"===n.fromTokenChain)?t.bridgeSwapTxData=Object(Ee["a"])(Object(Ee["a"])({},(null===e||void 0===e?void 0:e.txData)||{}),{},{bridge:n,txInfo:Object(Ee["a"])(Object(Ee["a"])({},n),{},{toTokenAmount:t.bridge.toTokenAmount}),isSupportNoGas:null!==(i=null===n||void 0===n?void 0:n.isNoGas)&&void 0!==i&&i}):t.bridgeSwapTxData=Object(Ee["a"])(Object(Ee["a"])({from:(null===e||void 0===e||null===(a=e.txData)||void 0===a?void 0:a.from)||t.$store.state.currentAccount||void 0},(null===e||void 0===e?void 0:e.txData)||{}),{},{txInfo:Object(Ee["a"])(Object(Ee["a"])({},n),{},{toTokenAmount:t.bridge.toTokenAmount}),isSupportNoGas:null!==(s=null===n||void 0===n?void 0:n.isNoGas)&&void 0!==s&&s});e.txData?t.show=!0:t.$toast({position:"top",message:t.$t("failedTransation")})})).catch((function(e){console.log(e),t.$toast({position:"top",message:e})})).finally((function(){t.countDownFinishReset(),t.loading=!1}))},confirmSwap:function(){var e,t,n,o,i=this;if("TRON"===(null===(e=this.bridgeSwapTxData)||void 0===e||null===(t=e.bridge)||void 0===t?void 0:t.fromTokenChain))this.confirmSwapTron();else if("BTC"===(null===(n=this.bridgeSwapTxData)||void 0===n||null===(o=n.bridge)||void 0===o?void 0:o.fromTokenChain))this.confirmSwapBTC();else if(this.bridgeSwapTxData.to){var a,s;console.log(this.bridgeSwapTxData),this.bridgeSwapTxData.isSupportNoGas&&null!==(a=window)&&void 0!==a&&null!==(s=a._tw_)&&void 0!==s&&s.appSendSwftTxs&&"ETH"!==this.bridgeSwapTxData.bridge.fromTokenChain?this.confirmNoGasSwap():(this.loadingConfirm=!0,Object(tt["W"])(this.bridgeSwapTxData).then((function(e){var t,n,o;i.txHash=e.hash;var a={fromTokenAmount:null===e||void 0===e||null===(t=e.transferData)||void 0===t?void 0:t.fromTokenAmount,fromTokenAddress:null===e||void 0===e||null===(n=e.transferData)||void 0===n?void 0:n.fromTokenAddress,fromAddress:null===e||void 0===e||null===(o=e.transferData)||void 0===o?void 0:o.fromAddress};return i.addBridgeTransData(e.hash,a),i.show=!1,i.fromTokenAmount="",i.bridge={dex:"",logoUrl:""},""!==e.hash&&(i.confirmTxVisible=!0),e.wait()})).then((function(e){console.log(e),i.getBalanceAndAllowance()})).catch((function(e){i.$f.handleError(e)})).finally((function(){i.loadingConfirm=!1})))}},confirmNoGasSwap:function(){var e,t=this;if(this.bridgeSwapTxData.isSupportNoGas&&(null!==(e=window)&&void 0!==e&&e._tw_)){var n,o,i;this.loadingConfirm=!0;var a={ave_method:"appSendSwftTxs",transactionData:this.bridgeSwapTxData.noGasTxInfo,orderId:this.bridgeSwapTxData.orderId};console.log(a),this.loadingConfirm=!0,null===(n=window)||void 0===n||null===(o=n.ethereum)||void 0===o||null===(i=o.request)||void 0===i||i.call(o,{method:"wallet_switchEthereumChain",params:[a]}).then((function(e){console.log("appSendSwftTxs result json",e);var n=e;if(e&&Object(et["g"])(e)){var o,i;if(n=JSON.parse(e),console.log("appSendSwftTxs result object",e),800!==Number(n.resCode))return t.$toast({position:"top",message:null===(i=n)||void 0===i?void 0:i.resMsg}),void(t.loadingConfirm=!1);n=(null===(o=n)||void 0===o?void 0:o.data)||n||{}}if(t.txHash=n.transactionHash,t.addBridgeTransData(t.txHash),t.show=!1,t.fromTokenAmount="",t.bridge={dex:"",logoUrl:""},""!==n.transactionHash&&(t.confirmTxVisible=!0),n.transactionHash&&window.ethereum){var a=new nt["providers"].Web3Provider(window.ethereum);a.waitForTransaction(n.transactionHash).then((function(e){console.log(e),t.getBalanceAndAllowance()}))}})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loadingConfirm=!1}))}},confirmSwapTron:function(){var e=this;return Object(Ve["a"])(regeneratorRuntime.mark((function t(){var n,o,i,a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.bridgeSwapTxData),"TRON"===(null===(n=e.bridgeSwapTxData)||void 0===n||null===(o=n.bridge)||void 0===o?void 0:o.fromTokenChain)&&(a=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,"SWFT"===a.dex?(e.loadingConfirm=!0,a.fromTokenAddress===Xe["k"]?(s=window.tronWeb,s.trx.sendTransaction(e.bridgeSwapTxData.platformAddr,a.fromTokenAmount).then((function(t){var n;console.log("sendTransaction",t);var o=null===t||void 0===t||null===(n=t.transaction)||void 0===n?void 0:n.txID;e.txHash=o,e.addBridgeTransData(o),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==o&&(e.confirmTxVisible=!0)})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingConfirm=!1}))):Object(tt["a"])(a.fromTokenAddress,e.bridgeSwapTxData.platformAddr,a.fromTokenAmount).then((function(t){var n,o;(console.log("TRC20Transfer",t),null!==t&&void 0!==t&&t.hash)&&(e.txHash=null===(n=t.hash)||void 0===n||null===(o=n.transaction)||void 0===o?void 0:o.txID,e.addBridgeTransData(e.txHash),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==e.txHash&&(e.confirmTxVisible=!0));return t.wait()})).then((function(t){console.log(t),e.getBalanceAndAllowance()})).catch((function(t){console.log("error",t),e.$f.handleError(t.error||t.code||t)})).finally((function(){e.loadingConfirm=!1}))):(r=window.tronWeb,e.loadingConfirm=!0,r.transactionBuilder.triggerSmartContract(e.bridgeSwapTxData.tronRouterAddrees,e.bridgeSwapTxData.functionName,e.bridgeSwapTxData.options,e.bridgeSwapTxData.parameter,e.bridgeSwapTxData.fromAddress).then((function(t){var n;return console.log("triggerSmartContract result",t),e.txHash=null===t||void 0===t||null===(n=t.transaction)||void 0===n?void 0:n.txID,r.trx.sign(t.transaction)})).then((function(e){return console.log("signedTx",e),r.trx.sendRawTransaction(e)})).then((function(t){if(console.log("broastTx",t),!t.result)throw new Error(t.code);var n=e.txHash;n&&(e.addBridgeTransData(n),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==n&&(e.confirmTxVisible=!0))})).catch((function(t){e.$f.handleError(t.code||t)})).finally((function(){e.loadingConfirm=!1}))));case 2:case"end":return t.stop()}}),t)})))()},confirmSwapBTC:function(){var e=this;return Object(Ve["a"])(regeneratorRuntime.mark((function t(){var n,o,i,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.bridgeSwapTxData),"BTC"===(null===(n=e.bridgeSwapTxData)||void 0===n||null===(o=n.bridge)||void 0===o?void 0:o.fromTokenChain)&&(a=null===(i=e.bridgeSwapTxData)||void 0===i?void 0:i.bridge,"SWFT"===a.dex&&(e.loadingConfirm=!0,a.fromTokenAddress===Xe["k"]&&(s=window.unisat,null===s||void 0===s||s.sendBitcoin(e.bridgeSwapTxData.platformAddr,Number(a.fromTokenAmount)).then((function(t){console.log("sendBitcoin",t);var n=t;e.txHash=n,e.addBridgeTransData(n),e.show=!1,e.fromTokenAmount="",e.bridge={dex:"",logoUrl:""},""!==n&&(e.confirmTxVisible=!0)})).catch((function(t){console.log(t),e.$f.handleError(t)})).finally((function(){e.loadingConfirm=!1})))));case 2:case"end":return t.stop()}}),t)})))()},approve:function(){var e=this;this.loading=!0,this.loadingApprove=!0,this.loadingText=this.$t("approve");var t=this.isSwap()?this.$f.getSwapContract(this.fromToken.chain):this.bridge.contractAddress;"bsc"!==this.$store.getters.netId&&"eth"!==this.$store.getters.netId||this.$f.setSwapSendType("fast"),Object(tt["g"])(this.fromToken.address,t).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getBalanceAndAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loading=!1,e.loadingApprove=!1,e.$f.setSwapSendType("")}))},onSubmit:function(){var e=this;1===this.errorCode?this.$store.dispatch("handleWalletAddress").then((function(t){"tron"===t&&(e.getBalance(),e.getUserTokenList(),e.getBridgeTokens())})):-1===this.errorCode?this.approve():this.isSwap()?this.getSwapTx():this.getBridgeSwap()},handleMax:function(){var e,t=null===(e=this.fromToken)||void 0===e?void 0:e.balance;if(this.fromToken.address===Xe["k"]){var n=this.fromToken.chain,o=Xe["j"][n]||.01;t=new An.a(t).minus(o).toFixed()}if(Number(t)>0){if(this.fromTokenAmount===t)return;this.fromTokenAmount=t,this.watchFromAmount(this.fromTokenAmount)}},addBridgeTransData:function(){var e,t,n,o,i=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.txHash,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(null===(e=this.bridgeSwapTxData)||void 0===e?void 0:e.txInfo)||{},c={fromTokenAddress:s.fromTokenAddress||r.fromTokenAddress||this.fromToken.address,toTokenAddress:r.toTokenAddress||this.toToken.address,fromAddress:s.fromAddress||r.fromAddress||this.$store.state.currentAccount,toAddress:r.toAddress||this.toAddress||this.$store.state.currentAccount||"",fromTokenAmount:s.fromTokenAmount||r.fromTokenAmount||this.bridge.fromTokenAmount,fromChain:r.fromTokenChain||this.fromToken.bridgeChain,toChain:r.toTokenChain||this.toToken.bridgeChain,slippage:r.slippage||this.slippage,hash:a,toTokenAmount:r.toTokenAmount||this.toTokenAmount,dexName:r.dex||this.bridge.dex,transferData:null!==(t=null===(n=this.bridgeSwapTxData)||void 0===n?void 0:n.transferData)&&void 0!==t?t:null,orderId:null===(o=this.bridgeSwapTxData)||void 0===o?void 0:o.orderId};Object(tt["b"])(c).then((function(e){console.log(e),i.getBridgeTransData(a),["success","refund_complete"].includes(null===e||void 0===e?void 0:e.finalStatus)?i.$toast.success(i.$t("swapSucceed")):i.getBridgeTransDetail(a)})).catch((function(e){console.log(e),i.$toast({position:"top",message:e})}))},getBridgeTransDetail:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.txHash;Object(tt["q"])(t).then((function(n){console.log(n),["success","refund_complete"].includes(null===n||void 0===n?void 0:n.finalStatus)?(e.confirmTxVisible=!1,e.$toast.success(e.$t("swapSucceed")),e.getBridgeTransData()):setTimeout((function(){e.getBridgeTransDetail(t)}),8e3)})).catch((function(t){console.log(t),e.$toast({position:"top",message:t})}))},getBridgeTransData:function(){var e=this,t={pageNo:1,pageSize:1e3};this.loadingTxs=!0,Object(tt["p"])(t).then((function(t){var n;console.log(t),e.txs=null!==(n=t.list)&&void 0!==n?n:[]})).catch((function(t){console.log(t),e.$toast({position:"top",message:t})})).finally((function(){e.loadingTxs=!1}))},formatStatus:function(e){var t,n={pending:this.$t("pending"),success:this.$t("succeed"),fail:this.$t("failed"),wait_kyc:this.$t("wait_kyc"),wait_refund:this.$t("wait_refund"),refund_complete:this.$t("refund_complete"),timeout:this.$t("timeout")};return null!==(t=n[e])&&void 0!==t?t:e},formatStatusColor:function(e){return"pending"===e||"wait_kyc"===e||"wait_refund"===e?"#3F80F7":"success"===e||"refund_complete"===e?"#12B886":"#999999"},getRate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.fromTokenAmount&&this.toTokenAmount?0===e?this.$f.formatNumber2(new An.a(this.fromTokenAmount).div(this.toTokenAmount).toFixed()):this.$f.formatNumber2(new An.a(this.toTokenAmount).div(this.fromTokenAmount).toFixed()):"--"},goBridgeTx:function(e){this.$router.push({name:"BridgeTx",params:{hash:e.txHash}})},handleSelectAccount:function(e){this.toAddress=(null===e||void 0===e?void 0:e.contact_address)||"",this.show1=!1},getAvgPrice:function(){if((!this.fromTokenAmount||!this.toTokenAmount)&&this.fromToken.chain===this.toToken.chain)return"--";var e=this.fromTokenAmount,t=this.toTokenAmount;if(this.isTax){var n,o,i,a,s=(null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.totalTax)||((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_sell_tax)||0)+((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_buy_tax)||0);s=Math.min(49,s),null!==(a=this.swapQuoteInfo)&&void 0!==a&&a.isAmountOut?e=new An.a(e).times(100+s).div(100):t=new An.a(t).times(100-s).div(100)}var r=this.swapQuoteInfo.from_price,c=this.swapQuoteInfo.to_price;return r&&c?this.$f.formatNumber2(t/e/(r/c)*r):"--"},onSubmitSlippage:function(e){this.swapSlippageInfo.auto!==e.autoSlippage&&e.autoSlippage?this.swapSlippageInfo={slippage:Pn,auto:e.autoSlippage}:this.swapSlippageInfo={slippage:e.slippage,auto:e.autoSlippage}},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},getSelectedRouter:function(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!Number(this.fromTokenAmount)&&t||!Number(this.toAmount)&&!t)this.loading=!1;else if(this.fromToken.address!==this.toToken.address){wn&&(clearTimeout(wn),wn=null);var n=this.fromToken.chain;wn=setTimeout((function(){e.dealGetQuoteInfo(t,n)}),500)}else this.$toast({position:"top",message:this.$t("twoIdenticalTokens")})},dealGetQuoteInfo:function(e,t){var n=this;if((this.fromTokenAmount||this.toAmount)&&this.fromToken.address&&this.toToken.address){var o;console.log("isAmount",e,t);var i=this.fromToken.decimals,a=this.toToken.decimals;this.loading=!0,this.loadingText=this.$t("lookingForBestChannel");var s={from_token:this.fromToken.address,to_token:this.toToken.address,amountIn:e?nt["utils"].parseUnits(new An.a(this.fromTokenAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0],i).toString():0,amountOut:e?0:nt["utils"].parseUnits(new An.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString()},r=null===(o=this.fromTokenInfo)||void 0===o?void 0:o.pairs,c="";if("core"===t&&(null===r||void 0===r?void 0:r.length)>0){var l,d=(null===r||void 0===r||null===(l=r.find)||void 0===l?void 0:l.call(r,(function(e){var t=[e.token0_address,e.token1_address];return t.includes(s.token0_address)||t.includes(s.token1_address)})))||(null===r||void 0===r?void 0:r[0]),u=null===d||void 0===d?void 0:d.amm,m={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};c=(null===m||void 0===m?void 0:m[u])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f"}Object(tt["T"])(s,c,t).then((function(e){n.swapPathList=e,n.selectedRouter(e),n.getSwapGas()})).catch((function(e){n.$f.handleError(e),n.$nextTick((function(){setTimeout((function(){n.loading=!1,n.countDownFinishReset()}),800)}))}))}},selectedRouter:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.swapPathList,n=t[this.selectedRouterIndex],o=t[this.selectedRouterIndex].routerPath,i=this.isAmount,a=this.fromToken.decimals,s=this.toToken.decimals,r=!1;if(i){var c,l=nt["utils"].parseUnits(new An.a(this.fromTokenAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString(),d=(null===(c=o[0])||void 0===c?void 0:c.amount)||0;r=l===d}else{var u,m=nt["utils"].parseUnits(new An.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(s,"})?")))[0],s).toString(),h=(null===(u=o[o.length-1])||void 0===u?void 0:u.amount)||0;r=m===h}if(r){if(1===n.from_cannot_sell_all){var b,p=new An.a(nt["utils"].parseUnits(String(this.fromToken.balance),null===(b=this.fromToken)||void 0===b?void 0:b.decimals).toString()),f=new An.a(null===n||void 0===n?void 0:n.routerPath[0].amount);this.isCannotSellAll=p.gt(0)&&f.div(p).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=n.totalTax>0||n.total_sell_tax>0||n.total_buy_tax>0;var v=this.getPriceImpact(n);if(console.log("routerInfo",n),this.isTax||v.gt(.5)){this.isTaxHigh=n.total_sell_tax+n.total_buy_tax+1>49.99;var g=n.totalTax||n.total_sell_tax+n.total_buy_tax,k=Number(v);if("auto"===this.customSlippage){var j=g+k+(g>5||k>5?2.5:2);j=Math.max(Math.min(j,49.99),.5),this.autoSlippageValue=String(Number(j.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=Pn);if(n.weight>5e4||n.totalTax>0||n.total_sell_tax>0||n.total_buy_tax>0?this.autoSwapMode="fast":this.autoSwapMode="protect",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=n,this.swapRouterPath=o.map((function(e,t){var o,i;return{symbol:e.symbol,nextAmm:(null===n||void 0===n||null===(o=n.pair_path)||void 0===o||null===(i=o[t])||void 0===i?void 0:i.amm)||""}})),this.listRouter=t.map((function(t){var n=0,o=0;if(i){var a,s=t.routerPath[t.routerPath.length-1];n=nt["utils"].formatUnits(s.amount||"0",(null===s||void 0===s?void 0:s.decimals)||(null===(a=e.toToken)||void 0===a?void 0:a.decimals))}else{var r=t.routerPath[0];o=nt["utils"].formatUnits(r.amount||"0",(null===r||void 0===r?void 0:r.decimals)||e.fromToken.decimals)}var c=t.routerPath.map((function(e,n){var o,i;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(o=t.pair_path)||void 0===o||null===(i=o[n])||void 0===i?void 0:i.amm)||""}}));return Object(Ee["a"])(Object(Ee["a"])({},c),{},{amount:i?n:o,priceImpact:t.priceImpact})})),i){var O,w=o[o.length-1];this.toAmount=nt["utils"].formatUnits(w.amount||"0",(null===w||void 0===w?void 0:w.decimals)||(null===(O=this.toToken)||void 0===O?void 0:O.decimals))}else{var T,y=o[0];this.fromTokenAmount=nt["utils"].formatUnits(y.amount||"0",(null===y||void 0===y?void 0:y.decimals)||(null===(T=this.fromToken)||void 0===T?void 0:T.decimals))}r&&this.$nextTick((function(){setTimeout((function(){e.loading=!1,e.countDownFinishReset()}),800)}))}},getPriceImpact:function(e){if(!Number(this.fromTokenAmount)&&!Number(this.toTokenAmount))return new An.a(0);var t=e.routerPath,n=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,o=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(n&&o){var i=e.from_price,a=e.to_price,s=nt["utils"].formatUnits(n.amount,n.decimals),r=nt["utils"].formatUnits(o.amount,o.decimals);return new An.a(s).times(i).div(new An.a(r).times(a)).minus(1).abs().times(100)}return new An.a(0)},isSwap:function(){var e=!this.hasNoGas(),t=Object.keys(Xe["t"]);return this.fromToken.chain===this.toToken.chain&&this.fromToken.chain&&t.includes(this.fromToken.chain)&&e},hasNoGas:function(){var e,t,n=new An.a(this.gasBalance||0),o=this.fromToken.chain||this.$store.getters.netId,i=new An.a(Xe["j"][o]||.001).div(2);return n.lt(i)&&(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t?void 0:t.appSendSwftTxs)&&"eth"!==o},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},getSwapGas:function(){var e=this;Tn&&(clearTimeout(Tn),Tn=null),Tn=setTimeout((function(){var t,n;.5===e.errorCode&&e.$store.state.currentAccount&&!e.loading&&(null===(t=e.swapQuoteInfo)||void 0===t||null===(n=t.routerPath)||void 0===n?void 0:n.length)>0&&(Object(tt["Y"])(e.swapQuoteInfo,e.swapSlippage).then(function(){var t=Object(Ve["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=n,e.swapInfo=n.swapInfo,e.swapInfo.gasValue=n.gasValue,e.swapInfo.swapRouterPath=e.swapRouterPath;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})),e.getNativeTokenPrice(),e.getGasPrice())}),3e3)},getSwapTx:function(){var e,t,n=this,o=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];(null===(e=this.swapQuoteInfo)||void 0===e||null===(t=e.routerPath)||void 0===t?void 0:t.length)>0&&(this.loading=!0,this.loadingText=this.$t("oneClickSwap"),console.log("this.swapSlippage",this.swapSlippage),Object(tt["Y"])(this.swapQuoteInfo,this.swapSlippage).then(function(){var e=Object(Ve["a"])(regeneratorRuntime.mark((function e(t){var i,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.swapSubmitInfo=t,n.swapInfo=t.swapInfo,n.swapInfo.gasValue=t.gasValue,n.swapInfo.swapRouterPath=n.swapRouterPath,n.loading=!1,o&&(r=(null===(i=window)||void 0===i||null===(a=i._tw_)||void 0===a||null===(s=a.appGetFreePay)||void 0===s?void 0:s.call(a))||!1,r=!!r&&JSON.parse(r),r?n.submitSwap():n.dialogVisibleSwap=!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){n.loading=!1,n.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice())},getNativeTokenPrice:function(){var e=this,t=this.$store.getters.netId||this.fromToken.chain;Object(tt["E"])(t).then((function(t){e.nativePrice=t}))},getGasPrice:function(){var e=this,t=this.$store.getters.netId||this.fromToken.chain;Object(tt["w"])(t).then((function(t){e.gasPrice=t.toString()})).catch((function(t){console.log(t),e.gasPrice="0"}))},submitSwap:function(){var e=arguments,t=this;return Object(Ve["a"])(regeneratorRuntime.mark((function n(){var o,i,a,s,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.length>0&&void 0!==e[0]?e[0]:t.swapSubmitInfo,n.prev=1,t.loading=!0,t.loadingConfirmSwap=!0,console.log("swapSubmitInfo",o),n.next=7,o.swapCallStatic();case 7:i=n.sent,console.log("swapCallStaticResult",i.toString()),a=o.swapInfo,s=!(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH),r={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(nt["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(nt["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),chain:t.netId,transaction:"",wallet_address:t.$store.state.currentAccount},c={},"bsc"!==t.$store.getters.netId&&"eth"!==t.$store.getters.netId||t.$f.setSwapSendType(t.swapMode||"fast"),o.swap().then((function(e){var n,o,i;return console.log("---confirm transaction---",e),t.swapInfo.transaction=e.hash,s&&(r.transaction=e.hash,c={time:parseInt(Date.now()/1e3),id:r.transaction,chain:t.fromToken.chain,transaction:e.hash,from_address:r.from_address,from_price_eth:0,from_price_usd:"",from_symbol:a.fromToken.symbol,from_amount:Number(nt["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:r.to_address,to_price_eth:0,to_price_usd:"",to_symbol:a.toToken.symbol,to_amount:Number(nt["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),is_merged:0},t.swapTxs.unshift(c)),t.loading=!1,t.loadingConfirmSwap=!1,t.fromTokenAmount="",t.toAmount="",null===(n=t.$refs)||void 0===n||null===(o=n.percentStep)||void 0===o||null===(i=o.handleClick)||void 0===i||i.call(o,0),t.dialogVisibleSwap=!1,e.wait()})).then((function(e){return console.log("----transaction---",e),1===e.status?(t.$notify({type:"success",message:t.$t("tradeSuccess")}),t.fromToken.address&&t.fromToken.chain&&t.getBalanceAndAllowance(),s&&(t.swapTxs.forEach((function(t){t.transaction===e.transactionHash&&(t.is_merged=1,t.time=parseInt(Date.now()/1e3))})),t.getUserAllTxs(c))):(t.$notify({type:"error",message:t.$t("tradeFail")}),s&&(t.swapTxs=t.swapTxs.filter((function(t){return t.transaction!==e.transactionHash})))),t.getGasBalance(),t.$f.setSwapSendType(""),e})).catch((function(e){t.$refs.countDown.reset(),t.loading=!1,t.loadingConfirmSwap=!1,s&&t.getUserAllTxs(),t.$f.handleError(e,"swap"),t.$f.setSwapSendType("")})),n.next=23;break;case 17:n.prev=17,n.t0=n["catch"](1),t.loading=!1,t.loadingConfirmSwap=!1,t.$f.handleError(n.t0,"swap"),t.$f.setSwapSendType("");case 23:case"end":return n.stop()}}),n,null,[[1,17]])})))()},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.$store.state.currentAccount;n&&(this.txsLoading=!0,Object(tt["O"])(this.$store.getters.netId,1,100).then((function(n){var o,i,a,s=Array.isArray(n)?n:[],r=t&&!(null!==s&&void 0!==s&&null!==(o=s.some)&&void 0!==o&&o.call(s,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;r&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),s.length>0&&(e.swapTxs=(null===s||void 0===s?void 0:s.map((function(e){return e.id?Object(Ee["a"])({},e):Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.transaction})})))||[]),!r||null!==(i=(a=e.swapTxs).some)&&void 0!==i&&i.call(a,(function(e){return e.transaction===t.transaction}))||e.swapTxs.unshift(t)})).finally((function(){e.txsLoading=!1})))},getFromToken:function(){var e=this,t=this.fromToken.address,n=this.fromToken.chain;if(t&&n){var o,i,a=t+"-"+n,s=null===(o=this.$store.state)||void 0===o||null===(i=o.chainConfig)||void 0===i?void 0:i[n],r=null===s||void 0===s?void 0:s.wmainWrapper,c=null===s||void 0===s?void 0:s.mainName;t===Xe["k"]&&n&&r&&(a=r+"-"+n),Object(tt["D"])(a).then(function(){var n=Object(Ve["a"])(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.fromTokenInfo=Object(Ee["a"])(Object(Ee["a"])({},o),t===Xe["k"]?{token:Object(Ee["a"])(Object(Ee["a"])({},o.token),{},{token:t,symbol:c,logoURI:e.$f.formatIcon(a)})}:{}),n.abrupt("return",o);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},getSwapTokenList:function(e){var t,n,o=this,i=this.fromToken.chain||this.$store.getters.netId;if(i){var a=Object(tt["l"])(i,2)||i;a&&(null===(t=this.tokens)||void 0===t||null===(n=t[a])||void 0===n?void 0:n.length)>1||Object(tt["I"])(i).then((function(t){var n,i,s,r=(null===t||void 0===t?void 0:t.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[],c=(null===(n=o.tokens)||void 0===n||null===(i=n[a])||void 0===i||null===(s=i.slice)||void 0===s?void 0:s.call(i))||[],l=null===r||void 0===r?void 0:r.filter((function(e){return!(null!==c&&void 0!==c&&c.some((function(t){return t.address===e.address})))}));o.tokens[a]=[].concat(Object(Ae["a"])(c),Object(Ae["a"])(l)),null===e||void 0===e||e()}))}},getUserTokenList:function(){var e=this,t=this.fromToken.chain||this.$store.getters.netId;t&&Object(tt["Q"])(t).then((function(n){var o,i,a=(null===n||void 0===n||null===(o=n.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token,balance:e.value})})))||void 0===o||null===(i=o.filter)||void 0===i?void 0:i.call(o,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[];e.userBalanceTokens=null===a||void 0===a?void 0:a.filter((function(e){return!!Number(e.value)})),e.userBalanceTokens.length>0&&"tron"!==t&&"brc20"!==t&&/^0x[0-9a-zA-Z]{40}$/.test(e.$store.state.currentAccount)&&Object(tt["k"])(e.userBalanceTokens.map((function(e){return e.token||""})),t).then((function(t){var n,o,i;e.userBalanceTokens=null===(n=e.userBalanceTokens)||void 0===n||null===(o=n.map)||void 0===o||null===(i=o.call(n,(function(e,n){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{balance:nt["utils"].formatUnits(t[n],e.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.balance)}))}))}))}}};n("78f9"),n("a3f8");const Un=rt()(Fn,[["render",xe],["__scopeId","data-v-abb1bc6a"]]);var zn=Un,Mn=(n("1276"),n("965b")),qn=n.n(Mn),Hn=function(e){return Object(o["pushScopeId"])("data-v-273004b9"),e=e(),Object(o["popScopeId"])(),e},Gn={class:"swap-content"},Qn={key:0,class:"card-container"},Wn={class:"card-container_top flex justify-between items-center"},Jn={class:"tag-box"},Zn=Hn((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Yn={class:"s-text"},Kn={class:"flex justify-between items-center mt-40"},Xn={key:1,class:"card-container"},eo={class:"card-container_top flex justify-between items-center"},to=Hn((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),no={class:"s-text"},oo={class:"flex justify-between items-center mt-40"},io={class:"switch-container"},ao=Hn((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-switch"},null,-1)})),so=[ao],ro={key:2,class:"card-container"},co={class:"card-container_top flex justify-between items-center"},lo=Hn((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),uo={class:"s-text"},mo={class:"flex justify-between items-center mt-40"},ho={key:3,class:"card-container"},bo={class:"card-container_top flex justify-between items-center"},po={class:"tag-box"},fo=Hn((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),vo={class:"s-text"},go={class:"flex justify-between items-center mt-40"},ko={class:"card-container mt-6"},jo={class:"limit-price-label flex justify-between items-center"},Oo=Hn((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-shuaxin",style:{"font-size":"0.28rem","margin-right":"0.05rem"}},null,-1)})),wo={style:{"margin-right":"0.05rem"}},To={class:"flex justify-between items-center mt-10"},yo=["disabled"],No=Hn((function(){return Object(o["createElementVNode"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(o["createElementVNode"])("use",{"xlink:href":"#icon-jian"})],-1)})),So=[No],xo=["disabled"],Vo=Hn((function(){return Object(o["createElementVNode"])("svg",{class:"icon-svg","aria-hidden":"true"},[Object(o["createElementVNode"])("use",{"xlink:href":"#icon-jia"})],-1)})),Ao=[Vo],Eo={class:"swap-label"},Co={class:"swap-label_item-left"},$o={style:{display:"flex","align-items":"center"}},_o={style:{"margin-right":"0.1rem"}},Bo={class:"swap-label_item-left"},Do={style:{display:"flex","align-items":"center"}},Io={class:"section-bottom"},Lo={class:"title",style:{padding:"0.24rem 0.32rem"}},Ro={style:{"font-size":"0.28rem","font-weight":"normal",color:"#333",margin:"0"}},Po=Hn((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Fo={style:{"background-color":"#fff"}},Uo={class:"footer-container"},zo=Hn((function(){return Object(o["createElementVNode"])("img",{src:qn.a,alt:"",srcset:""},null,-1)}));function Mo(e,t,n,i,a,s){var r,c,l,d,u=Object(o["resolveComponent"])("van-count-down"),m=Object(o["resolveComponent"])("van-button"),h=Object(o["resolveComponent"])("SwapSelectToken"),b=Object(o["resolveComponent"])("van-field"),p=Object(o["resolveComponent"])("van-form"),f=Object(o["resolveComponent"])("SlippageButton"),v=Object(o["resolveComponent"])("van-checkbox"),g=Object(o["resolveComponent"])("van-loading"),k=Object(o["resolveComponent"])("LimitTxItem"),j=Object(o["resolveComponent"])("DynamicScrollerItem"),O=Object(o["resolveComponent"])("DynamicScroller"),w=Object(o["resolveComponent"])("van-empty"),T=Object(o["resolveComponent"])("confirm-limit");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("section",{class:"swap-container",style:Object(o["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(o["createVNode"])(u,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e3,format:"sss",onFinish:s.onCountDownFinish},{default:Object(o["withCtx"])((function(e){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(o["createElementVNode"])("div",Gn,[Object(o["createVNode"])(p,{class:"swap-form",onSubmit:s.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(o["withCtx"])((function(){var n,r,c,l,d,u,p,f,v,g,k,j,O,w,T,y;return[1===a.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Qn,[Object(o["createElementVNode"])("div",Wn,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("sell")),1),Object(o["createElementVNode"])("div",Jn,Object(o["toDisplayString"])(e.$t("targetToken")),1),Zn,Object(o["createElementVNode"])("div",Yn,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(n=a.limitToken1)||void 0===n?void 0:n.balance)||0)),1),Object(o["createVNode"])(m,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return s.handlePercentChange1(100)}),["stop"]))},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]})),_:1})]),Object(o["createElementVNode"])("div",Kn,[Object(o["createVNode"])(h,{tokens:s.swapTokens,token:a.limitToken1,"onUpdate:token":[t[1]||(t[1]=function(e){return a.limitToken1=e}),s.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(r=i.swapId)||void 0===r||null===(c=r.split)||void 0===c||null===(l=c.call(r,"-"))||void 0===l?void 0:l[1])||a.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(o["createVNode"])(b,{modelValue:a.limitAmount1,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return a.limitAmount1=e}),s.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[3]||(t[3]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(o["createCommentVNode"])("",!0),0===a.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Xn,[Object(o["createElementVNode"])("div",eo,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("sell")),1),to,Object(o["createElementVNode"])("div",no,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(d=a.limitToken2)||void 0===d?void 0:d.balance)||0)),1),Object(o["createVNode"])(m,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[4]||(t[4]=Object(o["withModifiers"])((function(e){return s.handlePercentChange1(100)}),["stop"]))},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]})),_:1})]),Object(o["createElementVNode"])("div",oo,[Object(o["createVNode"])(h,{tokens:s.swapTokens,token:a.limitToken2,"onUpdate:token":[t[5]||(t[5]=function(e){return a.limitToken2=e}),s.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(u=i.swapId)||void 0===u||null===(p=u.split)||void 0===p||null===(f=p.call(u,"-"))||void 0===f?void 0:f[1])||a.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(o["createVNode"])(b,{modelValue:a.limitAmount2,"onUpdate:modelValue":[t[6]||(t[6]=function(e){return a.limitAmount2=e}),s.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[7]||(t[7]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",io,[Object(o["createElementVNode"])("div",{class:"switch-box",onClick:t[8]||(t[8]=Object(o["withModifiers"])((function(){return s.switchToken&&s.switchToken.apply(s,arguments)}),["stop"]))},so)]),1===a.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ro,[Object(o["createElementVNode"])("div",co,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("buy")),1),lo,Object(o["createElementVNode"])("div",uo,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(v=a.limitToken2)||void 0===v?void 0:v.balance)||0)),1)]),Object(o["createElementVNode"])("div",mo,[Object(o["createVNode"])(h,{tokens:s.swapTokens,token:a.limitToken2,"onUpdate:token":[t[9]||(t[9]=function(e){return a.limitToken2=e}),s.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(g=i.swapId)||void 0===g||null===(k=g.split)||void 0===k||null===(j=k.call(g,"-"))||void 0===j?void 0:j[1])||a.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(o["createVNode"])(b,{modelValue:a.limitAmount2,"onUpdate:modelValue":[t[10]||(t[10]=function(e){return a.limitAmount2=e}),s.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[11]||(t[11]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(o["createCommentVNode"])("",!0),0===a.activeTab?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ho,[Object(o["createElementVNode"])("div",bo,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("buy")),1),Object(o["createElementVNode"])("div",po,Object(o["toDisplayString"])(e.$t("targetToken")),1),fo,Object(o["createElementVNode"])("div",vo,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(O=a.limitToken1)||void 0===O?void 0:O.balance)||0)),1)]),Object(o["createElementVNode"])("div",go,[Object(o["createVNode"])(h,{tokens:s.swapTokens,token:a.limitToken1,"onUpdate:token":[t[12]||(t[12]=function(e){return a.limitToken1=e}),s.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(w=i.swapId)||void 0===w||null===(T=w.split)||void 0===T||null===(y=T.call(w,"-"))||void 0===y?void 0:y[1])||a.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),Object(o["createVNode"])(b,{modelValue:a.limitAmount1,"onUpdate:modelValue":[t[13]||(t[13]=function(e){return a.limitAmount1=e}),s.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[14]||(t[14]=function(e){return s.handlePercentChange1(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("div",ko,[Object(o["createElementVNode"])("div",jo,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(o["toDisplayString"])(a.limitToken1.symbol||"")+")",1),Object(o["createElementVNode"])("div",{class:"clickable flex items-center",onClick:t[15]||(t[15]=Object(o["withModifiers"])((function(){return s.setLimitPrice&&s.setLimitPrice.apply(s,arguments)}),["stop"]))},[Oo,Object(o["createElementVNode"])("span",wo,Object(o["toDisplayString"])(e.$t("marketPrice")),1),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumber(a.baseToken.token.current_price_usd||0)),1)])]),Object(o["createElementVNode"])("div",To,[Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[16]||(t[16]=Object(o["withModifiers"])((function(){return s.minusLimitPrice&&s.minusLimitPrice.apply(s,arguments)}),["stop"])),disabled:!a.limitPrice},So,8,yo),Object(o["createVNode"])(b,{modelValue:a.limitPrice,"onUpdate:modelValue":[t[17]||(t[17]=function(e){return a.limitPrice=e}),s.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(o["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[18]||(t[18]=Object(o["withModifiers"])((function(){return s.addLimitPrice&&s.addLimitPrice.apply(s,arguments)}),["stop"])),disabled:!a.limitPrice},Ao,8,xo)])]),!s.isLimitApprove||a.loadingLimitAllowance?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:4,class:"submit-btn",block:"",color:s.limitButtonColor,"native-type":"submit","loading-text":a.loadingLimitAllowance?e.$t("checkingAllowance"):a.quoteLimitLoading?e.$t("quoting"):a.loadingLimitApprove?e.$t("approve"):"",loading:a.loadingLimitApprove||a.loadingLimit||a.loadingLimitAllowance,disabled:!s.checkLimitAmount()},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(s.checkLimitAmountMessage()||e.$t("approve")),1)]})),_:1},8,["color","loading-text","loading","disabled"])):(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:5,class:"submit-btn",block:"",loading:a.loadingLimit||a.limitQuoteLoading,"loading-text":a.limitQuoteLoading?e.$t("quoting"):a.loadingLimit?0===a.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:s.limitButtonColor,disabled:!s.checkLimitAmount()||!a.limitAmount1||!a.limitAmount2||a.loadingLimitAllowance,"native-type":"submit"},{default:Object(o["withCtx"])((function(){var t;return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(s.checkLimitAmountMessage()||(0===a.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=a.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]})),_:1},8,["loading","loading-text","color","disabled"]))]})),_:1},8,["onSubmit"])]),Object(o["createElementVNode"])("ul",Eo,[Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",Co,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[19]||(t[19]=Object(o["withModifiers"])((function(t){return s.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(o["createElementVNode"])("div",$o,[Object(o["createElementVNode"])("span",_o,Object(o["toDisplayString"])(a.limitSlippage)+"%",1),Object(o["createVNode"])(f,{slippage:a.limitSlippage,"onUpdate:slippage":t[20]||(t[20]=function(e){return a.limitSlippage=e}),icon:1,onOnSubmit:s.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])]),Object(o["createElementVNode"])("li",null,[Object(o["createElementVNode"])("div",Bo,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("limitExpiredTime")),1)]),Object(o["createElementVNode"])("div",Do,Object(o["toDisplayString"])(a.LimitExpiredDays)+" "+Object(o["toDisplayString"])(e.$t("days")),1)])]),Object(o["createElementVNode"])("div",Io,[Object(o["createElementVNode"])("div",Lo,[Object(o["createElementVNode"])("h3",Ro,Object(o["toDisplayString"])(e.$t("historyLimitOrder")),1),Po,Object(o["createVNode"])(v,{modelValue:a.isCurrentToken,"onUpdate:modelValue":t[21]||(t[21]=function(e){return a.isCurrentToken=e}),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1"}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("currentToken")),1)]})),_:1},8,["modelValue"]),a.loadingGetLimitOrder?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(o["openBlock"])(),Object(o["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[22]||(t[22]=Object(o["withModifiers"])((function(){return s.getLimitOrder&&s.getLimitOrder.apply(s,arguments)}),["stop"]))}))]),Object(o["createElementVNode"])("ul",Fo,[(null===(r=s.filterLimitOrders)||void 0===r?void 0:r.length)>0?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,items:s.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(o["withCtx"])((function(e){var t=e.item,n=e.index,i=e.active;return[Object(o["createVNode"])(j,{item:t,active:i,"data-index":n},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(k,{item:t,onRefresh:s.refreshLimit},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createVNode"])(w,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],s.filterLimitOrders&&0===s.filterLimitOrders.length]])])]),Object(o["createElementVNode"])("div",Uo,[Object(o["createElementVNode"])("div",{class:"section-audit",onClick:t[23]||(t[23]=Object(o["withModifiers"])((function(){return s.goAudit&&s.goAudit.apply(s,arguments)}),["stop"]))},[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("securityAudit"))+": ",1),zo])])],4),Object(o["createVNode"])(T,{visible:a.dialogVisibleLimit,"onUpdate:visible":t[24]||(t[24]=function(e){return a.dialogVisibleLimit=e}),limitInfo:a.limitInfo,onSubmit:s.submitLimitOrder,loading:a.loadingConfirmLimit,chain:e.$store.getters.netId||(null===(c=i.swapId)||void 0===c||null===(l=c.split)||void 0===l||null===(d=l.call(c,"-"))||void 0===d?void 0:d[1])||""},null,8,["visible","limitInfo","onSubmit","loading","chain"])],64)}var qo=n("3835"),Ho=(n("3ca3"),n("ddb0"),n("e9c4"),n("a15b"),n("85b6")),Go=n("57c9"),Qo=n("9587"),Wo=function(e){return Object(o["pushScopeId"])("data-v-54e6580a"),e=e(),Object(o["popScopeId"])(),e},Jo={class:"select-box"},Zo={key:0,class:"token-container"},Yo={class:"text-s"},Ko={class:"text-l"},Xo={key:1},ei=Wo((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),ti={class:"rules-content"},ni={class:"search-bar",action:"/"},oi={key:0,class:"pop-title"},ii={style:{background:"#fff"}},ai=["onClick"],si={class:"main"},ri={key:0,class:"risk-status high"},ci={key:0,class:"minor"},li=Wo((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),di={class:"right-label"},ui=Wo((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),mi={key:0,class:"minor"};function hi(e,t,i,a,s,r){var c,l,d=Object(o["resolveComponent"])("van-image"),u=Object(o["resolveComponent"])("van-search"),m=Object(o["resolveComponent"])("van-empty"),h=Object(o["resolveComponent"])("van-icon"),b=Object(o["resolveComponent"])("DynamicScrollerItem"),p=Object(o["resolveComponent"])("DynamicScroller"),f=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Jo,[Object(o["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[i.token.address||i.token.token?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Zo,[(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:i.token.logo_url||0,round:"",width:"0.5rem",height:"0.5rem","icon-size":"0.5rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:i.token.logo_url?e.$f.formatIcon({logo_url:i.token.logo_url}):e.$f.formatIcon((i.token.token||i.token.address)+"-"+i.chain),"error-icon":n("aecc")},null,8,["src","error-icon"])),Object(o["createElementVNode"])("div",Yo,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])((null===(c=i.token)||void 0===c?void 0:c.symbol)||""),1),Object(o["createElementVNode"])("span",Ko,Object(o["toDisplayString"])(r.getChainName(null===(l=i.token)||void 0===l?void 0:l.chain)||i.chain),1)])])):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Xo,Object(o["toDisplayString"])(e.$t("pleaseSelectToken")),1)),ei]),Object(o["createVNode"])(f,{show:s.show,"onUpdate:show":t[2]||(t[2]=function(e){return s.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ti,[Object(o["createElementVNode"])("form",ni,[Object(o["createVNode"])(u,{modelValue:s.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword=e}),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:r.onSearch,onCancel:r.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==s.keyword||i.isBalance?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",oi,Object(o["toDisplayString"])(e.$t("popularTokens")),1)),Object(o["createElementVNode"])("ul",ii,[Object(o["withDirectives"])(Object(o["createVNode"])(m,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[o["vShow"],s.searchTokens&&0===s.searchTokens.length&&!s.loading]]),Object(o["createVNode"])(p,{items:s.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(o["withCtx"])((function(t){var a=t.item,c=t.index,l=t.active;return[Object(o["createVNode"])(b,{item:a,active:l,"data-index":c},{default:Object(o["withCtx"])((function(){var t;return[Object(o["createElementVNode"])("li",{class:"token-item",onClick:Object(o["withModifiers"])((function(e){return r.handleSelectToken(a)}),["stop"])},[Object(o["createVNode"])(d,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:a.logo_url?e.$f.formatIcon({logo_url:a.logo_url}):s.errorIcon,"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",si,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.symbol),1),a.risk_score>60&&0===a.risk_level||a.risk_level<0?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",ri,Object(o["toDisplayString"])(e.$t("highRisk")),1)):Object(o["createCommentVNode"])("",!0)]),(null!==a&&void 0!==a&&null!==(t=a.tags)&&void 0!==t&&t.includes("tokens")||null===a||void 0===a||!a.tags)&&a.address!==s.nativeToken?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ci,Object(o["toDisplayString"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(o["createCommentVNode"])("",!0)]),li,Object(o["createElementVNode"])("div",di,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(a.value?e.$f.formatNumber2(a.value):""),1),ui,void 0!==a.price?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",mi,"$"+Object(o["toDisplayString"])(a.value?e.$f.formatNumber2(a.value*a.price):""),1)):Object(o["createCommentVNode"])("",!0)]),a.address===(i.token.address||i.token.token)?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,ai)]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])])]})),_:1},8,["show","title"])])}var bi=n("aecc"),pi=null,fi={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:function(){return{address:"",chain:"",symbol:"",isbaseToken:!1}}},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1}},emits:["update:token"],data:function(){return{errorIcon:bi,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:Xe["k"]}},computed:{searchResultTokens:function(){var e,t=this;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter((function(e){return t.hasNative||e.address!==Xe["k"]}))}},watch:{keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show:function(e){var t,n,o;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||null===(o=n.isRefreshEnable)||void 0===o||o.call(n,"bridge",!e)}},methods:{getChainName:function(e){var t,n=ot["a"].get("chainConfig",Xe["l"])||{};return(null===(t=n[e])||void 0===t?void 0:t.name)||e},onSearch:function(e){console.log(e),pi&&(clearTimeout(pi),pi=null),this.search()},onCancel:function(){this.keyword="",this.show=!1},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){var n=Object(Ee["a"])(Object(Ee["a"])({},e),{},{address:e.address||e.token,isbaseToken:this.token.isbaseToken});this.$emit("update:token",n),Object.keys(n).forEach((function(e){t.token[e]=n[e]})),this.show=!1}},tokenSearch:function(){var e=this;pi&&(clearTimeout(pi),pi=null),pi=setTimeout((function(){e.search()}),500)},search:function(){var e=this;if(""!==this.keyword){var t=new RegExp(this.keyword,"i"),n=this.tokens.filter((function(n){return(t.test(n.address)||t.test(n.symbol)||t.test(n.name))&&(e.hasNative||n.address!==Xe["k"])}));this.loading=!0,Object(tt["V"])(this.keyword,this.chain).then((function(t){var o,i,a,s=null===(o=t.filter)||void 0===o||null===(i=o.call(t,(function(t){return t.chain===e.chain&&!n.some((function(e){return e.token===t.token}))})))||void 0===i||null===(a=i.map)||void 0===a?void 0:a.call(i,(function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{address:e.token})}));e.searchTokens=[].concat(Object(Ae["a"])(n),Object(Ae["a"])(s))})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.tokens.filter((function(t){return e.hasNative||t.address!==Xe["k"]}))}}};n("7a12");const vi=rt()(fi,[["render",hi],["__scopeId","data-v-54e6580a"]]);var gi=vi,ki=n("ce94"),ji=n("cf1a"),Oi=n("3edc"),wi=n("f465"),Ti=null,yi=null,Ni=null,Si=null;Oi["a"].props.components.default=function(){return{OpenIndicator:{render:function(){return Object(o["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}}}};var xi="2",Vi={name:"BridgeLimit",components:{PercentStep:Ho["a"],TxItem:Go["a"],SwapSelectToken:gi,ConfirmSwap:Nn["a"],PriceChart:ji["a"],SlippageButton:Ce["a"],ConfirmLimit:ki["a"],LimitTxItem:Qo["a"],vSelect:Oi["a"]},setup:function(){var e,t,n,o,i,a,s=ot["a"].get("chainConfig",Xe["l"])||{},r=Object.values(s),c=(null===(e=window)||void 0===e||null===(t=e.ethereum)||void 0===t?void 0:t.chainId)&&(null===(n=r.find((function(e){return Number(e.chainId)===Number(window.ethereum.chainId)})))||void 0===n?void 0:n.netName)||Cn["a"].getters.netId,l=Xe["k"],d=l+"-"+c,u=Object(En["useStorage"])("bridge_limitId",d,localStorage),m=null===u||void 0===u||null===(o=u.value)||void 0===o||null===(i=o.split)||void 0===i||null===(a=i.call(o,"-"))||void 0===a?void 0:a[1];return m!==c&&(u.value=d),{swapId:u,swapToken:l,swapChain:c}},data:function(){var e,t,n,o;return{LimitExpiredDays:Xe["f"],nativeToken:Xe["k"],height:100,tokens:[],token1:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:0,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(e=window)||void 0===e||null===(t=e._tw_)||void 0===t||!t.appGetPlatform),gasPrice:"0",spender:"",isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o?void 0:o.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:this.swapToken||"",chain:this.swapChain||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"20",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:""}},computed:{typeTabs:function(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},netId:function(){return this.$store.getters.netId||""},tokenInfo:function(){var e,t;if("Bridge"!==this.$route.name)return{id:"",token:"",chain:""};var n=null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t?void 0:t.call(e,"-"),o=Object(qo["a"])(n,2),i=o[0],a=o[1];return{id:this.swapId,token:i,chain:a}},tabs:function(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isLimitApprove:function(){if(!this.limitAllowance)return!1;var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.decimals||0,n=0===this.activeTab?this.limitAmount2:this.limitAmount1;return nt["utils"].parseUnits(new An.a(n||0).toFixed(t),t).lte(this.limitAllowance)},minReceived:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},n=t[t.length-1];return new An.a(null===n||void 0===n?void 0:n.amount).times(100-Number(this.slippage)).div(Math.pow(10,((null===n||void 0===n?void 0:n.decimals)||0)+2)).toFixed((null===n||void 0===n?void 0:n.decimals)||0)},maxSold:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},n=t[0];return new An.a(null===n||void 0===n?void 0:n.amount).times(1+Number(this.slippage)/100).div(Math.pow(10,(null===n||void 0===n?void 0:n.decimals)||0)).toFixed((null===n||void 0===n?void 0:n.decimals)||0)},txs:function(){if(this.isCurrentToken){var e,t,n,o,i,a,s,r,c,l=null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[0],d=null===(o=this.swapId)||void 0===o||null===(i=o.split)||void 0===i||null===(a=i.call(o,"-"))||void 0===a?void 0:a[1],u=null===(s=this.$store.state)||void 0===s||null===(r=s.chainConfig)||void 0===r?void 0:r[d],m=null===u||void 0===u?void 0:u.wmainWrapper;return l=l===Xe["k"]?m:l,null===(c=this.initTxs)||void 0===c?void 0:c.filter((function(e){return e.from_address===l||e.to_address===l||(l===Xe["k"]||l===m)&&(e.from_address===Xe["k"]||e.from_address===m||e.to_address===Xe["k"]||e.to_address===m)}))}return this.initTxs},filterLimitOrders:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.limitOrders)||void 0===e?void 0:e.filter((function(e){return e.target_token===t}))}return this.limitOrders},taxStr:function(){var e,t,n,o,i,a,s,r=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_buy_tax)||0);return r>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(r,1),"%)"):0===this.activeTab&&(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1),"%)"):1===this.activeTab&&(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.sell_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(s=this.baseTokenExtra)||void 0===s?void 0:s.sell_tax,1),"%)"):""},priceImpactV:function(){if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";var e=this.swapQuoteInfo.routerPath,t=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[0]:null,n=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[e.length-1]:null;if(t&&n){var o=this.swapQuoteInfo.from_price,i=this.swapQuoteInfo.to_price,a=nt["utils"].formatUnits(t.amount,t.decimals),s=nt["utils"].formatUnits(n.amount,n.decimals);return new An.a(a).times(o).div(new An.a(s).times(i)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor:function(){var e,t,n,o;return this.$store.state.currentAccount&&window.ethereum?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(o=n.gt)&&void 0!==o&&o.call(n,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor:function(){return this.$store.state.currentAccount&&window.ethereum?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor:function(){var e,t,n,o,i,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(n=this.priceImpactV)&&void 0!==n&&null!==(o=n.gt)&&void 0!==o&&o.call(n,.1)?"#F7933F":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(a=i.gt)&&void 0!==a&&a.call(i,.05)?"#f8be46":""},swapTokens:function(){var e=Object(Ae["a"])(this.userBalanceTokens.slice());return this.tokens.slice().forEach((function(t){var n=e.find((function(e){return e.id===t.id}));n?n.logo_url=t.logo_url:e.push(t)})),e.length>0?e:this.tokens.slice()},isShow:function(){var e,t,n,o,i,a,s,r=this.$store.state.chainConfig||ot["a"].get("chainConfig"),c=this.$store.getters.netId||(null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[1])||"";return!(!r||!c)&&(null!==(o=null===(i=r[c])||void 0===i||null===(a=i.swaps)||void 0===a||null===(s=a.some)||void 0===s?void 0:s.call(a,(function(e){return e.router_address})))&&void 0!==o&&o)},fromToken:function(){return 1===this.activeTab?this.token1:this.token2},toToken:function(){return 1===this.activeTab?this.token2:this.token1},disabled1:function(){var e,t;if(!Number(this.limitPrice))return!0;var n=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 1===this.activeTab&&this.limitPrice<n},disabled2:function(){var e,t;if(!Number(this.limitPrice))return!0;var n=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 0===this.activeTab&&this.limitPrice>n}},watch:{swapId:function(e){e&&"Bridge"===this.$route.name&&(this.slippage=xi,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount":function(e){e&&"Bridge"===this.$route.name&&(this.slippage=xi,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore:function(){this.getLeftHeight()},"$store.state.ws.tx":function(e){var t=this;this.tx=e,Ti||(Ti=setTimeout((function(){var e,n=t.tx,o=t.$store.state.chainConfig||ot["a"].get("chainConfig"),i=t.baseToken.token.chain||"",a=null===o||void 0===o?void 0:o[i],s=null===a||void 0===a?void 0:a.wmainWrapper,r=null===(e=t.baseToken)||void 0===e?void 0:e.token.token;r===Xe["k"]&&i&&s&&(r=s);var c=t.baseToken.token.price_change,l=100*Number(t.baseToken.token.current_price_usd)/(100+Number(c));n.from_address===r?(t.baseToken.token.current_price_usd=n.from_price_usd,t.baseToken.token.price_change=100*(n.from_price_usd-l)/l):n.to_address===r&&(t.baseToken.token.current_price_usd=n.to_price_usd,t.baseToken.token.price_change=100*(n.to_price_usd-l)/l),n.from_address===t.limitToken1.address?t.limitToken1.price=n.from_price_usd:n.to_address===t.limitToken1.address&&(t.limitToken1.price=n.to_price_usd),n.to_address===t.limitToken2.address?t.limitToken2.price=n.to_price_usd:n.from_address===t.limitToken2.address&&(t.limitToken2.price=n.from_price_usd),t.dataY=t.dataY.map((function(e,n,o){return n===o.length-1?t.baseToken.token.current_price_usd:e}));var d=t.baseToken.pairs.findIndex((function(e){return e.pair===n.pair_address}));if(d>-1){var u=t.baseToken.pairs[d];n.from_address===u.token0_address?(n.from_reserve&&(t.baseToken.pairs[d].reserve0=n.from_reserve,t.baseToken.pairs[d].token0_price_usd=n.from_price_usd),n.to_reserve&&(t.baseToken.pairs[d].reserve1=n.to_reserve,t.baseToken.pairs[d].token1_price_usd=n.to_price_usd)):(n.to_reserve&&(t.baseToken.pairs[d].reserve0=n.to_reserve,t.baseToken.pairs[d].token0_price_usd=n.to_price_usd),n.from_reserve&&(t.baseToken.pairs[d].reserve1=n.from_reserve,t.baseToken.pairs[d].token1_price_usd=n.from_price_usd))}Ti=null}),1e3))}},methods:{init:function(){var e,t,n,o,i,a;this.getFeeInfo(),this.handleWalletAddress(!1);var s=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",r=null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[0],c=this.$store.getters.netId||(null===(o=this.swapId)||void 0===o||null===(i=o.split)||void 0===i||null===(a=i.call(o,"-"))||void 0===a?void 0:a[1])||"";r&&(r!==this.token1.address||s&&s.address!==r)?(this.token1={address:r||"",chain:c||"",balance:0,symbol:""},this.limitToken1=Object(Ee["a"])({},this.token1)):r||!s||c!==s.chain||this.token1.address||(this.limitToken1=Object(Ee["a"])({},this.swap_token1));var l=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";l&&c===l.chain&&!this.token2.address&&(this.token2=Object(Ee["a"])({},l),this.limitToken2=Object(Ee["a"])({},l)),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),this.supportChainLimit(),this.getLimitOrder(),this.getLimitAllowance()},formatUnits:nt["utils"].formatUnits,getFeeInfo:function(){var e=this;Object(tt["u"])().then((function(t){var n=e.$store.getters.netId;e.$store.state.feeInfo=e.$f.formatFee(t,n)}))},watchFromAmount:function(){if(!this.quoteLoading||this.isAmount){var e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())}},watchToAmount:function(){if(!this.quoteLoading||!this.isAmount){var e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))}},switchTab:function(e){this.activeTab=e,this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance()},switchToken:function(){1===this.activeTab?this.activeTab=0:this.activeTab=1,this.handlePercentChange1(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance()},handlePercentChange1:function(e,t){if(!t){var n=e/100,o=0===this.activeTab?this.limitToken2:this.limitToken1,i=o.balance||0;if(n){var a=o.decimals||18;if((null===o||void 0===o?void 0:o.address)===Xe["k"]){var s=o.chain,r=Xe["j"][s]||.01;i=new An.a(i).minus(r).times(n).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0]}else i=new An.a(i).times(n).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0];0===Number(i)&&(i="")}else i="";0===this.activeTab?this.limitAmount2!==i&&(this.limitAmount2=i<0?0:i,this.watchLimitAmount2()):this.limitAmount1!==i&&(this.limitAmount1=i<0?0:i,this.watchLimitAmount1())}},watchLimitAmount1:function(){var e=this;this.limitQuoteLoading||(yi&&(clearTimeout(yi),yi=null),yi=setTimeout((function(){var t=e.limitAmount1,n=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===n&&0!==Number(e.limitAmount2)?e.limitAmount2=0:n&&(e.limitAmount2="",e.watchLimitPrice())}),500))},watchLimitAmount2:function(){var e=this;this.limitQuoteLoading||(Ni&&(clearTimeout(Ni),Ni=null),Ni=setTimeout((function(){var t=e.limitAmount2,n=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===n&&0!==Number(e.limitAmount1)?e.limitAmount1=0:n&&(e.limitAmount1="",e.watchLimitPrice())}),500))},watchLimitPrice:function(){var e=this;this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(Si&&(clearTimeout(Si),Si=null),Si=setTimeout((function(){var t=0===e.activeTab?e.limitToken2:e.limitToken1,n=1===e.activeTab?e.limitToken2:e.limitToken1,o=nt["utils"].parseUnits((0===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",t.decimals).toString(),i=nt["utils"].parseUnits((1===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",n.decimals).toString(),a=t.address,s=n.address,r={from_token:a,to_token:s,amountIn:o,amountOut:i};e.limitQuoteLoading=!0,Object(tt["U"])(r).then((function(t){var o,i,a,s;if(1!==t.toWrapper&&2!==t.toWrapper){var r=null===t||void 0===t||null===(o=t.routerPath)||void 0===o||null===(i=o.find)||void 0===i?void 0:i.call(o,(function(t){return t.address===e.limitToken1.address})),c=null===t||void 0===t||null===(a=t.routerPath)||void 0===a||null===(s=a.find)||void 0===s?void 0:s.call(a,(function(t){return t.address===e.limitToken2.address}));if(e.limitToken1.price=r.price,e.limitToken2.price=c.price,new An.a((null===r||void 0===r?void 0:r.amount)||0).lte(0)||new An.a((null===c||void 0===c?void 0:c.amount)||0).lte(0))e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitOrderAmount"),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});else{e.limitPrice&&e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=new An.a(nt["utils"].formatUnits(r.amount,r.decimals)).times(r.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]:e.limitAmount2=new An.a(nt["utils"].formatUnits(c.amount,c.decimals)).times(e.limitPrice||0).div(r.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount1?e.limitAmount2=new An.a(nt["utils"].formatUnits(c.amount,c.decimals)).times(e.limitPrice||0).div(r.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount2&&(e.limitAmount1=new An.a(nt["utils"].formatUnits(r.amount,r.decimals)).times(r.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]);var l=new An.a(e.limitSlippage||0);l=new An.a(1).minus(l.div(100));var d=0===e.activeTab?e.limitAmount1:e.limitAmount2;e.limitMinReturn=new An.a(d||0).times(l).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n.decimals,"})?")))[0]}}else e.limitQuoteLoading=!1})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.limitQuoteLoading=!1}))}),500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")}))},minusLimitPrice:function(){this.limitPrice&&new An.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new An.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice:function(){this.limitPrice&&new An.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new An.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},getLeftHeight:function(){var e=this;this.$nextTick((function(){var t=Object(wi["o"])(e.$refs.swapLeft),n=t.height;e.height=n}))},handleWalletAddress:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?window.ethereum?(this.$store.state.importAddressVisible=!1,this.$store.commit("changeConnectVisible",!0)):this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):e&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage:function(){if(1===this.activeTab){var e,t;if(Number(this.slippage)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;var n=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.slippage=String(Number(n.toFixed(2)))}else{var o,i;if(Number(this.slippage)>Number(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)+1)return;var a=Math.max(Math.min(Number(null===(i=this.baseTokenExtra)||void 0===i?void 0:i.buy_tax)+1,49.99),.5);this.slippage=String(Number(a.toFixed(2)))}},getSwapTokenList:function(){var e,t,n,o=this,i=this.$store.getters.netId||(null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[1])||"bsc";Object(tt["I"])(i).then((function(e){if(o.tokens=(null===e||void 0===e?void 0:e.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[],(!o.token2.address||o.token1.address===o.token2.address)&&o.tokens.length>0){var t=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));t=t<0?0:t;var n,i=o.tokens[t];if(o.token1.address===i.address)i=0===t&&null!==(n=o.tokens[1])&&void 0!==n?n:o.tokens[0];o.token2=Object(Ee["a"])({},i)}if((!o.limitToken2.address||o.limitToken1.address===o.limitToken2.address)&&o.tokens.length>0){var a=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));a=a<0?0:a;var s,r=o.tokens[a];if(o.limitToken1.address===r.address)r=0===a&&null!==(s=o.tokens[1])&&void 0!==s?s:o.tokens[0];o.limitToken2=Object(Ee["a"])({},r)}o.getTokenDetails()}))},getUserTokenList:function(){var e,t,n,o=this,i=this.$store.getters.netId||(null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[1])||"bsc";Object(tt["Q"])(i).then((function(e){var t,n,a;o.userBalanceTokens=null===(t=(null===e||void 0===e||null===(n=e.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===n||null===(a=n.filter)||void 0===a?void 0:a.call(n,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===t?void 0:t.filter((function(e){return!!Number(e.value)})),o.userBalanceTokens.length>0&&"tron"!==i&&"brc20"!==i&&/^0x[0-9a-zA-Z]{40}$/.test(o.$store.state.currentAccount)&&Object(tt["k"])(o.userBalanceTokens.map((function(e){return e.token||""})),i).then((function(e){var t,n,i;o.userBalanceTokens=null===(t=o.userBalanceTokens)||void 0===t||null===(n=t.map)||void 0===n||null===(i=n.call(t,(function(t,n){return Object(Ee["a"])(Object(Ee["a"])({},t),{},{value:nt["utils"].formatUnits(e[n],t.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.value)}))}))}))},getTokenDetails:function(){var e=this;Promise.all([this.getToken2Info(),this.getToken1Info()]).then((function(){0===e.activeTab?e.allowance=e.token2.allowance||"0":e.allowance=e.token1.allowance||"0"}))},getToken2Info:function(){var e,t,n=this;return Object(tt["J"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Ve["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.token2=Object(Ee["a"])(Object(Ee["a"])({},n.token2),t),sessionStorage.swap_token2=JSON.stringify(n.token2),n.limitToken2=Object(Ee["a"])(Object(Ee["a"])({},n.limitToken2),t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getToken1Info:function(){var e,t,n=this;return Object(tt["J"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Ve["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.token1=Object(Ee["a"])(Object(Ee["a"])({},n.token1),t),sessionStorage.swap_token1=JSON.stringify(n.token1),n.limitToken1=Object(Ee["a"])(Object(Ee["a"])({},n.limitToken1),t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getBaseToken:function(){var e,t,n=this,o=this.swapId||"",i=null===(e=o.split("-"))||void 0===e?void 0:e[0],a=null===(t=o.split("-"))||void 0===t?void 0:t[1];if(this.token1.address&&(i=this.token1.address),this.token1.chain&&(a=this.token1.chain),i&&a){var s,r,c=i+"-"+a,l=null===(s=this.$store.state)||void 0===s||null===(r=s.chainConfig)||void 0===r?void 0:r[a],d=null===l||void 0===l?void 0:l.wmainWrapper,u=null===l||void 0===l?void 0:l.mainName;i===Xe["k"]&&a&&d&&(c=d+"-"+a);var m=Object(tt["D"])(c).then(function(){var e=Object(Ve["a"])(regeneratorRuntime.mark((function e(t){var o,a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.baseToken=Object(Ee["a"])(Object(Ee["a"])({},t),i===Xe["k"]?{token:Object(Ee["a"])(Object(Ee["a"])({},t.token),{},{token:i,symbol:u,logoURI:n.$f.formatIcon(c)})}:{}),a=null===t||void 0===t||null===(o=t.pairs)||void 0===o?void 0:o[0],s=null===a||void 0===a?void 0:a.pair,r=null===a||void 0===a?void 0:a.chain,s&&n.getKlineHistory(s+"-"+r),n.token1=Object(Ee["a"])(Object(Ee["a"])({},n.token1),{},{address:n.baseToken.token.token},n.baseToken.token),sessionStorage.swap_token1=JSON.stringify(n.token1),n.limitToken1=Object(Ee["a"])(Object(Ee["a"])({},n.limitToken1),{},{address:n.baseToken.token.token},n.baseToken.token),n.getLeftHeight(),n.limitPrice=n.baseToken.token.current_price_usd?n.$f.formatNumber(n.baseToken.token.current_price_usd):"",n.triggerPrice=n.baseToken.token.current_price_usd?n.$f.formatNumber(n.baseToken.token.current_price_usd):"",e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=Object(tt["K"])(o).then(function(){var e=Object(Ve["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.baseTokenExtra=Object(Ee["a"])(Object(Ee["a"])({},t),{},{buy_tax:Number(Number(t.buy_tax).toFixed(2)),sell_tax:Number(Number(t.sell_tax).toFixed(2))}),n.handleTaxSlippage(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([m,h]).finally((function(){n.$store.dispatch("initWs",c)}))}},handleSelectToken2:function(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage=xi,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1:function(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.slippage=xi,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.swapId=((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain},handleSelectLimitToken1:function(e){this.slippage=xi,this.limitAmount1="",this.limitAmount2="",this.handlePercentChange1(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1=Object(Ee["a"])({},e),this.swapId=((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,this.getToken1Info()},handleSelectLimitToken2:function(e){this.slippage=xi,this.limitAmount1="",this.limitAmount2="",this.handlePercentChange1(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2=Object(Ee["a"])({},e),this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance()},getAllowance:function(){var e=this;if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){var t=this.$f.getSwapContract(this.$store.getters.netId);this.loadingAllowance=!0,Object(tt["d"])(this.fromToken.address,t).then((function(t){e.allowance=t.toString()})).finally((function(){e.loadingAllowance=!1}))}},approve:function(){var e=this;return Object(Ve["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingApprove=!0,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(tt["g"])(e.fromToken.address).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getAllowance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingApprove=!1,e.$f.setSwapSendType("")}));case 3:case"end":return t.stop()}}),t)})))()},checkAmountMessage:function(){var e=this.fromToken.balance||0;return this.$store.state.currentAccount?this.$store.state.currentAccount&&!window.ethereum?this.$t("observeAddressNotSwap"):0===Number(e)||Number(e)<Number(this.fromAmount)||!this.$store.state.currentAccount?this.$t("insufficientBalance"):"0"===String(this.fromAmount)?this.$t("AmountCannotBeZero"):void 0:this.$t("pConnectWallet")},getKlineHistory:function(e){var t,n,o,i=this;Object(tt["A"])(e,"1",(null===(t=this.swapId)||void 0===t||null===(n=t.split)||void 0===n||null===(o=n.call(t,"-"))||void 0===o?void 0:o[1])||"").then((function(e){var t,n=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];i.dataX=n.map((function(e){return e.time})),i.dataY=n.map((function(e){return e.close}))}))},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this.$store.state.currentAccount;n&&(this.txsLoading=!0,Object(tt["O"])().then((function(n){var o,i,a,s,r=Array.isArray(n)?n:[],c=t&&!(null!==r&&void 0!==r&&null!==(o=r.some)&&void 0!==o&&o.call(r,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;c&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),r.length>0&&(e.initTxs=(null===r||void 0===r?void 0:r.map((function(e){return e.id?Object(Ee["a"])({},e):Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.transaction})})))||[]),!c||null!==(i=(a=e.initTxs).some)&&void 0!==i&&i.call(a,(function(e){return e.transaction===t.transaction}))||e.initTxs.unshift(t);var l=[],d={};null===r||void 0===r||null===(s=r.forEach)||void 0===s||s.call(r,(function(e){d[e.from_address]||(l.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),d[e.from_address]=!0),d[e.to_address]||(l.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),d[e.to_address]=!0)})),e.txsTokens=l,sessionStorage.txsTokens=JSON.stringify(l||[])})).finally((function(){e.txsLoading=!1})))},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},alertSupportChainTips:function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(t=window)&&void 0!==t&&null!==(n=t._tw_)&&void 0!==n&&n.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,n,o;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o||o.appSwitchChain())})):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain:function(){if("Bridge"===this.$route.name){var e,t,n,o,i,a,s,r,c,l,d,u,m,h=this.$store.getters.netId||(null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[1])||"",b=Object.keys(Xe["t"]),p=this.$store.state.chainConfig||ot["a"].get("chainConfig"),f=null===b||void 0===b||null===(o=b.map)||void 0===o||null===(i=o.call(b,(function(e){return p[e].name})))||void 0===i||null===(a=i.join)||void 0===a?void 0:a.call(i,", "),v=null===p||void 0===p||null===(s=p[h])||void 0===s?void 0:s.name;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:f}),!0),!1;if(null!==(r=this.$store.state.currentAccount)&&void 0!==r&&null!==(c=r.startsWith)&&void 0!==c&&c.call(r,"T"))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:"TRON",chains:f})),!1;if(h&&(null===b||void 0===b||null===(l=b.includes)||void 0===l||!l.call(b,h)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:v,chains:f}),!0),!1;if((null===(d=this.swapId)||void 0===d||null===(u=d.split)||void 0===u||null===(m=u.call(d,"-"))||void 0===m?void 0:m[1])!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},goAudit:function(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish:function(){this.token1.address!==this.token2.address&&(this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset:function(){this.$refs.countDown.reset()},appSwitchChain:function(e){var t,n,o,i;null!==(t=window)&&void 0!==t&&null!==(n=t._tw_)&&void 0!==n&&n.appSwitchChain&&(null===(o=window)||void 0===o||null===(i=o._tw_)||void 0===i||i.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var n,o,i,a,s,r=this.$store.state.chainConfig||ot["a"].get("chainConfig"),c=this.$store.getters.netId||(null===(n=this.swapId)||void 0===n||null===(o=n.split)||void 0===o||null===(i=o.call(n,"-"))||void 0===i?void 0:i[1])||"",l=null===r||void 0===r?void 0:r[c],d=null===l||void 0===l?void 0:l.wmainWrapper,u=null===(a=r[c])||void 0===a?void 0:a.swaps,m=null===(s=this.baseToken)||void 0===s?void 0:s.pairs,h=m.find((function(e){return u.some((function(t){return t.name===e.amm&&t.router_address}))}));if(h){var b,p,f=h.token0_address===d?Xe["k"]:h.token0_address,v=h.token1_address===d?Xe["k"]:h.token1_address,g=h.amm;null===(b=window)||void 0===b||null===(p=b._tw_)||void 0===p||p.openLp(f,v,g)}else{var k,j,O,w,T=this.tokenInfo.address||(null===(k=this.baseToken)||void 0===k||null===(j=k.token)||void 0===j?void 0:j.token)||"";T=T===d?Xe["k"]:T,null===(O=window)||void 0===O||null===(w=O._tw_)||void 0===w||w.openLp(T,"","")}}},checkLimitAmount:function(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.balance||0,n=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(n)||""===this.$store.state.wallet||"0"===String(n)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.balance||0,n=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?this.$store.state.currentAccount&&!window.ethereum?this.$t("observeAddressNotSwap"):Number(0===t||Number(t)<Number(n)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(n)?this.$t("AmountCannotBeZero"):"":this.$t("pConnectWallet")},getLimitAllowance:function(){var e=this,t=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===t.chain&&t.address){var n=t.chain||this.$store.getters.netId||"bsc",o=Xe["q"][n];this.loadingLimitAllowance=!0,Object(tt["d"])(t.address,o).then((function(t){e.limitAllowance=t.toString(),console.log("limitAllowance",e.limitAllowance)})).finally((function(){e.loadingLimitAllowance=!1}))}},getLimitOrder:function(){var e=this;if(this.$store.getters.netId){var t=this.limitToken1.chain||this.$store.getters.netId||"bsc";this.loadingGetLimitOrder=!0,Object(tt["B"])({chain:t}).then((function(t){e.limitOrders=t})).finally((function(){setTimeout((function(){e.loadingGetLimitOrder=!1}),800)}))}},refreshLimit:function(e){this.getLimitOrder(),e.from_token===Xe["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info())},approveLimit:function(){var e=this;return Object(Ve["a"])(regeneratorRuntime.mark((function t(){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.supportChainLimit()){t.next=2;break}return t.abrupt("return");case 2:e.loadingLimitApprove=!0,n=e.limitToken1.chain||e.$store.getters.netId||"bsc",o=Xe["q"][n],i=0===e.activeTab?e.limitToken2:e.limitToken1,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(tt["g"])(i.address,o).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getLimitAllowance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingLimitApprove=!1,e.$f.setSwapSendType("")}));case 8:case"end":return t.stop()}}),t)})))()},supportChainLimit:function(){if("Bridge"===this.$route.name){var e,t,n,o,i,a,s,r,c,l,d,u=this.$store.getters.netId||(null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[1])||"",m=Object.keys(Xe["q"]),h=this.$store.state.chainConfig||ot["a"].get("chainConfig"),b=m.map((function(e){return h[e].name})).join(", ");if(null!==(o=this.$store.state.currentAccount)&&void 0!==o&&null!==(i=o.startsWith)&&void 0!==i&&i.call(o,"T")||u&&(null===m||void 0===m||null===(a=m.includes)||void 0===a||!a.call(m,u)))return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:b}),position:"top"}),!1;if(console.log(this.$store.getters.netId,this.swapId),(null===(s=this.swapId)||void 0===s||null===(r=s.split)||void 0===r||null===(c=r.call(s,"-"))||void 0===c?void 0:c[1])!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(l=window)&&void 0!==l&&null!==(d=l._tw_)&&void 0!==d&&d.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,n,o;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o||o.appSwitchChain())})),!1}return!0},onLimitSubmit:function(){try{var e,t,n;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;var o=this.$store.getters.netId||(null===(e=this.swapId)||void 0===e||null===(t=e.split)||void 0===t||null===(n=t.call(e,"-"))||void 0===n?void 0:n[1])||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});this.isLimitApprove?this.openConfirmLimit():this.approveLimit()}catch(i){console.log(i)}},openConfirmLimit:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=0===this.activeTab?this.limitToken1:this.limitToken2,n=0===this.activeTab?this.limitAmount2:this.limitAmount1,o=0===this.activeTab?this.limitAmount1:this.limitAmount2,i=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals,a=new An.a(this.limitSlippage||0);a=new An.a(1).minus(a.div(100));var s=new An.a(Xe["r"][e.chain||this.$store.getters.netId]||0).times(5);s=s.gte(3)?s.gte(50)?new An.a(50):s:new An.a(3);var r=new An.a(n).times(e.price).gte(s.times(.999));r?(this.limitInfo={orderType:this.selected,fromToken:e,toToken:t,fromAmount:n,toAmount:o,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new An.a(o||0).times(a).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i,"})?")))[0]},console.log("limitInfo",this.limitInfo),this.dialogVisibleLimit=!0):this.$dialog.alert({title:this.$t("tips"),message:this.$t("minimumTransactionAmount",{n:s.toFixed()}),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitLimitOrder:function(){var e=this;if(this.supportChainLimit()){var t=new An.a(this.limitSlippage||0);t=new An.a(1).minus(t.div(100));var n=this.$store.state.currentAccount;console.log("maker",n);var o=0===this.activeTab?this.limitToken2:this.limitToken1,i=0===this.activeTab?this.limitToken1:this.limitToken2,a=0===this.activeTab?this.limitAmount2:this.limitAmount1,s=0===this.activeTab?this.limitAmount1:this.limitAmount2,r=o.address,c=nt["utils"].parseUnits(new An.a(a||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0],o.decimals).toString(),l=i.address,d=nt["utils"].parseUnits(new An.a(s||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0],i.decimals).toString(),u=nt["utils"].parseUnits(new An.a(s||0).times(t).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0],i.decimals).toString(),m=this.limitToken1.address,h=this.limitPrice;this.loadingConfirmLimit=!0;var b=this.selected,p=this.triggerPrice,f=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";Object(tt["X"])(n,r,c,l,u,d,m,h,b,p,f).then((function(t){console.log(t),e.$notify({type:"success",message:e.$t("submitOrdersSuccess")}),e.getLimitOrder(),e.limitAmount1="",e.limitAmount2="",r===Xe["k"]&&(r===e.limitToken1.address?e.getToken1Info():r===e.limitToken2.address&&e.getToken2Info())})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1}))}},onSubmitLimitSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"20")},minusTriggerPrice:function(){this.triggerPrice&&new An.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new An.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice:function(){this.limitPrice&&new An.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new An.a(this.triggerPrice).times(1.01).toFixed()))},setLimitPrice:function(){this.baseToken.token.current_price_usd&&(this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"")}}};n("a3d3");const Ai=rt()(Vi,[["render",Mo],["__scopeId","data-v-273004b9"]]);var Ei=Ai,Ci=function(e){return Object(o["pushScopeId"])("data-v-69cfeef4"),e=e(),Object(o["popScopeId"])(),e},$i={class:"section-container color-999 text-size-12"},_i={class:"form-container"},Bi={class:"flex items-center justify-between card mb-8 text-size-12"},Di={class:"card"},Ii={class:"flex items-center justify-between text-size-12"},Li={class:"flex items-center"},Ri={class:"mr-5"},Pi={class:"flex items-center justify-between mt-26"},Fi=Ci((function(){return Object(o["createElementVNode"])("span",{class:"flex-1"},null,-1)})),Ui={class:"icon-plus-container"},zi={class:"card mb-10"},Mi={class:"flex items-center justify-between text-size-12"},qi={class:"flex items-center"},Hi={class:"mr-5"},Gi={class:"flex items-center justify-between mt-26"},Qi=Ci((function(){return Object(o["createElementVNode"])("span",{class:"flex-1"},null,-1)})),Wi={class:"text-size-12 font-400 mb-20"},Ji={class:"flex items-center justify-between text-size-12"},Zi={class:"color-999"},Yi={class:"flex items-center"},Ki={class:"ml-5 color-333"},Xi={class:"flex items-center justify-between mt-5"},ea={class:"color-999"},ta={class:"color-333"},na={class:"flex items-center justify-between mt-5"},oa=Ci((function(){return Object(o["createElementVNode"])("span",{class:"color-999"},null,-1)})),ia={class:"color-333"},aa={class:"flex items-center justify-between mt-5"},sa={class:"color-999"},ra={class:"color-333"},ca={class:"flex items-center justify-between mt-5"},la=Ci((function(){return Object(o["createElementVNode"])("span",{class:"color-999"},null,-1)})),da={class:"color-333"},ua={class:"flex items-center justify-between mt-5"},ma={class:"color-999"},ha={class:"color-333"},ba={class:"flex items-center justify-between mt-5"},pa={class:"color-999"},fa={class:"color-333"},va={class:"flex items-center justify-between mt-5"},ga={class:"color-999"},ka={class:"color-333"},ja={class:"flex items-center justify-between mt-5"},Oa=Ci((function(){return Object(o["createElementVNode"])("span",{class:"color-999"},null,-1)})),wa={class:"color-333"},Ta={class:"flex items-center justify-between mt-5"},ya={class:"color-999"},Na={class:"color-333"},Sa={class:"flex items-center justify-between mt-5"},xa={class:"color-999"},Va={class:"color-333 flex items-center"},Aa={class:"flex justify-center mt-20 text-size-14"},Ea={class:"card-container txs-container"},Ca={class:"van-hairline--bottom"},$a={class:"color-333 text-size-14"},_a={class:"card flex items-center color-333 text-size-14 mt-10"},Ba=Ci((function(){return Object(o["createElementVNode"])("span",null,"/",-1)})),Da=Ci((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Ia={key:0},La={key:1},Ra={class:"flex items-center justify-between color-333 text-size-14 mt-14"},Pa={class:"flex items-center justify-between"},Fa={class:"ml-5 color-333 text-size-14"},Ua={class:"flex items-center justify-between color-333 text-size-14 mt-10"},za={class:"flex items-center justify-between"},Ma={class:"ml-5 color-333 text-size-14"},qa={class:"flex items-center justify-between mt-5 text-size-12 mt-14"},Ha={class:"color-999"},Ga={class:"flex items-center"},Qa={class:"ml-5 color-333"},Wa={class:"flex items-center justify-between mt-5 text-size-12"},Ja={class:"color-999"},Za={class:"color-333"},Ya={class:"flex items-center justify-between mt-5 text-size-12"},Ka=Ci((function(){return Object(o["createElementVNode"])("span",{class:"color-999"},null,-1)})),Xa={class:"color-333"},es={class:"flex items-center justify-between mt-5 text-size-12"},ts={class:"color-999"},ns={class:"color-333"},os={class:"flex items-center justify-between mt-5 text-size-12"},is=Ci((function(){return Object(o["createElementVNode"])("span",{class:"color-999"},null,-1)})),as={class:"color-333"},ss={class:"flex items-center justify-between mt-5 text-size-12"},rs={class:"color-999"},cs={class:"color-333"},ls={class:"flex items-center justify-between mt-5 text-size-12"},ds=Ci((function(){return Object(o["createElementVNode"])("span",{class:"color-999"},null,-1)})),us={class:"color-333"},ms={class:"flex items-center justify-between mt-5 text-size-12 mb-30"},hs={class:"color-999"},bs={class:"color-333 flex items-center"},ps={class:"pop-content text-center pt-50 pb-100"},fs={class:"icon-container"},vs={class:"text-size-14 font-400 color-333 text-center mt-15 mb-6"};function gs(e,t,i,a,s,r){var c,l,d,u,m,h,b,p,f=Object(o["resolveComponent"])("SelectSwap"),v=Object(o["resolveComponent"])("van-button"),g=Object(o["resolveComponent"])("van-field"),k=Object(o["resolveComponent"])("SelectToken"),j=Object(o["resolveComponent"])("van-icon"),O=Object(o["resolveComponent"])("van-image"),w=Object(o["resolveComponent"])("Slippage"),T=Object(o["resolveComponent"])("LPHistory"),y=Object(o["resolveComponent"])("van-form"),N=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])("section",$i,[Object(o["createElementVNode"])("div",_i,[Object(o["createElementVNode"])("div",Bi,[Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(e.$t("selectPool")),1),Object(o["createVNode"])(f,{swaps:s.swaps,swap:s.swap,"onUpdate:swap":[t[0]||(t[0]=function(e){return s.swap=e}),r.handleSelectSwap],chain:r.chain},null,8,["swaps","swap","chain","onUpdate:swap"])]),Object(o["createElementVNode"])("div",Di,[Object(o["createElementVNode"])("div",Ii,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("amount")),1),Object(o["createElementVNode"])("div",Li,[Object(o["createElementVNode"])("span",Ri,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2(s.token0.balance||s.token0.value||0)),1),Object(o["createVNode"])(v,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(o["withModifiers"])(r.handleMax0,["stop"])},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]})),_:1},8,["onClick"])])]),Object(o["createElementVNode"])("div",Pi,[Object(o["createVNode"])(g,{modelValue:s.amount0,"onUpdate:modelValue":[t[1]||(t[1]=function(e){return s.amount0=e}),r.watchAmount0],placeholder:"0.0",type:"number",clearable:"",class:"input-number",border:!1},null,8,["modelValue","onUpdate:modelValue"]),Fi,Object(o["createVNode"])(k,{isBalance:!0,tokens:r.userTokens,disabledToken:s.token1.address||"",token:s.token0,"onUpdate:token":[t[2]||(t[2]=function(e){return s.token0=e}),r.handleSelectToken0],chain:r.chain},null,8,["tokens","disabledToken","token","chain","onUpdate:token"])])]),Object(o["createElementVNode"])("div",Ui,[Object(o["createVNode"])(j,{class:"icon-plus color-primary p-8 rd-50 bg-F6F6F6",name:"plus"})]),Object(o["createElementVNode"])("div",zi,[Object(o["createElementVNode"])("div",Mi,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$t("amount")),1),Object(o["createElementVNode"])("div",qi,[Object(o["createElementVNode"])("span",Hi,Object(o["toDisplayString"])(e.$t("balance"))+": "+Object(o["toDisplayString"])(e.$f.formatNumber2(s.token1.balance||s.token1.value||0)),1),Object(o["createVNode"])(v,{plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:Object(o["withModifiers"])(r.handleMax1,["stop"])},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("max")),1)]})),_:1},8,["onClick"])])]),Object(o["createElementVNode"])("div",Gi,[Object(o["createVNode"])(g,{modelValue:s.amount1,"onUpdate:modelValue":[t[3]||(t[3]=function(e){return s.amount1=e}),r.watchAmount1],placeholder:"0.0",type:"number",border:!1,clearable:"",class:"input-number"},null,8,["modelValue","onUpdate:modelValue"]),Qi,Object(o["createVNode"])(k,{isBalance:!0,tokens:r.userTokens,disabledToken:s.token0.address||"",token:s.token1,"onUpdate:token":[t[4]||(t[4]=function(e){return s.token1=e}),r.handleSelectToken1],chain:r.chain},null,8,["tokens","disabledToken","token","chain","onUpdate:token"])])]),Object(o["createElementVNode"])("ul",Wi,[Object(o["createElementVNode"])("li",Ji,[Object(o["createElementVNode"])("span",Zi,Object(o["toDisplayString"])(e.$t("currentPool")),1),Object(o["createElementVNode"])("div",Yi,[s.swap.name?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,class:"w-16 h-16",round:"","lazy-load":"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(s.swap.name,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",Ki,Object(o["toDisplayString"])(s.swap.show_name||""),1)])]),s.reserves.pair===s.ZERO_ADDRESS?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("li",Xi,[Object(o["createElementVNode"])("span",ea,Object(o["toDisplayString"])(e.$t("rate")),1),Object(o["createElementVNode"])("span",ta,"1 "+Object(o["toDisplayString"])(s.token1.symbol||"")+" = "+Object(o["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount0||0)/Number(s.amount1)):0)+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("li",na,[oa,Object(o["createElementVNode"])("span",ia,"1 "+Object(o["toDisplayString"])(s.token0.symbol||"")+" = "+Object(o["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount1||0)/Number(s.amount0)):0)+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)]),null!==(c=s.token0)&&void 0!==c&&c.current_price_usd&&null!==(l=s.token1)&&void 0!==l&&l.current_price_usd?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("li",aa,[Object(o["createElementVNode"])("span",sa,Object(o["toDisplayString"])(e.$t("referenceRate1")),1),Object(o["createElementVNode"])("span",ra,"1 "+Object(o["toDisplayString"])(s.token1.symbol||"")+" = "+Object(o["toDisplayString"])(e.$f.formatNumber2(Number(null===(d=s.token1)||void 0===d?void 0:d.current_price_usd)/Number(null===(u=s.token0)||void 0===u?void 0:u.current_price_usd)))+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("li",ca,[la,Object(o["createElementVNode"])("span",da,"1 "+Object(o["toDisplayString"])(s.token0.symbol||"")+" = "+Object(o["toDisplayString"])(e.$f.formatNumber2(Number(null===(m=s.token0)||void 0===m?void 0:m.current_price_usd)/Number(null===(h=s.token1)||void 0===h?void 0:h.current_price_usd)))+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)]),Object(o["createElementVNode"])("li",ua,[Object(o["createElementVNode"])("span",ma,Object(o["toDisplayString"])(s.token0.symbol||"")+" "+Object(o["toDisplayString"])(e.$t("referencePrice")),1),Object(o["createElementVNode"])("span",ha,"$"+Object(o["toDisplayString"])(e.$f.formatNumber2((null===(b=s.token0)||void 0===b?void 0:b.current_price_usd)||0)),1)]),Object(o["createElementVNode"])("li",ba,[Object(o["createElementVNode"])("span",pa,Object(o["toDisplayString"])(s.token1.symbol||"")+" "+Object(o["toDisplayString"])(e.$t("referencePrice")),1),Object(o["createElementVNode"])("span",fa,"$"+Object(o["toDisplayString"])(e.$f.formatNumber2(null===(p=s.token1)||void 0===p?void 0:p.current_price_usd)),1)])],64)):Object(o["createCommentVNode"])("",!0)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("li",va,[Object(o["createElementVNode"])("span",ga,Object(o["toDisplayString"])(e.$t("rate")),1),Object(o["createElementVNode"])("span",ka,"1 "+Object(o["toDisplayString"])(s.token1.symbol||"")+" = "+Object(o["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve0)/Number(s.reserves.reserve1)):"")+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("li",ja,[Oa,Object(o["createElementVNode"])("span",wa,"1 "+Object(o["toDisplayString"])(s.token0.symbol||"")+" = "+Object(o["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve1)/Number(s.reserves.reserve0)):"")+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)])],64)),Object(o["createElementVNode"])("li",Ta,[Object(o["createElementVNode"])("span",ya,Object(o["toDisplayString"])(e.$t("shareRatio")),1),Object(o["createElementVNode"])("span",Na,Object(o["toDisplayString"])(s.reserves.reserve0&&s.amount0?e.$f.formatNumber2(Math.min(100*Number(s.amount0)/Number(s.utils.formatUnits(s.reserves.reserve0,s.token0.decimals)),100)):0)+"%",1)]),Object(o["createElementVNode"])("li",Sa,[Object(o["createElementVNode"])("span",xa,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("div",Va,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(s.slippage)+"%",1),Object(o["createVNode"])(w,{slippage:s.slippage,"onUpdate:slippage":t[5]||(t[5]=function(e){return s.slippage=e})},null,8,["slippage"])])])]),Object(o["createElementVNode"])("div",null,[!r.isApprove0&&r.error<=0?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:0,type:"primary",color:"#743FF7",block:"",loading:s.loading0,"loading-text":e.$t("approve"),disabled:""===r.walletAddress||""===s.token0.address||void 0===s.token0.address,class:"mb-10 br-6",onClick:Object(o["withModifiers"])(r._approve0,["stop"])},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("approve"))+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]})),_:1},8,["loading","loading-text","disabled","onClick"])):Object(o["createCommentVNode"])("",!0),!r.isApprove1&&r.error<=0?(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:1,type:"primary",color:"#743FF7",block:"",loading:s.loading1,"loading-text":e.$t("approve"),disabled:""===r.walletAddress||""===s.token1.address||void 0===s.token1.address,class:"mb-10 br-6",onClick:Object(o["withModifiers"])(r._approve1,["stop"])},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.$t("approve"))+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)]})),_:1},8,["loading","loading-text","disabled","onClick"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(v,{color:r.error>2?"#999":"#3F80F7",block:"",class:"br-6",loading:s.loadingSubmit,"loading-text":e.$t("add"),disabled:r.disabled,onClick:t[6]||(t[6]=Object(o["withModifiers"])((function(e){return s.confirmSubmitVisible=!0}),["stop"]))},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(r.errorMessage),1)]})),_:1},8,["color","loading","loading-text","disabled"]),Object(o["createElementVNode"])("div",Aa,[Object(o["createElementVNode"])("button",{class:"border-none clickable color-3f80f7",onClick:t[7]||(t[7]=Object(o["withModifiers"])((function(){return r.goMyLiquidity&&r.goMyLiquidity.apply(r,arguments)}),["stop"]))},Object(o["toDisplayString"])(e.$t("myLiquidity")),1)])])]),Object(o["createElementVNode"])("div",Ea,[Object(o["createElementVNode"])("h3",Ca,Object(o["toDisplayString"])(e.$t("lpHistory")),1),Object(o["createVNode"])(T,{tableList:s.historyList,loading:s.loadingHistory},null,8,["tableList","loading"])]),Object(o["createVNode"])(N,{show:s.confirmSubmitVisible,"onUpdate:show":t[8]||(t[8]=function(e){return s.confirmSubmitVisible=e}),title:s.reserves.pair===s.ZERO_ADDRESS?e.$t("createLiquidityConfirm"):e.$t("addLiquidityConfirm")},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(y,{onSubmit:r._addLiquidity,class:"pop-content"},{default:Object(o["withCtx"])((function(){var t,i,a,c,l,d,u,m,h,b;return[Object(o["createElementVNode"])("div",$a,Object(o["toDisplayString"])(e.$t("youWillReceive")),1),Object(o["createElementVNode"])("div",_a,[Object(o["createVNode"])(O,{class:"w-20 h-20",round:"","lazy-load":"",src:e.$f.formatIcon("".concat(s.token0.address,"-").concat((null===(t=s.token0)||void 0===t?void 0:t.chain)||r.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createVNode"])(O,{class:"w-20 h-20 ml-4 mr-6",round:"","lazy-load":"",src:e.$f.formatIcon("".concat(s.token1.address,"-").concat((null===(i=s.token1)||void 0===i?void 0:i.chain)||r.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(s.token0.symbol),1),Ba,Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(s.token1.symbol),1),Da,"-"!==r.lpAmount?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ia,"+ "+Object(o["toDisplayString"])(e.$f.formatNumber2(r.lpAmount)),1)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",La))]),Object(o["createElementVNode"])("div",Ra,[Object(o["createElementVNode"])("div",Pa,[Object(o["createVNode"])(O,{class:"w-20 h-20",round:"","lazy-load":"",src:e.$f.formatIcon("".concat(s.token0.address,"-").concat((null===(a=s.token0)||void 0===a?void 0:a.chain)||r.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",Fa,Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("div",null,"- "+Object(o["toDisplayString"])(e.$f.formatNumber2(s.amount0)),1)]),Object(o["createElementVNode"])("div",Ua,[Object(o["createElementVNode"])("div",za,[Object(o["createVNode"])(O,{class:"w-20 h-20",round:"","lazy-load":"",src:e.$f.formatIcon("".concat(s.token1.address,"-").concat((null===(c=s.token1)||void 0===c?void 0:c.chain)||r.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",Ma,Object(o["toDisplayString"])(s.token1.symbol||""),1)]),Object(o["createElementVNode"])("div",null,"- "+Object(o["toDisplayString"])(e.$f.formatNumber2(s.amount1)),1)]),Object(o["createElementVNode"])("div",qa,[Object(o["createElementVNode"])("span",Ha,Object(o["toDisplayString"])(e.$t("currentPool")),1),Object(o["createElementVNode"])("div",Ga,[s.swap.name?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,class:"w-16 h-16",round:"","lazy-load":"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(s.swap.name,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("span",Qa,Object(o["toDisplayString"])(s.swap.show_name||""),1)])]),s.reserves.pair===s.ZERO_ADDRESS&&null!==(l=s.token0)&&void 0!==l&&l.current_price_usd&&null!==(d=s.token1)&&void 0!==d&&d.current_price_usd?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("li",Wa,[Object(o["createElementVNode"])("span",Ja,Object(o["toDisplayString"])(e.$t("rate")),1),Object(o["createElementVNode"])("span",Za,"1 "+Object(o["toDisplayString"])(s.token1.symbol||"")+" = "+Object(o["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount0||0)/Number(s.amount1)):0)+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("li",Ya,[Ka,Object(o["createElementVNode"])("span",Xa,"1 "+Object(o["toDisplayString"])(s.token0.symbol||"")+" = "+Object(o["toDisplayString"])(s.amount0&&s.amount1?e.$f.formatNumber2(Number(s.amount1||0)/Number(s.amount0)):0)+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)]),Object(o["createElementVNode"])("li",es,[Object(o["createElementVNode"])("span",ts,Object(o["toDisplayString"])(e.$t("referenceRate1")),1),Object(o["createElementVNode"])("span",ns,"1 "+Object(o["toDisplayString"])(s.token1.symbol||"")+" = "+Object(o["toDisplayString"])(e.$f.formatNumber2(Number(null===(u=s.token1)||void 0===u?void 0:u.current_price_usd)/Number(null===(m=s.token0)||void 0===m?void 0:m.current_price_usd)))+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("li",os,[is,Object(o["createElementVNode"])("span",as,"1 "+Object(o["toDisplayString"])(s.token0.symbol||"")+" = "+Object(o["toDisplayString"])(e.$f.formatNumber2(Number(null===(h=s.token0)||void 0===h?void 0:h.current_price_usd)/Number(null===(b=s.token1)||void 0===b?void 0:b.current_price_usd)))+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)])],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:1},[Object(o["createElementVNode"])("li",ss,[Object(o["createElementVNode"])("span",rs,Object(o["toDisplayString"])(e.$t("rate")),1),Object(o["createElementVNode"])("span",cs,"1 "+Object(o["toDisplayString"])(s.token1.symbol||"")+" = "+Object(o["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve0)/Number(s.reserves.reserve1)):"")+" "+Object(o["toDisplayString"])(s.token0.symbol||""),1)]),Object(o["createElementVNode"])("li",ls,[ds,Object(o["createElementVNode"])("span",us,"1 "+Object(o["toDisplayString"])(s.token0.symbol||"")+" = "+Object(o["toDisplayString"])(s.reserves.reserve0&&s.reserves.reserve1?e.$f.formatNumber2(Number(s.reserves.reserve1)/Number(s.reserves.reserve0)):"")+" "+Object(o["toDisplayString"])(s.token1.symbol||""),1)])],64)),Object(o["createElementVNode"])("div",ms,[Object(o["createElementVNode"])("span",hs,Object(o["toDisplayString"])(e.$t("slippage")),1),Object(o["createElementVNode"])("div",bs,Object(o["toDisplayString"])(s.slippage)+"%",1)]),Object(o["createVNode"])(v,{color:"#3F80F7",block:"",class:"br-6",loading:s.loadingSubmit,"loading-text":s.reserves.pair===s.ZERO_ADDRESS?e.$t("confirmCreate"):e.$t("confirmAdd"),disabled:r.disabled,"native-type":"submit"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(s.reserves.pair===s.ZERO_ADDRESS?e.$t("confirmCreate"):e.$t("confirmAdd")),1)]})),_:1},8,["loading","loading-text","disabled"])]})),_:1},8,["onSubmit"])]})),_:1},8,["show","title"]),Object(o["createVNode"])(N,{show:s.confirmTxVisible,"onUpdate:show":t[10]||(t[10]=function(e){return s.confirmTxVisible=e}),title:e.$t("createLiquidityConfirm")},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ps,[Object(o["createElementVNode"])("div",fs,[Object(o["createVNode"])(j,{class:"icon-s",name:"success",size:"0.64rem",color:"#3F80F7"})]),Object(o["createElementVNode"])("div",vs,Object(o["toDisplayString"])(e.$t("transactionSubmitted")),1),Object(o["createElementVNode"])("a",{class:"text-size-12 font-400 color-3f80f7 clickable",href:"javascript:;",onClick:t[9]||(t[9]=function(t){var n,o;return e.openBrowser(s.transaction,"tx",(null===(n=s.token0)||void 0===n?void 0:n.chain)||(null===(o=s.token1)||void 0===o?void 0:o.chain)||r.chain)}),rel:"noopener noreferrer"},Object(o["toDisplayString"])(e.$t("viewBlockExplorerTransactionHistory")),1)])]})),_:1},8,["show","title"])])}n("5319");var ks=n("7f08"),js=n("47e2"),Os=function(e){return Object(o["pushScopeId"])("data-v-ceebfb90"),e=e(),Object(o["popScopeId"])(),e},ws={class:"ml-5 color-333 text-size-14"},Ts={key:1,class:"ml-5 color-333 text-size-14"},ys=Os((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-collapse-down ml-5 color-999"},null,-1)})),Ns={class:"rules-content"},Ss={class:"search-bar",action:"/"},xs={key:0,class:"pop-title"},Vs={style:{background:"#fff"},class:"pb-50"},As=["onClick"],Es={class:"main"},Cs={key:0,class:"risk-status high"},$s={key:0,class:"minor"},_s=Os((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Bs={class:"right-label"},Ds=Os((function(){return Object(o["createElementVNode"])("br",null,null,-1)})),Is={key:0,class:"minor"},Ls={props:{tokens:Array,token:Object,chain:String,isBalance:Boolean,disabledToken:String},emits:["update:token"],setup:function(e,t){var i=t.emit,a=e,s=Object(js["b"])(),r=s.t,c=Object(o["ref"])(!1),l=Object(o["ref"])(""),d=Object(o["ref"])(a.tokens||[]),u=Object(o["ref"])(!1);Object(o["watch"])(l,(function(e){""!==e?h():d.value=a.tokens})),Object(o["watch"])(c,(function(e){var t,n,o;e&&(d.value=a.tokens||[]),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||null===(o=n.isRefreshEnable)||void 0===o||o.call(n,"bridge",!e)}));var m=null;function h(){m&&(clearTimeout(m),m=null),m=setTimeout((function(){b()}),500)}function b(){if(""!==l.value){var e,t=new RegExp(l.value,"i"),n=(null===(e=a.tokens)||void 0===e?void 0:e.filter((function(e){return t.test((null===e||void 0===e?void 0:e.address)||"")||t.test((null===e||void 0===e?void 0:e.symbol)||"")||t.test((null===e||void 0===e?void 0:e.name)||"")})))||[];(null===n||void 0===n?void 0:n.length)>0?d.value=n:(u.value=!0,Object(tt["V"])(l.value,a.chain).then((function(e){var t,n,o;d.value=null===(t=e.filter)||void 0===t||null===(n=t.call(e,(function(e){return e.chain===a.chain})))||void 0===n||null===(o=n.map)||void 0===o?void 0:o.call(n,(function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{address:e.token})}))})).catch((function(e){console.log(e),d.value=[]})).finally((function(){u.value=!1})))}else d.value=a.tokens}function p(e){console.log(e),m&&(clearTimeout(m),m=null),b()}function f(){l.value="",c.value=!1}function v(e){e.address!==a.disabledToken&&(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token)&&(i("update:token",e),c.value=!1)}return function(t,i){var s,m,h,b,g=Object(o["resolveComponent"])("van-image"),k=Object(o["resolveComponent"])("van-search"),j=Object(o["resolveComponent"])("van-empty"),O=Object(o["resolveComponent"])("van-icon"),w=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("button",{class:"flex items-center active-opacity-50",onClick:i[0]||(i[0]=Object(o["withModifiers"])((function(e){return Object(o["isRef"])(c)?c.value=!0:c=!0}),["stop"]))},[null!==a&&void 0!==a&&null!==(s=a.token)&&void 0!==s&&s.address?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(g,{class:"w-16 h-16",round:"","lazy-load":"",src:Object(o["unref"])(ks["formatIcon"])("".concat(null===(m=a.token)||void 0===m?void 0:m.address,"-").concat((null===(h=a.token)||void 0===h?void 0:h.chain)||e.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",ws,Object(o["toDisplayString"])((null===(b=a.token)||void 0===b?void 0:b.symbol)||""),1)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Ts,Object(o["toDisplayString"])(Object(o["unref"])(r)("plsSelectToken")),1)),ys]),Object(o["createVNode"])(w,{show:Object(o["unref"])(c),"onUpdate:show":i[2]||(i[2]=function(e){return Object(o["isRef"])(c)?c.value=e:c=e}),title:Object(o["unref"])(r)("selectToken"),style:{height:"80%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",Ns,[Object(o["createElementVNode"])("form",Ss,[Object(o["createVNode"])(k,{modelValue:Object(o["unref"])(l),"onUpdate:modelValue":i[1]||(i[1]=function(e){return Object(o["isRef"])(l)?l.value=e:l=e}),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:Object(o["unref"])(r)("searchTokenContractName"),onSearch:p,onCancel:f},null,8,["modelValue","placeholder"])]),""!==Object(o["unref"])(l)||e.isBalance?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",xs,Object(o["toDisplayString"])(Object(o["unref"])(r)("popularTokens")),1)),Object(o["createElementVNode"])("ul",Vs,[Object(o["withDirectives"])(Object(o["createVNode"])(j,{description:Object(o["unref"])(r)("noData"),class:"empty"},null,8,["description"]),[[o["vShow"],Object(o["unref"])(d)&&0===Object(o["unref"])(d).length&&!Object(o["unref"])(u)]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(d),(function(i,s){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:Object(o["normalizeClass"])(["token-item",{disabled:i.address===e.disabledToken}]),key:s,onClick:Object(o["withModifiers"])((function(e){return v(i)}),["stop"])},[Object(o["createVNode"])(g,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:i.address===Object(o["unref"])(Xe["k"])?i.logo_url||i.logoURI:i.logoURI||Object(o["unref"])(ks["formatIcon"])("".concat(i.address,"-").concat(i.chain||e.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("div",Es,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.symbol),1),Number(null===i||void 0===i?void 0:i.risk_score)>60?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Cs,Object(o["toDisplayString"])(Object(o["unref"])(r)("highRisk")),1)):Object(o["createCommentVNode"])("",!0)]),i.address&&i.address!==Object(o["unref"])(Xe["k"])?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",$s,Object(o["toDisplayString"])(i.address.slice(0,6)+"..."+i.address.slice(-6)),1)):Object(o["createCommentVNode"])("",!0)]),_s,Object(o["createElementVNode"])("div",Bs,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(i.value?Object(o["unref"])(ks["formatNumber2"])(i.value):""),1),Ds,Number(null===i||void 0===i?void 0:i.value)>0&&i.current_price_usd?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",Is,Object(o["toDisplayString"])(i.value?t.$f.formatNumberCurrencyUnit(Number(i.value)*Number(i.current_price_usd)):""),1)):Object(o["createCommentVNode"])("",!0)]),i.address===(a.token.address||a.token.token)?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:0,size:"0.48rem",color:"#3F80F7",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:1,style:{opacity:"0"},size:"0.48rem",color:"#3F80F7",name:"success"}))],10,As)})),128))])])]})),_:1},8,["show","title"])],64)}}};n("1fd1");const Rs=rt()(Ls,[["__scopeId","data-v-ceebfb90"]]);var Ps=Rs,Fs=function(e){return Object(o["pushScopeId"])("data-v-396fdb40"),e=e(),Object(o["popScopeId"])(),e},Us={class:"ml-5 color-333 text-size-14"},zs={key:1,class:"ml-5 color-333 text-size-14"},Ms=Fs((function(){return Object(o["createElementVNode"])("i",{class:"iconfont icon-collapse-down ml-5 color-999"},null,-1)})),qs={class:"rules-content"},Hs={class:"search-bar",action:"/"},Gs={style:{background:"#fff"},class:"pb-50"},Qs=["onClick"],Ws={class:"right-label"},Js=Fs((function(){return Object(o["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Zs={props:{swaps:Array,chain:String,swap:Object},emits:["update:swap"],setup:function(e,t){var i=t.emit,a=e,s=Object(js["b"])(),r=s.t,c=Object(o["ref"])(!1),l=Object(o["ref"])(""),d=Object(o["ref"])(a.swaps||[]),u=Object(o["ref"])(!1);Object(o["watch"])(l,(function(e){""!==e?h():d.value=a.swaps})),Object(o["watch"])(c,(function(e){var t,n,o;e&&(d.value=a.swaps||[]),console.log("isRefreshEnable",!e),null===(t=window)||void 0===t||null===(n=t._tw_)||void 0===n||null===(o=n.isRefreshEnable)||void 0===o||o.call(n,"bridge",!e)}));var m=null;function h(){m&&(clearTimeout(m),m=null),m=setTimeout((function(){b()}),500)}function b(){if(""!==l.value){var e,t=new RegExp(l.value,"i"),n=(null===(e=a.swaps)||void 0===e?void 0:e.filter((function(e){return t.test((null===e||void 0===e?void 0:e.name)||"")||t.test((null===e||void 0===e?void 0:e.show_name)||"")||t.test((null===e||void 0===e?void 0:e.factory_address)||"")||t.test((null===e||void 0===e?void 0:e.router_address)||"")})))||[];(null===n||void 0===n?void 0:n.length)>0&&(d.value=n)}else d.value=a.swaps}function p(e){console.log(e),m&&(clearTimeout(m),m=null),b()}function f(){l.value="",c.value=!1}function v(e){(null!==e&&void 0!==e&&e.name||null!==e&&void 0!==e&&e.router_address)&&(i("update:swap",e),c.value=!1)}return function(e,t){var i,s,m,h=Object(o["resolveComponent"])("van-image"),b=Object(o["resolveComponent"])("van-search"),g=Object(o["resolveComponent"])("van-empty"),k=Object(o["resolveComponent"])("van-icon"),j=Object(o["resolveComponent"])("van-action-sheet");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("button",{class:"flex items-center active-opacity-50",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return Object(o["isRef"])(c)?c.value=!0:c=!0}),["stop"]))},[null!==a&&void 0!==a&&null!==(i=a.swap)&&void 0!==i&&i.name?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createVNode"])(h,{class:"w-16 h-16",round:"","lazy-load":"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(null===a||void 0===a||null===(s=a.swap)||void 0===s?void 0:s.name,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",Us,Object(o["toDisplayString"])((null===a||void 0===a||null===(m=a.swap)||void 0===m?void 0:m.show_name)||""),1)],64)):(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",zs,Object(o["toDisplayString"])(Object(o["unref"])(r)("plsSelectSwap")),1)),Ms]),Object(o["createVNode"])(j,{show:Object(o["unref"])(c),"onUpdate:show":t[2]||(t[2]=function(e){return Object(o["isRef"])(c)?c.value=e:c=e}),title:Object(o["unref"])(r)("selectSwap"),style:{height:"80%"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",qs,[Object(o["createElementVNode"])("form",Hs,[Object(o["createVNode"])(b,{modelValue:Object(o["unref"])(l),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(o["isRef"])(l)?l.value=e:l=e}),modelModifiers:{trim:!0},clearable:"",background:"#fff",shape:"round",placeholder:Object(o["unref"])(r)("searchPool"),onSearch:p,onCancel:f},null,8,["modelValue","placeholder"])]),Object(o["createElementVNode"])("ul",Gs,[Object(o["withDirectives"])(Object(o["createVNode"])(g,{description:Object(o["unref"])(r)("emptyData"),class:"empty"},null,8,["description"]),[[o["vShow"],Object(o["unref"])(d)&&0===Object(o["unref"])(d).length&&!Object(o["unref"])(u)]]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(d),(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",{class:"token-item",key:t,onClick:Object(o["withModifiers"])((function(t){return v(e)}),["stop"])},[Object(o["createVNode"])(h,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(e.name,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("div",Ws,Object(o["toDisplayString"])(e.show_name),1),Js,e.name===a.swap.name?(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:0,size:"0.48rem",color:"#3F80F7",name:"success"})):(Object(o["openBlock"])(),Object(o["createBlock"])(k,{key:1,style:{opacity:"0"},size:"0.48rem",color:"#3F80F7",name:"success"}))],8,Qs)})),128))])])]})),_:1},8,["show","title"])],64)}}};n("1385");const Ys=rt()(Zs,[["__scopeId","data-v-396fdb40"]]);var Ks=Ys,Xs=n("75e6"),er=function(e){return Object(o["pushScopeId"])("data-v-0ce3f71c"),e=e(),Object(o["popScopeId"])(),e},tr={class:"popup-title"},nr={class:"slippage-label"},or=["onClick"],ir={style:{width:"100%"}},ar={class:"radio-group"},sr={key:0,style:{flex:"1"}},rr=["id","value"],cr=["for"],lr={class:"slippage-input"},dr=er((function(){return Object(o["createElementVNode"])("span",null,"%",-1)})),ur={class:"form-submit"},mr={props:{slippage:[String,Number]},emits:["update:slippage"],setup:function(e,t){var n=t.emit,i=e,a=Object(js["b"])(),s=a.t,r=Object(o["ref"])(!1),c=Object(o["ref"])(["0.1","0.5","1"]),l=Object(o["ref"])(i.slippage||"1");function d(){n("update:slippage",l.value),r.value=!1}function u(){Xs["a"].alert({title:s("slippage"),message:s("slippageTips"),confirmButtonText:s("iKnown"),confirmButtonColor:"#3F80F7",messageAlign:"left"}).then((function(){}))}function m(){r.value&&Number(l.value)<0&&(l.value="0")}function h(e){return Number(e)<=49.99}return Object(o["watch"])(r,(function(e){e&&(l.value=i.slippage||"1")})),function(e,t){var n=Object(o["resolveComponent"])("van-field"),i=Object(o["resolveComponent"])("van-button"),a=Object(o["resolveComponent"])("van-form"),b=Object(o["resolveComponent"])("van-popup");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createElementVNode"])("i",{class:"iconfont icon-edit clickable",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(e){return Object(o["isRef"])(r)?r.value=!0:r=!0}),["stop"]))}),Object(o["createVNode"])(b,{show:Object(o["unref"])(r),"onUpdate:show":t[4]||(t[4]=function(e){return Object(o["isRef"])(r)?r.value=e:r=e}),class:"popup-container",closeable:!0,"close-on-click-overlay":!1,"close-on-popstate":!1,round:"",position:"center",teleport:"#app",style:{width:"90%","min-height":"20vh"}},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("h3",tr,Object(o["toDisplayString"])(Object(o["unref"])(s)("setSlippage")),1),Object(o["createVNode"])(a,{class:"popup-content",onSubmit:d},{default:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",nr,[Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(Object(o["unref"])(s)("slippage")),1),Object(o["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:Object(o["withModifiers"])(u,["stop"]),style:{"font-size":"0.38rem","margin-left":"0.05rem",color:"#3F80F7"}},null,8,or)]),Object(o["createVNode"])(n,{name:"slippage",modelValue:Object(o["unref"])(l),"onUpdate:modelValue":t[3]||(t[3]=function(e){return Object(o["isRef"])(l)?l.value=e:l=e}),label:"",style:{"--van-cell-horizontal-padding":"0"},rules:[{required:!0,message:Object(o["unref"])(s)("enterSlippage")},{validator:h,message:Object(o["unref"])(s)("slippageMaxTip")}],border:!1},{input:Object(o["withCtx"])((function(){return[Object(o["createElementVNode"])("div",ir,[Object(o["createElementVNode"])("div",ar,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(Object(o["unref"])(c),(function(e,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:n},[0!==n?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",sr)):Object(o["createCommentVNode"])("",!0),Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{type:"radio",id:"radio-".concat(e),"onUpdate:modelValue":t[1]||(t[1]=function(e){return Object(o["isRef"])(l)?l.value=e:l=e}),value:e,class:"radio-input"},null,8,rr),[[o["vModelRadio"],Object(o["unref"])(l)]]),Object(o["createElementVNode"])("label",{for:"radio-".concat(e),class:"radio-item"},Object(o["toDisplayString"])(e)+"%",9,cr)],64)})),128))]),Object(o["createElementVNode"])("div",lr,[Object(o["createVNode"])(n,{class:"input",name:"slippage",type:"number",min:"0",max:"49.99",modelValue:Object(o["unref"])(l),"onUpdate:modelValue":t[2]||(t[2]=function(e){return Object(o["isRef"])(l)?l.value=e:l=e}),onBlur:m,clearable:""},null,8,["modelValue"]),dr])])]})),_:1},8,["modelValue","rules"]),Object(o["createElementVNode"])("div",ur,[Object(o["createVNode"])(i,{class:"btn",block:"",round:"","native-type":"submit",size:"normal",type:"primary"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(Object(o["unref"])(s)("confirm1")),1)]})),_:1})])]})),_:1})]})),_:1},8,["show"])],64)}}};n("67e3");const hr=rt()(mr,[["__scopeId","data-v-0ce3f71c"]]);var br=hr,pr={class:"pb-50"},fr={class:"text-size-14 w-100p table-history color-333"},vr={class:"text-size-12 color-999 t-header"},gr={class:"text-left font-400"},kr={class:"text-left font-400"},jr={class:"text-right font-400"},Or=["onClick"],wr={class:"text-left font-400"},Tr={class:"text-center font-400"},yr={class:"flex items-center mb-5"},Nr={class:"mr-5"},Sr={class:"flex items-center"},xr={class:"mr-5"},Vr={class:"text-right font-400"},Ar={class:"flex items-center justify-end mb-5"},Er={class:"flex items-center justify-end"},Cr={class:"color-999 text-size-12"};function $r(e,t,i,a,s,r){var c=this,l=Object(o["resolveComponent"])("van-image"),d=Object(o["resolveComponent"])("van-empty");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",pr,[Object(o["createElementVNode"])("table",fr,[Object(o["createElementVNode"])("tr",vr,[Object(o["createElementVNode"])("th",gr,Object(o["toDisplayString"])(e.$t("type")),1),Object(o["createElementVNode"])("th",kr,Object(o["toDisplayString"])(e.$t("token"))+"/"+Object(o["toDisplayString"])(e.$t("amount")),1),Object(o["createElementVNode"])("th",jr,"DEX/"+Object(o["toDisplayString"])(e.$t("volume")),1)]),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(i.tableList,(function(t,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:i,class:"t-row clickable",onClick:Object(o["withModifiers"])((function(n){return e.$f.openBrowser(t.transaction,"tx",t.chain)}),["stop"])},[Object(o["createElementVNode"])("td",wr,[Object(o["createElementVNode"])("div",{style:Object(o["normalizeStyle"])({color:"addLiquidity"===t.type?"#12B886":"#F6465D"})},Object(o["toDisplayString"])("addLiquidity"===t.type?e.$t("add"):e.$t("remove")),5)]),Object(o["createElementVNode"])("td",Tr,[Object(o["createElementVNode"])("div",yr,[Object(o["createVNode"])(l,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:e.$f.formatIcon("".concat(t.token0_address,"-").concat(t.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",Nr,Object(o["toDisplayString"])("addLiquidity"===t.type?"+":"-")+" "+Object(o["toDisplayString"])(e.$f.formatNumber2(t.amount0)),1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(r.formatTokenSymbol(t.token0_address,t.chain,t.token0_symbol)),1)]),Object(o["createElementVNode"])("div",Sr,[Object(o["createVNode"])(l,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:e.$f.formatIcon("".concat(t.token1_address,"-").concat(t.chain)),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",xr,Object(o["toDisplayString"])("addLiquidity"===t.type?"+":"-")+" "+Object(o["toDisplayString"])(e.$f.formatNumber2(t.amount1)),1),Object(o["createElementVNode"])("div",null,Object(o["toDisplayString"])(r.formatTokenSymbol(t.token1_address,t.chain,t.token1_symbol)),1)])]),Object(o["createElementVNode"])("td",Vr,[Object(o["createElementVNode"])("div",Ar,[Object(o["createVNode"])(l,{class:"w-16 h-16 mr-5",round:"","lazy-load":"",src:"https://ave.s3.ap-east-1.amazonaws.com/swap/".concat(t.amm,".jpeg"),"error-icon":n("aecc")},null,8,["src","error-icon"]),Object(o["createElementVNode"])("span",null,Object(o["toDisplayString"])(e.$f.formatNumberCurrencyUnit(t.amount_usd)),1)]),Object(o["createElementVNode"])("div",Er,[Object(o["createElementVNode"])("div",Cr,Object(o["toDisplayString"])(c.$f.formatDate(t.time,"MM-DD HH:mm:ss")),1)])])],8,Or)})),128))]),Object(o["withDirectives"])(Object(o["createVNode"])(d,{description:e.$t("empty"),class:"empty"},null,8,["description"]),[[o["vShow"],i.tableList&&0===i.tableList.length&&!i.loading]])])}var _r={name:"LiquidityHistory",props:{tableList:Array,loading:Boolean},methods:{formatTokenSymbol:function(e,t,n){var o=this.$f.formatChainInfo(t);return e===(null===o||void 0===o?void 0:o.wmainWrapper)?null===o||void 0===o?void 0:o.mainName:n}}};n("08d5");const Br=rt()(_r,[["render",$r],["__scopeId","data-v-5f31994c"]]);var Dr=Br,Ir={name:"BridgeLiquidity",components:{SelectToken:Ps,SelectSwap:Ks,Slippage:br,LPHistory:Dr},data:function(){return{utils:nt["utils"],ZERO_ADDRESS:Xe["m"],swaps:[],swap:{chain:"",name:"",show_name:"",factory_address:"",router_address:""},amount0:"",amount1:"",token0:{address:"",chain:""},token1:{address:"",chain:""},reserves:{},userBalanceTokens:[],tokenList:[],loading0:!1,loading1:!1,confirmSubmitVisible:!1,confirmTxVisible:!1,transaction:"",slippage:.5,loadingSubmit:!1,historyList:[],loadingHistory:!1}},computed:{chain:function(){return this.$store.getters.netId},walletAddress:function(){return this.$store.state.currentAccount},isApprove0:function(){var e,t=nt["utils"].parseUnits(this.amount0||"0",this.token0.decimals||0);return xn["a"].from((null===(e=this.token0)||void 0===e?void 0:e.allowance)||"0").gte(t)},isApprove1:function(){var e,t=nt["utils"].parseUnits(this.amount1||"0",this.token1.decimals||0);return xn["a"].from((null===(e=this.token1)||void 0===e?void 0:e.allowance)||"0").gte(t)},userTokens:function(){var e=Object(Ae["a"])(this.userBalanceTokens.slice()),t=this.tokenList,n=t.slice().filter((function(t){return e.every((function(e){return e.id!==t.id}))}));return t.slice().forEach((function(t){var n=e.find((function(e){return e.id===t.id}));n&&(n.logo_url=t.logo_url)})),e=e.concat(n),e.length>0?e:t.slice()},routerAddress:function(){return this.swap.router_address},tips:function(){return this.reserves.pair===Xe["m"]?this.$t("createLpTip"):this.$t("addLpTip")},error:function(){var e,t,n=this.token0,o=this.token1,i=this.reserves;if(null!==n&&void 0!==n&&n.address&&(null===n||void 0===n||null===(e=n.address)||void 0===e?void 0:e.toLowerCase())===(null===o||void 0===o||null===(t=o.address)||void 0===t?void 0:t.toLowerCase()))return 4;if(""===this.amount0||""===this.amount1)return i.pair===Xe["m"]?1:2;var a=new An.a(this.amount0||0),s=new An.a(n.balance||0),r=new An.a(this.amount1||0),c=new An.a(o.balance||0);return a.gt(s)||r.gt(c)?3:i.pair===Xe["m"]?-1:0},errorMessage:function(){var e={0:this.$t("add"),"-1":this.$t("create"),1:this.$t("create"),2:this.$t("add"),3:this.$t("insufficientBalance1"),4:this.$t("twoTokenCannotBeSame")};return e[this.error]||""},lpAmount:function(){var e;return""===this.amount0||""===this.amount1?"0":"0"===this.reserves.reserve0||"1"===this.reserves.reserve0?"-":nt["utils"].formatUnits(new An.a(this.amount0||0).times(new An.a(10).exponentiatedBy((null===(e=this.token0)||void 0===e?void 0:e.decimals)||0)).times(this.reserves.totalSupply||0).div(this.reserves.reserve0||1).toFixed(0),this.reserves.decimals||0)},disabled:function(){var e,t,n,o;return!this.isApprove0||!this.isApprove1||""===this.walletAddress||""===this.token0.address||void 0===this.token0.address||""===this.token1.address||void 0===this.token1.address||this.error>0||(null===(e=this.token0)||void 0===e||null===(t=e.address)||void 0===t?void 0:t.toLowerCase())===(null===(n=this.token1)||void 0===n||null===(o=n.address)||void 0===o?void 0:o.toLowerCase())}},methods:{init:function(){this.initLP(),this._getUserTokenList(),this._getTokenList(),this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),this._getChainSwaps(),this._getUserLpHistory(),this.$f.setSwapSendType("")},handleSelectSwap:function(e){this.swap=e,this.amount0="",this.amount1="",this.getToken0Balance(),this.getToken1Balance(),this._getReserves(),sessionStorage.LP_swap=JSON.stringify(e)},initLP:function(){var e=this.$route.query,t=this.$route.query.chain,n=this.chain||this.$store.getters.netId;if(!n||!t||n===t){if(n&&n===t){var o=e.swap?Object(ks["formatSwapInfo"])(n,e.swap):null;this.token0={address:e.token0||"",chain:n||""},this.token1={address:e.token1||"",chain:n||""},this.swap={chain:n||"",name:e.swap||"",show_name:(null===o||void 0===o?void 0:o.show_name)||"",factory_address:(null===o||void 0===o?void 0:o.factory_address)||"",router_address:(null===o||void 0===o?void 0:o.router_address)||""}}if(!e.swap||n!==t){var i=sessionStorage.LP_swap?JSON.parse(sessionStorage.LP_swap):null;!this.swap.name&&i&&n===i.chain&&(this.swap=i)}if(!e.token0||n!==t){var a=sessionStorage.LP_token0?JSON.parse(sessionStorage.LP_token0):null;!this.token0.address&&a&&n===a.chain&&(this.token0=a)}if(!e.token1||n!==t){var s=sessionStorage.LP_token1?JSON.parse(sessionStorage.LP_token1):null;!this.token1.address&&s&&n===s.chain&&(this.token1=s)}}},handleSelectToken0:function(e){this.token0=e,this.amount0="",this.getToken0Balance(),this._getReserves()},handleSelectToken1:function(e){this.token1=e,this.amount1="",this.getToken1Balance(),this._getReserves()},_getChainSwaps:function(){var e,t,n=this;Object(tt["t"])((null===(e=this.token0)||void 0===e?void 0:e.chain)||(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain||"bsc").then((function(e){n.swaps=e||[]}))},watchAmount0:function(){var e=this.reserves;if("0"!==e.reserve0&&"0"!==e.reserve1)if(e.reserve0&&e.reserve1&&this.amount0&&!Number.isNaN(this.amount0)&&0!==Number(this.amount0)){var t,n,o,i,a=new An.a(e.reserve0),s=new An.a(e.reserve1),r=Number(null===(t=this.token0)||void 0===t?void 0:t.decimals)||0,c=Number(null===(n=this.token1)||void 0===n?void 0:n.decimals)||0,l=new An.a(this.amount0);this.amount1=null===(o=nt["utils"].formatUnits(s.times(l).times(Math.pow(10,r)).div(a).toFixed(0),c))||void 0===o||null===(i=o.replace)||void 0===i?void 0:i.call(o,/\.0$/,"")}else this.amount1=""},watchAmount1:function(){var e=this.reserves;if("0"!==e.reserve0&&"0"!==e.reserve1)if(e.reserve0&&e.reserve1&&this.amount1&&!Number.isNaN(this.amount1)&&0!==Number(this.amount1)){var t,n,o,i=new An.a(e.reserve0),a=new An.a(e.reserve1),s=Number(null===(t=this.token0)||void 0===t?void 0:t.decimals)||0,r=Number(null===(n=this.token1)||void 0===n?void 0:n.decimals)||0,c=new An.a(this.amount1);this.amount0=null===nt["utils"]||void 0===nt["utils"]||null===(o=nt["utils"].formatUnits)||void 0===o?void 0:o.call(nt["utils"],i.times(c).times(Math.pow(10,r)).div(a).toFixed(0),s)}else this.amount0=""},handleMax0:function(){if(this.token0.address===Xe["k"]){var e=new An.a(this.token0.balance||this.token0.value||0).minus(.01);this.amount0=e.lte(0)?"0":e.toFixed()}else this.amount0=this.token0.balance||this.token0.value?new An.a(this.token0.balance||this.token0.value||0).toFixed():"";this.watchAmount0()},handleMax1:function(){if(this.token1.address===Xe["k"]){var e=new An.a(this.token1.balance||this.token1.value||0).minus(.01);this.amount1=e.lte(0)?"0":e.toFixed()}else this.amount1=this.token1.balance||this.token1.value?new An.a(this.token1.balance||this.token1.value||0).toFixed():"";this.watchAmount1()},_getUserTokenList:function(){var e=this;Object(tt["Q"])().then((function(t){var n,o;e.userBalanceTokens=(null===t||void 0===t||null===(n=t.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===n||null===(o=n.filter)||void 0===o?void 0:o.call(n,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag&&Number(e.value)>0})))||[],e.userBalanceTokens.length>0&&Object(tt["k"])(e.userBalanceTokens.map((function(e){return e.token||""}))).then((function(t){var n,o,i;e.userBalanceTokens=null===(n=e.userBalanceTokens)||void 0===n||null===(o=n.map)||void 0===o||null===(i=o.call(n,(function(e,n){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{value:nt["utils"].formatUnits(t[n],e.decimals||0)})})))||void 0===i?void 0:i.filter((function(e){return!!Number(e.value)}))}))}))},_getTokenList:function(){var e=this;Object(tt["L"])(this.chain||"bsc").then((function(t){e.tokenList=(null===t||void 0===t?void 0:t.map((function(e){return Object(Ee["a"])(Object(Ee["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[]}))},getToken0Balance:function(){var e,t,n=this;Object(tt["C"])((null===(e=this.token0)||void 0===e?void 0:e.address)||"",this.routerAddress,(null===(t=this.token0)||void 0===t?void 0:t.chain)||this.chain,this.walletAddress).then((function(e){n.token0=Object(Ee["a"])(Object(Ee["a"])({},n.token0),e),sessionStorage.LP_token0=JSON.stringify(n.token0)}))},getToken1Balance:function(){var e,t,n=this;Object(tt["C"])((null===(e=this.token1)||void 0===e?void 0:e.address)||"",this.routerAddress,(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain,this.walletAddress).then((function(e){n.token1=Object(Ee["a"])(Object(Ee["a"])({},n.token1),e),sessionStorage.LP_token1=JSON.stringify(n.token1)}))},_getReserves:function(e){var t=this,n=this.token0,o=this.token1,i=this.routerAddress,a=this.chain;n.address&&o.address&&i&&n.address!==o.address&&Object(tt["G"])(n.address,o.address,i,(null===n||void 0===n?void 0:n.chain)||(null===o||void 0===o?void 0:o.chain)||a||"bsc").then((function(i){if(t.reserves=i,"0"!==t.reserves.reserve0&&"0"!==t.reserves.reserve0&&(t.amount0?t.watchAmount0():t.amount1&&t.watchAmount1()),t.reserves.pair===Xe["m"]){var a="".concat(n.address,"-").concat(n.chain),s="".concat(o.address,"-").concat(o.chain);Object(tt["N"])([a,s]).then((function(e){var n=e[a],o=e[s];t.token0=Object(Ee["a"])(Object(Ee["a"])({},t.token0),{},{current_price_usd:n.current_price_usd}),t.token1=Object(Ee["a"])(Object(Ee["a"])({},t.token1),{},{current_price_usd:o.current_price_usd})}))}e&&e()}))},_approve0:function(){var e,t=this;this.loading0=!0,Object(tt["g"])((null===(e=this.token0)||void 0===e?void 0:e.address)||"",this.routerAddress).then((function(e){return e.wait()})).then((function(e){console.log(e),t.$notify({type:"success",message:t.$t("approveSuccess")}),t.getToken0Balance()})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loading0=!1}))},_approve1:function(){var e,t=this;this.loading1=!0,Object(tt["g"])((null===(e=this.token1)||void 0===e?void 0:e.address)||"",this.routerAddress).then((function(e){return e.wait()})).then((function(e){console.log(e),t.$notify({type:"success",message:t.$t("approveSuccess")}),t.getToken1Balance()})).catch((function(e){t.$f.handleError(e)})).finally((function(){t.loading1=!1}))},_addLiquidity:function(){var e,t,n,o,i=this,a=nt["utils"].parseUnits(this.amount0||"0",this.token0.decimals||0).toString(),s=nt["utils"].parseUnits(this.amount1||"0",this.token1.decimals||0).toString();this.loadingSubmit=!0,this.$f.setSwapSendType("protect"),Object(tt["c"])({token0:(null===(e=this.token0)||void 0===e?void 0:e.address)||"",token1:(null===(t=this.token1)||void 0===t?void 0:t.address)||"",amount0:a,amount1:s,slippage:this.slippage,router:this.routerAddress},(null===(n=this.token0)||void 0===n?void 0:n.chain)||(null===(o=this.token1)||void 0===o?void 0:o.chain)||this.chain).then((function(e){return i.transaction=e.hash,""!==i.transaction&&(i.confirmSubmitVisible=!1,i.confirmTxVisible=!0),e.wait()})).then((function(e){console.log(e),i.amount0="",i.amount1="",i.getToken0Balance(),i.getToken1Balance(),i._getReserves(i._updateUserLp),i._getUserTokenList(),i._getUserLpHistory(),i.$notify({type:"success",message:i.$t("addLqSuccess")})})).catch((function(e){i.$f.handleError(e)})).finally((function(){i.loadingSubmit=!1,i.$f.setSwapSendType("")}))},_updateUserLp:function(){var e,t;this.reserves.pair&&this.reserves.pair!==Xe["m"]&&Object(tt["Z"])(this.reserves.pair,(null===(e=this.token0)||void 0===e?void 0:e.chain)||(null===(t=this.token1)||void 0===t?void 0:t.chain)||this.chain)},_getUserLpHistory:function(){var e=this,t=this.$store.getters.netId,n=this.$store.state.currentAccount;this.loadingHistory=!0,Object(tt["P"])(t,n).then((function(t){e.historyList=t})).finally((function(){e.loadingHistory=!1}))},goMyLiquidity:function(){var e,t,n,o,i,a=((null===(e=this.globalConfig)||void 0===e?void 0:e.lp_url)||"https://m.jfliquidity.xyz/add").replace("/add","");if(null!==(t=window)&&void 0!==t&&null!==(n=t.WKWebViewJavascriptBridge)&&void 0!==n&&n.callHandler)location.href=a;else if(null!==(o=window)&&void 0!==o&&null!==(i=o._tw_)&&void 0!==i&&i.openLp){var s,r;null===(s=window)||void 0===s||null===(r=s._tw_)||void 0===r||r.openLp("","","my_lp")}else location.href=a}}};n("b679");const Lr=rt()(Ir,[["render",gs],["__scopeId","data-v-69cfeef4"]]);var Rr=Lr,Pr={name:"Bridge",components:{RebateImg:c["a"],SwapBridge:zn,Limit:Ei,Liquidity:Rr},setup:function(){var e=Object(En["useStorage"])("bridge_tabActive","swap",sessionStorage),t=Object(En["useStorage"])("ave_globalConfig",{},localStorage);return{tabActive:e,globalConfig:t}},data:function(){return{caches:{swap:!1,limit:!1,liquidity:!1}}},computed:{tabs:function(){return[{name:this.$t("swapOrBridge"),value:"swap"},{name:this.$t("limit"),value:"limit"},{name:this.$t("pool"),value:"liquidity"}]}},watch:{tabActive:function(){this.init()}},activated:function(){this.init()},methods:{init:function(){"swap"===this.tabActive?this.caches.swap||(this.$refs.swapBridge.init(),this.caches.swap=!0):"limit"===this.tabActive?this.caches.limit||(this.$refs.limitBridge.init(),this.caches.limit=!0):"liquidity"===this.tabActive&&(this.caches.liquidity||(this.$refs.liquidityBridge.init(),this.caches.liquidity=!0))},handleTab:function(e){this.tabActive=e.value},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var n,o;null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o||o.openLp("","","")}else{var i,a=(null===(i=this.globalConfig)||void 0===i?void 0:i.lp_url)||"https://m.jfliquidity.xyz/add";this.$f.appOpenWebPage(a)}}}};n("687f");const Fr=rt()(Pr,[["render",r],["__scopeId","data-v-9b91a26e"]]);t["default"]=Fr},"08d5":function(e,t,n){"use strict";n("3c9d")},1385:function(e,t,n){"use strict";n("2e9d")},"1fd1":function(e,t,n){"use strict";n("4ac8")},"2cfd":function(e,t,n){},"2e9d":function(e,t,n){},"3c9d":function(e,t,n){},"3ff4":function(e,t,n){"use strict";n("9252")},"43c0":function(e,t,n){},"4ac8":function(e,t,n){},6206:function(e,t,n){},"67e3":function(e,t,n){"use strict";n("df7a")},"687f":function(e,t,n){"use strict";n("2cfd")},"6b59":function(e,t,n){"use strict";n("70d1")},"6c4c":function(e,t,n){"use strict";n("43c0")},"70d1":function(e,t,n){},"78f9":function(e,t,n){"use strict";n("bbd6")},"7a12":function(e,t,n){"use strict";n("fced")},9252:function(e,t,n){},"9dd3":function(e,t,n){},a3d3:function(e,t,n){"use strict";n("6206")},a3f8:function(e,t,n){"use strict";n("e32d")},aa6f:function(e,t,n){},b679:function(e,t,n){"use strict";n("9dd3")},bbd6:function(e,t,n){},cd1a:function(e,t,n){"use strict";n("aa6f")},df7a:function(e,t,n){},e32d:function(e,t,n){},fced:function(e,t,n){}}]);