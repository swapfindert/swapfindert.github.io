(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Swap"],{"35e3":function(e,t,i){"use strict";i.r(t);i("b0c0"),i("ac1f"),i("1276"),i("a9e3"),i("fb6a"),i("99af");var n=i("7a23"),o=i("e524"),a=i.n(o),s=i("965b"),l=i.n(s),r=function(e){return Object(n["pushScopeId"])("data-v-616ea84b"),e=e(),Object(n["popScopeId"])(),e},c={class:"swap-content"},u={class:"swap-content_left",ref:"swapLeft"},d=["onClick"],m={class:"select-c"},h={class:"card-container"},p={class:"card-container_top flex justify-between items-center"},b=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),v={class:"s-text"},f={class:"flex justify-between items-center mt-20"},g=r((function(){return Object(n["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)})),k={class:"card-container"},O={class:"card-container_top flex justify-between items-center"},j=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),w={class:"s-text"},T={class:"flex justify-between items-center mt-20"},y={key:0},S={key:1},N={key:0,style:{"font-size":"0.24rem"}},$={key:0,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},x={key:1,style:{"font-size":"0.24rem",color:"#F81111",margin:"0.1rem 0"}},_={key:2,style:{"font-size":"0.24rem",color:"#f8be46",margin:"0.1rem 0"}},V={class:"card-container"},A={class:"card-container_top flex justify-between items-center"},C=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),E={class:"s-text"},B={class:"flex justify-between items-center mt-20"},I=r((function(){return Object(n["createElementVNode"])("div",{style:{height:"0.12rem"}},null,-1)})),L={class:"card-container"},P={class:"card-container_top flex justify-between items-center"},D=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),G={class:"s-text"},F={class:"flex justify-between items-center mt-20"},U={key:0,class:"limit-price-label"},R={key:1,class:"card-container flex justify-between items-center"},M=["disabled"],z=["disabled"],Q={class:"limit-price-label mt-10"},H={class:"card-container flex justify-between items-center"},q=["disabled"],W=["disabled"],J=r((function(){return Object(n["createElementVNode"])("div",{class:"swap-content_center"},null,-1)})),Y={class:"right-section-1"},X=Object(n["createTextVNode"])("+"),K={class:"right-section-2"},Z=Object(n["createTextVNode"])("LP"),ee={key:0,class:"swap-label"},te={class:"swap-label_item-left"},ie={class:"swap-label_item-left"},ne={style:{display:"flex","align-items":"center"}},oe={class:"swap-label_item-left"},ae={class:"swap-label_item-left"},se={key:0},le={key:0,style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},re={key:1},ce={key:0},ue={key:1,class:"path-amm"},de=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),me={key:0,class:"select-token iconfont icon-collapse-down"},he={class:"swap-label_item-left"},pe={class:"flex items-center"},be={key:1,class:"swap-label"},ve={class:"swap-label_item-left"},fe={key:0,style:{display:"flex","align-items":"center"}},ge={style:{"margin-right":"0.1rem"}},ke={key:1,style:{display:"flex","align-items":"center"}},Oe={style:{"margin-right":"0.1rem"}},je={key:0},we={class:"swap-label_item-left"},Te={style:{display:"flex","align-items":"center"}},ye={class:"section-bottom"},Se={class:"title"},Ne=r((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),$e={key:0,style:{"background-color":"#fff"}},xe={key:1,style:{"background-color":"#fff"}},_e={key:2,style:{"background-color":"#fff"}},Ve={class:"footer-container"},Ae=r((function(){return Object(n["createElementVNode"])("img",{src:l.a,alt:"",srcset:""},null,-1)})),Ce={style:{background:"#fff","padding-bottom":"1rem"}},Ee={class:"token-item header"},Be={class:"flex-2"},Ie={class:"flex-1"},Le={class:"flex-1 right-label"},Pe=r((function(){return Object(n["createElementVNode"])("span",{style:{width:"0.32rem"}},null,-1)})),De=["onClick"],Ge={class:"path-list flex-start flex-2"},Fe={key:0},Ue={key:1,class:"path-amm"},Re=r((function(){return Object(n["createElementVNode"])("img",{style:{width:"0.3rem",margin:"0.02rem 0.1rem 0"},src:a.a,alt:"",srcset:""},null,-1)})),Me={key:0,class:"tag"},ze={class:"flex-1"},Qe=Object(n["createTextVNode"])(" <0.01% "),He=Object(n["createTextVNode"])(" >40% ");function qe(e,t,o,a,s,l){var r,qe,We,Je,Ye,Xe,Ke,Ze,et,tt,it,nt,ot,at,st,lt,rt,ct,ut,dt,mt,ht,pt,bt,vt,ft,gt,kt,Ot,jt,wt,Tt,yt,St,Nt,$t=this,xt=Object(n["resolveComponent"])("RebateImg"),_t=Object(n["resolveComponent"])("van-count-down"),Vt=Object(n["resolveComponent"])("v-select"),At=Object(n["resolveComponent"])("SwapSelectToken"),Ct=Object(n["resolveComponent"])("van-button"),Et=Object(n["resolveComponent"])("van-field"),Bt=Object(n["resolveComponent"])("PercentStep"),It=Object(n["resolveComponent"])("van-form"),Lt=Object(n["resolveComponent"])("van-icon"),Pt=Object(n["resolveComponent"])("PriceChart"),Dt=Object(n["resolveComponent"])("SwapModeSet"),Gt=Object(n["resolveComponent"])("van-image"),Ft=Object(n["resolveComponent"])("SwapGasSet"),Ut=Object(n["resolveComponent"])("SlippageButton"),Rt=Object(n["resolveComponent"])("van-tab"),Mt=Object(n["resolveComponent"])("van-tabs"),zt=Object(n["resolveComponent"])("van-checkbox"),Qt=Object(n["resolveComponent"])("van-loading"),Ht=Object(n["resolveComponent"])("TxItem"),qt=Object(n["resolveComponent"])("DynamicScrollerItem"),Wt=Object(n["resolveComponent"])("DynamicScroller"),Jt=Object(n["resolveComponent"])("van-empty"),Yt=Object(n["resolveComponent"])("LimitTxItem"),Xt=Object(n["resolveComponent"])("NoGasTxItem"),Kt=Object(n["resolveComponent"])("confirm-swap"),Zt=Object(n["resolveComponent"])("confirm-limit"),ei=Object(n["resolveComponent"])("van-action-sheet"),ti=Object(n["resolveDirective"])("animation-trigger");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("section",{class:"swap-container",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[Object(n["createVNode"])(xt,{style:{"padding-left":"0.28rem","padding-right":"0.28rem"}}),Object(n["createVNode"])(_t,{style:{position:"absolute",opacity:"0",height:"0"},ref:"countDown",class:"icon-countDown",time:15e3,format:"sss",onFinish:l.onCountDownFinish},{default:Object(n["withCtx"])((function(e){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.seconds)+"s ",1)]})),_:1},8,["onFinish"]),Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("div",u,[Object(n["createElementVNode"])("div",{class:"tabs-triangle",style:Object(n["normalizeStyle"])({"--upColor":e.$store.getters.upColor[3],"--downColor":e.$store.getters.downColor[3]})},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.typeTabs,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t,class:Object(n["normalizeClass"])(["tab-item",{active:s.activeTab===e.type,up:0===s.activeTab,down:1===s.activeTab}]),onClick:Object(n["withModifiers"])((function(t){return l.switchTab(e.type)}),["stop"])},Object(n["toDisplayString"])(e.name),11,d)})),128))],4),Object(n["createElementVNode"])("div",m,[Object(n["createVNode"])(Vt,{modelValue:s.selected,"onUpdate:modelValue":t[0]||(t[0]=function(e){return s.selected=e}),options:l.types,reduce:function(e){return e.value},label:"name",clearable:!1,searchable:!1},null,8,["modelValue","options","reduce"])]),2===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Object(n["createVNode"])(It,{class:"swap-form",onSubmit:l.onSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var i,o,a,r,c,u,d,m,$,x,_,V;return[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("div",p,[Object(n["createVNode"])(At,{tokens:l.swapTokens,token:s.token1,"onUpdate:token":[t[1]||(t[1]=function(e){return s.token1=e}),l.handleSelectToken1],chain:e.$store.getters.netId||(null===(i=e.$route.params)||void 0===i||null===(o=i.id)||void 0===o||null===(a=o.split)||void 0===a||null===(r=a.call(o,"-"))||void 0===r?void 0:r[1])||s.token1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),b,Object(n["createElementVNode"])("div",v,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(c=s.token1)||void 0===c?void 0:c.balance)||0)),1),1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[2]||(t[2]=Object(n["withModifiers"])((function(e){return l.handlePercentChange(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",f,[0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Et,{key:0,modelValue:s.toAmount,"onUpdate:modelValue":[t[3]||(t[3]=function(e){return s.toAmount=e}),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[4]||(t[4]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0),1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Et,{key:1,modelValue:s.fromAmount,"onUpdate:modelValue":[t[5]||(t[5]=function(e){return s.fromAmount=e}),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[6]||(t[6]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)])]),g,Object(n["createElementVNode"])("div",k,[Object(n["createElementVNode"])("div",O,[Object(n["createVNode"])(At,{tokens:l.swapTokens,token:s.token2,"onUpdate:token":[t[7]||(t[7]=function(e){return s.token2=e}),l.handleSelectToken2],chain:e.$store.getters.netId||(null===(u=e.$route.params)||void 0===u||null===(d=u.id)||void 0===d||null===(m=d.split)||void 0===m||null===($=m.call(d,"-"))||void 0===$?void 0:$[1])||s.token2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),j,Object(n["createElementVNode"])("div",w,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(x=s.token2)||void 0===x?void 0:x.balance)||0)),1),0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[8]||(t[8]=Object(n["withModifiers"])((function(e){return l.handlePercentChange(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",T,[1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Et,{key:0,modelValue:s.toAmount,"onUpdate:modelValue":[t[9]||(t[9]=function(e){return s.toAmount=e}),l.watchToAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[10]||(t[10]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0),0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Et,{key:1,modelValue:s.fromAmount,"onUpdate:modelValue":[t[11]||(t[11]=function(e){return s.fromAmount=e}),l.watchFromAmount],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[12]||(t[12]=function(t){return e.$refs.percentStep.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])):Object(n["createCommentVNode"])("",!0)])]),Object(n["createVNode"])(Bt,{ref:"percentStep",onChange:l.handlePercentChange,activeColor:0===s.activeTab?e.$store.getters.upColor[3]:e.$store.getters.downColor[3]},null,8,["onChange","activeColor"]),!l.isApprove||s.loadingAllowance?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:0,class:"submit-btn",block:"",color:l.swapButtonColor,"native-type":"submit","loading-text":s.loadingAllowance?e.$t("checkingAllowance"):s.quoteLoading?e.$t("quoting"):s.loadingApprove?e.$t("approve"):"",loading:s.loadingApprove||s.loadingSwap||s.loadingAllowance,disabled:Number(l.fromToken.balance)<Number($t.fromAmount)},{default:Object(n["withCtx"])((function(){var t,i;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(0===Number(l.fromToken.balance)||Number(l.fromToken.balance)<Number($t.fromAmount)||""===e.$store.state.currentAccount?null!==(t=l.priceImpactV)&&void 0!==t&&null!==(i=t.gt)&&void 0!==i&&i.call(t,.4)?e.$t("priceImpactTooHigh"):l.checkAmountMessage()||e.$t("approve"):e.$t("approve")),1)]})),_:1},8,["color","loading-text","loading","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:1,class:"submit-btn",block:"",loading:s.loadingSwap||s.quoteLoading||s.loadingAllowance,"loading-text":s.loadingSwap?0===s.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:l.swapButtonColor,disabled:(null===(_=l.priceImpactV)||void 0===_||null===(V=_.gt)||void 0===V?void 0:V.call(_,.4))||!l.checkAmount()||!s.fromAmount||!s.toAmount,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t,i,o,a,r;return[0===Number(l.fromToken.balance)||Number(l.fromToken.balance)<Number($t.fromAmount)||""===e.$store.state.currentAccount?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",y,Object(n["toDisplayString"])(l.checkAmountMessage()),1)):null!==(t=l.priceImpactV)&&void 0!==t&&null!==(i=t.gt)&&void 0!==i&&i.call(t,.4)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,Object(n["toDisplayString"])(e.$t("priceImpactTooHigh")),1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(null!==(o=l.priceImpactV)&&void 0!==o&&null!==(a=o.gt)&&void 0!==a&&a.call(o,.1)?0===s.activeTab?e.$t("buyAnyway"):e.$t("sellAnyway"):0===s.activeTab?e.$t("buy"):e.$t("sell"))+" "+Object(n["toDisplayString"])((null===(r=s.token1)||void 0===r?void 0:r.symbol)||""),1),l.taxStr?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",N,Object(n["toDisplayString"])(l.taxStr),1)):Object(n["createCommentVNode"])("",!0)],64))]})),_:1},8,["loading","loading-text","color","disabled"]))]})),_:1},8,["onSubmit"]),s.isTaxHigh?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",$,Object(n["toDisplayString"])(e.$t("taxTooHigh")),1)):Object(n["createCommentVNode"])("",!0),s.isCannotSellAll?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",x,Object(n["toDisplayString"])(e.$t("cannotSellAll")),1)):Object(n["createCommentVNode"])("",!0),s.isHotToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",_,Object(n["toDisplayString"])(e.$t("hotTokenTips")),1)):Object(n["createCommentVNode"])("",!0)],64)):Object(n["createCommentVNode"])("",!0),0===s.selected||1===this.selected||3===this.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(It,{key:1,class:"swap-form",onSubmit:l.onLimitSubmit,style:{"--van-cell-horizontal-padding":"0","--van-cell-vertical-padding":"0"}},{default:Object(n["withCtx"])((function(){var i,o,a,r,c,u,d,m,h,p;return[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",A,[Object(n["createVNode"])(At,{tokens:l.swapTokens,token:s.limitToken1,"onUpdate:token":[t[13]||(t[13]=function(e){return s.limitToken1=e}),l.handleSelectLimitToken1],chain:e.$store.getters.netId||(null===(i=e.$route.params)||void 0===i||null===(o=i.id)||void 0===o||null===(a=o.split)||void 0===a||null===(r=a.call(o,"-"))||void 0===r?void 0:r[1])||s.limitToken1.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),C,Object(n["createElementVNode"])("div",E,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(c=s.limitToken1)||void 0===c?void 0:c.balance)||0)),1),1===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[14]||(t[14]=Object(n["withModifiers"])((function(e){return l.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",B,[Object(n["createVNode"])(Et,{modelValue:s.limitAmount1,"onUpdate:modelValue":[t[15]||(t[15]=function(e){return s.limitAmount1=e}),l.watchLimitAmount1],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[16]||(t[16]=function(t){return e.$refs.percentStep1.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])]),I,Object(n["createElementVNode"])("div",L,[Object(n["createElementVNode"])("div",P,[Object(n["createVNode"])(At,{tokens:l.swapTokens,token:s.limitToken2,"onUpdate:token":[t[17]||(t[17]=function(e){return s.limitToken2=e}),l.handleSelectLimitToken2],chain:e.$store.getters.netId||(null===(u=e.$route.params)||void 0===u||null===(d=u.id)||void 0===d||null===(m=d.split)||void 0===m||null===(h=m.call(d,"-"))||void 0===h?void 0:h[1])||s.limitToken2.chain||""},null,8,["tokens","token","chain","onUpdate:token"]),D,Object(n["createElementVNode"])("div",G,Object(n["toDisplayString"])(e.$t("balance"))+": "+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(p=s.limitToken2)||void 0===p?void 0:p.balance)||0)),1),0===s.activeTab?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:0,plain:"",type:"primary",color:"#999",round:"",size:"mini",class:"max-btn",onClick:t[18]||(t[18]=Object(n["withModifiers"])((function(e){return l.handlePercentChange1(100)}),["stop"]))},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("max")),1)]})),_:1})):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",F,[Object(n["createVNode"])(Et,{modelValue:s.limitAmount2,"onUpdate:modelValue":[t[19]||(t[19]=function(e){return s.limitAmount2=e}),l.watchLimitAmount2],placeholder:"0.0",type:"number","input-align":"right",clearable:"",class:"input-number",onFocus:t[20]||(t[20]=function(t){return e.$refs.percentStep1.handleClick(0,!0)})},null,8,["modelValue","onUpdate:modelValue"])])]),Object(n["createVNode"])(Bt,{ref:"percentStep1",onChange:l.handlePercentChange1,activeColor:l.limitButtonColor},null,8,["onChange","activeColor"]),1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",U,Object(n["toDisplayString"])(e.$t("triggerPrice"))+"("+Object(n["toDisplayString"])(s.limitToken1.symbol||"")+")",1)):Object(n["createCommentVNode"])("",!0),1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",R,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[21]||(t[21]=Object(n["withModifiers"])((function(){return l.minusTriggerPrice&&l.minusTriggerPrice.apply(l,arguments)}),["stop"])),disabled:!s.triggerPrice},[Object(n["createVNode"])(Lt,{name:"minus"})],8,M),Object(n["createVNode"])(Et,{modelValue:s.triggerPrice,"onUpdate:modelValue":t[22]||(t[22]=function(e){return s.triggerPrice=e}),placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[23]||(t[23]=Object(n["withModifiers"])((function(){return l.addTriggerPrice&&l.addTriggerPrice.apply(l,arguments)}),["stop"])),disabled:!s.triggerPrice},[Object(n["createVNode"])(Lt,{name:"plus"})],8,z)])):Object(n["createCommentVNode"])("",!0),1===s.selected||0===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:2},[Object(n["createElementVNode"])("div",Q,Object(n["toDisplayString"])(e.$t("delegatePrice"))+"("+Object(n["toDisplayString"])(s.limitToken1.symbol||"")+")",1),Object(n["createElementVNode"])("div",H,[Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[24]||(t[24]=Object(n["withModifiers"])((function(){return l.minusLimitPrice&&l.minusLimitPrice.apply(l,arguments)}),["stop"])),disabled:!s.limitPrice},[Object(n["createVNode"])(Lt,{name:"minus"})],8,q),Object(n["createVNode"])(Et,{modelValue:s.limitPrice,"onUpdate:modelValue":[t[25]||(t[25]=function(e){return s.limitPrice=e}),l.watchLimitPrice],placeholder:"0.0",label:"$",type:"number","input-align":"left","label-align":"right","label-width":"0.2rem",clearable:"",class:"input-number",border:!1,style:{"--van-field-label-margin-right":"0.1rem"}},null,8,["modelValue","onUpdate:modelValue"]),Object(n["createElementVNode"])("button",{class:"limit-price-icon",type:"button",onClick:t[26]||(t[26]=Object(n["withModifiers"])((function(){return l.addLimitPrice&&l.addLimitPrice.apply(l,arguments)}),["stop"])),disabled:!s.limitPrice},[Object(n["createVNode"])(Lt,{name:"plus"})],8,W)])],64)):Object(n["createCommentVNode"])("",!0),l.isLimitApprove&&!s.loadingLimitAllowance||3===s.selected?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:4,class:"submit-btn",block:"",loading:s.loadingLimit||s.limitQuoteLoading,"loading-text":s.limitQuoteLoading?e.$t("quoting"):s.loadingLimit?0===s.activeTab?e.$t("buying"):e.$t("selling"):e.$t("quoting"),color:l.limitButtonColor,disabled:!l.checkLimitAmount()||!s.limitAmount1||!s.limitAmount2||s.loadingLimitAllowance,"native-type":"submit"},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.checkLimitAmountMessage()||(0===s.activeTab?e.$t("buy"):e.$t("sell"))+" "+((null===(t=s.limitToken1)||void 0===t?void 0:t.symbol)||"")),1)]})),_:1},8,["loading","loading-text","color","disabled"])):(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:3,class:"submit-btn",block:"",color:l.limitButtonColor,"native-type":"submit","loading-text":s.loadingLimitAllowance?e.$t("checkingAllowance"):s.quoteLimitLoading?e.$t("quoting"):s.loadingLimitApprove?e.$t("approve"):"",disabled:!l.checkLimitAmount(),loading:s.loadingLimitApprove||s.loadingLimit||s.loadingLimitAllowance},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(l.checkLimitAmountMessage()||e.$t("approve")),1)]})),_:1},8,["color","loading-text","disabled","loading"]))]})),_:1},8,["onSubmit"])):Object(n["createCommentVNode"])("",!0)],512),J,Object(n["createElementVNode"])("div",{class:"swap-content_right",style:Object(n["normalizeStyle"])({"max-height":s.height/50+"rem"})},[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Y,[Object(n["createElementVNode"])("div",null," $"+Object(n["toDisplayString"])(e.$f.formatNumber2((null===(r=s.baseToken)||void 0===r||null===(qe=r.token)||void 0===qe?void 0:qe.current_price_usd)||0)),1),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:(null===(We=s.baseToken)||void 0===We||null===(Je=We.token)||void 0===Je?void 0:Je.price_change)<0?"var(--downColor)":"var(--upColor)"})},[(null===(Ye=s.baseToken)||void 0===Ye||null===(Xe=Ye.token)||void 0===Xe?void 0:Xe.price_change)>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[X],64)):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2((null===(Ke=s.baseToken)||void 0===Ke||null===(Ze=Ke.token)||void 0===Ze?void 0:Ze.price_change)||0,2))+"% ",1)],4)])),[[ti,null===(et=s.baseToken)||void 0===et||null===(tt=et.token)||void 0===tt?void 0:tt.current_price_usd,"animation-bg"]]),Object(n["createVNode"])(Pt,{dataX:s.dataX,dataY:s.dataY},null,8,["dataX","dataY"]),Object(n["createElementVNode"])("table",K,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,Object(n["toDisplayString"])(e.$t("pool1")),1),Object(n["createElementVNode"])("th",null,[l.tokenInfo.token&&l.tokenInfo.chain&&s.openLp&&l.isShow?(Object(n["openBlock"])(),Object(n["createBlock"])(Ct,{key:0,icon:"plus",type:"primary",plain:"",size:"small",style:{"--van-padding-base":"0","min-width":"0.8rem",height:"0.4rem"},onClick:Object(n["withModifiers"])(l.goLiquidity,["stop"])},{default:Object(n["withCtx"])((function(){return[Z]})),_:1},8,["onClick"])):Object(n["createCommentVNode"])("",!0)])]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(null===(it=s.baseToken)||void 0===it||null===(nt=it.pairs)||void 0===nt?void 0:nt.slice(0,2),(function(t,i){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:i},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[ti,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])})),128)),(null===(ot=s.baseToken)||void 0===ot||null===(at=ot.pairs)||void 0===at?void 0:at.length)>2&&s.isPairShowMore?(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],{key:0},Object(n["renderList"])(null===(st=s.baseToken)||void 0===st||null===(lt=st.pairs)||void 0===lt?void 0:lt.slice(2),(function(t,i){return Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:i},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token0_symbol:t.token1_symbol),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.target_token===t.token0_address?t.token1_symbol:t.token0_symbol),1)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve0:t.reserve1)),1),Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.$f.formatNumber2(t.target_token===t.token0_address?t.reserve1:t.reserve0)),1)])])),[[ti,t.target_token===t.token0_address?t.token0_price_usd:t.token1_price_usd,"animation-bg"]])})),128)):Object(n["createCommentVNode"])("",!0)]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"btn-more",onClick:t[27]||(t[27]=Object(n["withModifiers"])((function(e){return s.isPairShowMore=!0}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("viewMore")),1),Object(n["createVNode"])(Lt,{name:"arrow-down"})],512),[[n["vShow"],!s.isPairShowMore&&(null===(rt=s.baseToken)||void 0===rt||null===(ct=rt.pairs)||void 0===ct?void 0:ct.length)>2]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("div",{class:"btn-more",onClick:t[28]||(t[28]=Object(n["withModifiers"])((function(e){return s.isPairShowMore=!1}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("putAway")),1),Object(n["createVNode"])(Lt,{name:"arrow-up"})],512),[[n["vShow"],s.isPairShowMore&&(null===(ut=s.baseToken)||void 0===ut||null===(dt=ut.pairs)||void 0===dt?void 0:dt.length)>2]])],4)]),2===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",ee,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",te,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[29]||(t[29]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),Object(n["createVNode"])(Dt,{swapMode:s.customSwapMode,"onUpdate:swapMode":t[30]||(t[30]=function(e){return s.customSwapMode=e}),autoSwapMode:s.autoSwapMode,slippage:s.customSlippage,"onUpdate:slippage":t[31]||(t[31]=function(e){return s.customSlippage=e}),autoSlippage:s.autoSlippageValue},null,8,["swapMode","autoSwapMode","slippage","autoSlippage"])]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ie,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("estimatedAveragePrice")),1)]),Object(n["createElementVNode"])("div",ne,[Object(n["createElementVNode"])("span",null,"$"+Object(n["toDisplayString"])(l.getAvgPrice()),1)])],512),[[n["vShow"],s.fromAmount&&s.toAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",oe,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[32]||(t[32]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("priceImpact"),e.$t("priceImpactTips"))}),["stop"]))})]),Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])({color:l.priceImpactColor})},Object(n["toDisplayString"])(l.priceImpact)+Object(n["toDisplayString"])(null!==(mt=l.priceImpactV)&&void 0!==mt&&null!==(ht=mt.gt)&&void 0!==ht&&ht.call(mt,.05)?"(".concat(e.$t("excessivePriceImpact"),")"):""),5)],512),[[n["vShow"],s.fromAmount&&s.toAmount]]),Object(n["withDirectives"])(Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ae,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("tokenRoute")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[33]||(t[33]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("tokenRoute"),e.$t("tokenRouteTips"))}),["stop"]))})]),1===(null===(pt=s.swapQuoteInfo)||void 0===pt?void 0:pt.toWrapper)||2===(null===(bt=s.swapQuoteInfo)||void 0===bt?void 0:bt.toWrapper)?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",se,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:t},[0!==t?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",le)):Object(n["createCommentVNode"])("",!0),e.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",re,Object(n["toDisplayString"])(e.symbol),1)):Object(n["createCommentVNode"])("",!0)],64)})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:1,class:"path-list clickable",onClick:t[34]||(t[34]=Object(n["withModifiers"])((function(e){return s.dialogListRouterVisible=!0}),["stop","prevent"]))},[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.swapRouterPath,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",ce,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ue,[Object(n["createVNode"])(Gt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":i("aecc")},null,8,["src","error-icon"]),de])):Object(n["createCommentVNode"])("",!0)],64)})),128)),s.listRouter.length>0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",me)):Object(n["createCommentVNode"])("",!0)]))],512),[[n["vShow"],s.fromAmount&&s.toAmount]]),Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",he,Object(n["toDisplayString"])(e.$t("estimatedGas")),1),Object(n["createElementVNode"])("div",pe,[Object(n["createElementVNode"])("span",null,"â‰ˆ "+Object(n["toDisplayString"])(l.estimatedFee),1),"bsc"===e.$store.getters.netId?(Object(n["openBlock"])(),Object(n["createBlock"])(Ft,{key:0,class:"ml-5",standardGasPrice:s.gasPrice,gas:this.swapInfo.gasValue,nativePrice:s.nativePrice,onUpdateGasPrice:l.updateGasPrice},null,8,["standardGasPrice","gas","nativePrice","onUpdateGasPrice"])):Object(n["createCommentVNode"])("",!0)])])])):Object(n["createCommentVNode"])("",!0),0===s.selected||1===s.selected||3===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",be,[Object(n["createElementVNode"])("li",null,[Object(n["createElementVNode"])("div",ve,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("slippage")),1),Object(n["createElementVNode"])("i",{class:"iconfont icon-changjianwentixiangguanwenti",onClick:t[35]||(t[35]=Object(n["withModifiers"])((function(t){return l.alertTips(e.$t("slippage"),e.$t("minimumReceivedTips"))}),["stop"]))})]),0===s.selected||1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",fe,[Object(n["createElementVNode"])("span",ge,Object(n["toDisplayString"])(s.limitSlippage)+"%",1),Object(n["createVNode"])(Ut,{slippage:s.limitSlippage,"onUpdate:slippage":t[36]||(t[36]=function(e){return s.limitSlippage=e}),icon:1,onOnSubmit:l.onSubmitLimitSlippage},null,8,["slippage","onOnSubmit"])])):3===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ke,[Object(n["createElementVNode"])("span",Oe,Object(n["toDisplayString"])(s.noGasSlippage)+"%",1),Object(n["createVNode"])(Ut,{slippage:s.noGasSlippage,"onUpdate:slippage":t[37]||(t[37]=function(e){return s.noGasSlippage=e}),icon:1,min:5,slippageList:["5","6","7"],onOnSubmit:l.onSubmitNoGasSlippage},null,8,["slippage","onOnSubmit"])])):Object(n["createCommentVNode"])("",!0)]),0===s.selected||1===s.selected?(Object(n["openBlock"])(),Object(n["createElementBlock"])("li",je,[Object(n["createElementVNode"])("div",we,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("limitExpiredTime")),1)]),Object(n["createElementVNode"])("div",Te,Object(n["toDisplayString"])(s.LimitExpiredDays)+" "+Object(n["toDisplayString"])(e.$t("days")),1)])):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",ye,[Object(n["createElementVNode"])("div",Se,[Object(n["createVNode"])(Mt,{active:s.tabActive1,"onUpdate:active":t[38]||(t[38]=function(e){return s.tabActive1=e}),shrink:"",color:"#558BED","title-active-color":"#333333","title-inactive-color":"#999999",style:{"--van-tabs-nav-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Rt,{name:"swap",title:e.$t("historyExchange")},null,8,["title"]),s.isSupportNoGas?(Object(n["openBlock"])(),Object(n["createBlock"])(Rt,{key:0,name:"noGas",title:e.$t("historyNoGas")},null,8,["title"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(Rt,{name:"limit",title:e.$t("historyLimitOrder")},null,8,["title"])]})),_:1},8,["active"]),Ne,Object(n["createVNode"])(zt,{modelValue:s.isCurrentToken,"onUpdate:modelValue":t[39]||(t[39]=function(e){return s.isCurrentToken=e}),"icon-size":"0.32rem",style:{"--van-checkbox-size":"1.1","--van-checkbox-label-margin":"0.1rem"}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("currentToken")),1)]})),_:1},8,["modelValue"]),"limit"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[s.loadingGetLimitOrder?(Object(n["openBlock"])(),Object(n["createBlock"])(Qt,{key:0,size:"0.4rem",style:{"margin-left":"0.36rem"}})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",{key:1,class:"iconfont icon-shuaxin",onClick:t[40]||(t[40]=Object(n["withModifiers"])((function(){return l.getLimitOrder&&l.getLimitOrder.apply(l,arguments)}),["stop"]))}))],64)):Object(n["createCommentVNode"])("",!0)]),"swap"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",$e,[(null===(vt=l.txs)||void 0===vt?void 0:vt.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(Wt,{key:0,items:l.txs,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,i=e.index,o=e.active;return[Object(n["createVNode"])(qt,{item:t,active:o,"data-index":i},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Ht,{item:t},null,8,["item"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(Jt,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.txs&&0===l.txs.length]])])):Object(n["createCommentVNode"])("",!0),"limit"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",xe,[(null===(ft=l.filterLimitOrders)||void 0===ft?void 0:ft.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(Wt,{key:0,items:l.filterLimitOrders,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,i=e.index,o=e.active;return[Object(n["createVNode"])(qt,{item:t,active:o,"data-index":i},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Yt,{item:t,onRefresh:l.refreshLimit},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(Jt,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.filterLimitOrders&&0===l.filterLimitOrders.length]])])):Object(n["createCommentVNode"])("",!0),"noGas"===s.tabActive1?(Object(n["openBlock"])(),Object(n["createElementBlock"])("ul",_e,[(null===(gt=l.filterNoGasTxList)||void 0===gt?void 0:gt.length)>0?(Object(n["openBlock"])(),Object(n["createBlock"])(Wt,{key:0,items:l.filterNoGasTxList,"min-item-size":200,"key-field":"id","page-mode":"",buffer:1e3,class:"scroller"},{default:Object(n["withCtx"])((function(e){var t=e.item,i=e.index,o=e.active;return[Object(n["createVNode"])(qt,{item:t,active:o,"data-index":i},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(Xt,{item:t,onRefresh:l.getNoGasList},null,8,["item","onRefresh"])]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])):Object(n["createCommentVNode"])("",!0),Object(n["withDirectives"])(Object(n["createVNode"])(Jt,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],l.filterNoGasTxList&&0===l.filterNoGasTxList.length&&!s.loadingGetNoGasList]])])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",Ve,[Object(n["createElementVNode"])("div",{class:"section-audit",onClick:t[41]||(t[41]=Object(n["withModifiers"])((function(){return l.goAudit&&l.goAudit.apply(l,arguments)}),["stop"]))},[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$t("securityAudit"))+": ",1),Ae])])],4),Object(n["createVNode"])(Kt,{visible:s.dialogVisibleSwap,"onUpdate:visible":t[42]||(t[42]=function(e){return s.dialogVisibleSwap=e}),swapInfo:s.swapInfo,slippage:l.slippage,onSubmit:l.submitSwap,loading:s.loadingConfirmSwap,chain:e.$store.getters.netId||(null===(kt=e.$route.params)||void 0===kt||null===(Ot=kt.id)||void 0===Ot||null===(jt=Ot.split)||void 0===jt||null===(wt=jt.call(Ot,"-"))||void 0===wt?void 0:wt[1])||"",nativePrice:s.nativePrice,gasPrice:l.customGasPrice},null,8,["visible","swapInfo","slippage","onSubmit","loading","chain","nativePrice","gasPrice"]),Object(n["createVNode"])(Zt,{visible:s.dialogVisibleLimit,"onUpdate:visible":t[43]||(t[43]=function(e){return s.dialogVisibleLimit=e}),limitInfo:s.limitInfo,onSubmit:l.submitLimitOrder,loading:s.loadingConfirmLimit,chain:e.$store.getters.netId||(null===(Tt=e.$route.params)||void 0===Tt||null===(yt=Tt.id)||void 0===yt||null===(St=yt.split)||void 0===St||null===(Nt=St.call(yt,"-"))||void 0===Nt?void 0:Nt[1])||"",limitGasU:s.limitGasU},null,8,["visible","limitInfo","onSubmit","loading","chain","limitGasU"]),Object(n["createVNode"])(ei,{show:s.dialogListRouterVisible,"onUpdate:show":t[44]||(t[44]=function(e){return s.dialogListRouterVisible=e}),title:e.$t("selectRouter"),style:{height:"60%","--van-popup-background-color":"#fff"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("ul",Ce,[Object(n["createElementVNode"])("li",Ee,[Object(n["createElementVNode"])("span",Be,Object(n["toDisplayString"])(e.$t("router")),1),Object(n["createElementVNode"])("span",Ie,Object(n["toDisplayString"])(s.isAmount?e.$t("expectedAmount"):e.$t("expectedPay")),1),Object(n["createElementVNode"])("span",Le,Object(n["toDisplayString"])(e.$t("priceImpact")),1),Pe]),Object(n["withDirectives"])(Object(n["createVNode"])(Jt,{description:e.$t("emptyData"),class:"empty"},null,8,["description"]),[[n["vShow"],s.listRouter&&0===s.listRouter.length]]),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.listRouter,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:o,class:"token-item",onClick:Object(n["withModifiers"])((function(e){return l.getSelectedRouter(o)}),["stop"])},[Object(n["createElementVNode"])("div",Ge,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(t.path,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:o},[t.symbol?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Fe,Object(n["toDisplayString"])(t.symbol),1)):Object(n["createCommentVNode"])("",!0),t.nextAmm&&"unknown"!==t.nextAmm?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ue,[Object(n["createVNode"])(Gt,{class:"icon-amm-logo","lazy-load":"","show-loading":"",round:"",src:"".concat(e.$store.state.s3BaseUrl,"swap/").concat(t.nextAmm,".jpeg"),"error-icon":i("aecc")},null,8,["src","error-icon"]),Re])):Object(n["createCommentVNode"])("",!0)],64)})),128)),0===o?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Me,Object(n["toDisplayString"])(e.$t("best")),1)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("span",ze,Object(n["toDisplayString"])(e.$f.formatNumber2(t.amount)),1),t.priceImpact<10?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)<.01?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[Qe],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"right-label flex-1",style:Object(n["normalizeStyle"])({color:l.formatPriceImpactColor(t.priceImpact)})},[Number(t.priceImpact)>40?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[He],64)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$f.formatNumber2(t.priceImpact,2))+"% ",1)],64))],4)),s.selectedRouterIndex===o?(Object(n["openBlock"])(),Object(n["createBlock"])(Lt,{key:2,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(Lt,{key:3,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,De)})),128))])]})),_:1},8,["show","title"])],64)}var We=i("ade3"),Je=i("1da1"),Ye=i("5530"),Xe=i("2909"),Ke=i("3835"),Ze=(i("96cf"),i("7db0"),i("d3b7"),i("b680"),i("4de4"),i("159b"),i("25f0"),i("d81d"),i("c740"),i("5319"),i("466d"),i("4d63"),i("c607"),i("2c3e"),i("00b4"),i("3ca3"),i("ddb0"),i("e9c4"),i("caad"),i("2532"),i("b64b"),i("a15b"),i("2ca0"),i("85b6")),et=i("57c9"),tt=i("9587"),it=function(e){return Object(n["pushScopeId"])("data-v-5a559431"),e=e(),Object(n["popScopeId"])(),e},nt={class:"flex items-center"},ot={class:"label mr-20"},at={key:0,class:"token-container"},st={class:"icon-token-container mr-5"},lt=["src"],rt={class:"mr-5"},ct=it((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),ut={class:"flex items-center mt-10"},dt={class:"label mr-20"},mt={key:0,class:"token-container"},ht={class:"icon-token-container mr-5"},pt=["src"],bt={class:"mr-5"},vt={class:"flex items-center justify-between mt-10"},ft={class:"label mr-20"},gt=it((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)}));function kt(e,t,i,o,a,s){var l,r,c,u=Object(n["resolveComponent"])("van-image"),d=Object(n["resolveComponent"])("van-loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{class:"tx-li-item van-hairline--bottom clickable",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(){return s.goLink&&s.goLink.apply(s,arguments)}),["stop"]))},[Object(n["createElementVNode"])("div",nt,[Object(n["createElementVNode"])("span",ot,Object(n["toDisplayString"])(e.$t("from")),1),i.item.from_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",at,[Object(n["createElementVNode"])("div",st,[Object(n["createVNode"])(u,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(i.item.from_token+"-"+i.item.chain),"error-icon":a.defaultIcon},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,lt)]),Object(n["createElementVNode"])("span",rt,Object(n["toDisplayString"])(e.$f.formatNumber2(s.formatUnits(i.item.from_amount,i.item.from_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(i.item.from_token_symbol||""),1)])):Object(n["createCommentVNode"])("",!0),ct]),Object(n["createElementVNode"])("div",ut,[Object(n["createElementVNode"])("span",dt,Object(n["toDisplayString"])(e.$t("to")),1),i.item.to_token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",mt,[Object(n["createElementVNode"])("div",ht,[Object(n["createVNode"])(u,{round:"",width:"0.4rem",height:"0.4rem","icon-size":"0.4rem","lazy-load":"","show-loading":"",src:e.$f.formatIcon(i.item.to_token+"-"+i.item.chain),"error-icon":a.defaultIcon},null,8,["src","error-icon"]),Object(n["createElementVNode"])("img",{class:"icon-svg icon-network",src:"".concat(e.$store.state.s3BaseUrl,"chain/").concat(i.item.chain,".png"),alt:"",srcset:""},null,8,pt)]),Object(n["createElementVNode"])("span",bt,Object(n["toDisplayString"])(e.$f.formatNumber2(s.formatUnits(i.item.to_amount,i.item.to_token_decimals))),1),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])((null===(l=i.item)||void 0===l?void 0:l.to_token_symbol)||""),1)])):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("div",vt,[Object(n["createElementVNode"])("span",ft,Object(n["toDisplayString"])(e.$f.formatDate(i.item.created_at)),1),1===i.item.status||2===i.item.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"status-txt",style:Object(n["normalizeStyle"])({color:s.formatStatusColor(i.item.status)})},Object(n["toDisplayString"])(s.formatStatus(i.item.status)),5)):(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:1},[gt,0===(null===(r=i.item)||void 0===r?void 0:r.status)||-1===(null===(c=i.item)||void 0===c?void 0:c.status)?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,size:"0.32rem",color:"#3F80F7","text-size":"0.24rem"},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("pending")),1)]})),_:1})):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"status-txt",style:Object(n["normalizeStyle"])({color:s.formatStatusColor(i.item.status)})},Object(n["toDisplayString"])(s.formatStatus(i.item.status)),5))],64))])])}var Ot=i("6779"),jt=i("aecc"),wt=i.n(jt),Tt={name:"NoGasTxItem",props:{item:Object},emits:["refresh"],data:function(){return{defaultIcon:wt.a,loading:!1}},methods:{formatUnits:Ot["utils"].formatUnits,formatStatus:function(e){var t,i={0:"",1:this.$t("cancelled"),2:this.$t("completed"),3:this.$t("unknownError1"),7:this.$t("unknownError1"),4:this.$t("notEnoughBalance"),5:this.$t("insufficientSlippage1"),8:this.$t("insufficientSlippage1"),6:this.$t("transferFailed"),10:this.$t("fail1")+"(".concat(this.$t("nonceError"),")"),11:this.$t("fail1")+"(".concat(this.$t("chainError"),")"),12:this.$t("fail1")+"(".concat(this.$t("signatureError"),")"),13:this.$t("fail1")+"(".concat(this.$t("approveGasPriceLow"),")"),15:this.$t("fail1")+"(".concat(this.$t("gasLimitHigh"),")"),16:this.$t("fail1")+"(".concat(this.$t("swapTokenRiskHigh"),")"),"-1":""};return null!==(t=i[e])&&void 0!==t?t:e},formatStatusColor:function(e){return 1===e||10===e||11===e||12===e?"#999999":2===e?"#12B886":0===e?"#3F80F7":"#FF0000"},goLink:function(){var e=this.$f.formatExplorerUrl(this.item.chain,this.item.executed_tx_hash,"tx");e&&this.item.executed_tx_hash&&this.$f.openBrowser(e)}}},yt=(i("959c"),i("6b0d")),St=i.n(yt);const Nt=St()(Tt,[["render",kt],["__scopeId","data-v-5a559431"]]);var $t=Nt,xt=function(e){return Object(n["pushScopeId"])("data-v-0574c0ab"),e=e(),Object(n["popScopeId"])(),e},_t={class:"select-box"},Vt={key:0,class:"token-container"},At={key:1},Ct=xt((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collapse-down"},null,-1)})),Et={class:"rules-content"},Bt={class:"search-bar",action:"/"},It={key:0,class:"pop-title"},Lt={style:{background:"#fff"}},Pt=["onClick"],Dt={class:"main"},Gt={key:0,class:"risk-status high"},Ft={key:0,class:"minor"},Ut=xt((function(){return Object(n["createElementVNode"])("span",{style:{flex:"1"}},null,-1)})),Rt={class:"right-label"},Mt=xt((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),zt={key:0,class:"minor"};function Qt(e,t,o,a,s,l){var r=Object(n["resolveComponent"])("van-image"),c=Object(n["resolveComponent"])("van-search"),u=Object(n["resolveComponent"])("van-empty"),d=Object(n["resolveComponent"])("van-icon"),m=Object(n["resolveComponent"])("DynamicScrollerItem"),h=Object(n["resolveComponent"])("DynamicScroller"),p=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",_t,[Object(n["createElementVNode"])("button",{class:"select-container",type:"button",onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return s.show=!0}),["stop"]))},[o.token.address||o.token.token?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Vt,[(Object(n["openBlock"])(),Object(n["createBlock"])(r,{key:o.token.logo_url||0,round:"",width:"0.32rem",height:"0.32rem","icon-size":"0.32rem",style:{"margin-right":"0.1rem"},"lazy-load":"","show-loading":"",src:o.token.logo_url?e.$f.formatIcon({logo_url:o.token.logo_url}):e.$f.formatIcon((o.token.token||o.token.address)+"-"+o.chain),"error-icon":i("aecc")},null,8,["src","error-icon"])),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(o.token.symbol||""),1)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",At,Object(n["toDisplayString"])(e.$t("pleaseSelectToken")),1)),Ct]),Object(n["createVNode"])(p,{show:s.show,"onUpdate:show":t[2]||(t[2]=function(e){return s.show=e}),title:e.$t("selectToken"),style:{height:"80vh","--van-popup-background-color":"#fff"},"lazy-render":!1},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Et,[Object(n["createElementVNode"])("form",Bt,[Object(n["createVNode"])(c,{modelValue:s.keyword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return s.keyword=e}),modelModifiers:{trim:!0},background:"#fff",shape:"round",placeholder:e.$t("searchContractORName"),onSearch:l.onSearch,onCancel:l.onCancel},null,8,["modelValue","placeholder","onSearch","onCancel"])]),""!==s.keyword||o.isBalance?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",It,Object(n["toDisplayString"])(e.$t("popularTokens")),1)),Object(n["createElementVNode"])("ul",Lt,[Object(n["withDirectives"])(Object(n["createVNode"])(u,{class:"empty",image:e.emptyNoDataLight,description:e.$t("empty")},null,8,["image","description"]),[[n["vShow"],s.searchTokens&&0===s.searchTokens.length&&!s.loading]]),Object(n["createVNode"])(h,{items:s.searchTokens,"min-item-size":30,"key-field":"address",class:"tokens"},{default:Object(n["withCtx"])((function(t){var a=t.item,c=t.index,u=t.active;return[Object(n["createVNode"])(m,{item:a,active:u,"data-index":c},{default:Object(n["withCtx"])((function(){var t;return[Object(n["createElementVNode"])("li",{class:"token-item",onClick:Object(n["withModifiers"])((function(e){return l.handleSelectToken(a)}),["stop"])},[Object(n["createVNode"])(r,{class:"icon-token",round:"",width:"0.6rem",height:"0.6rem","icon-size":"0.6rem","lazy-load":"","show-loading":"",src:a.logo_url?e.$f.formatIcon({logo_url:a.logo_url}):s.errorIcon,"error-icon":i("aecc")},null,8,["src","error-icon"]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("div",Dt,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.symbol),1),a.risk_score>60&&0===a.risk_level||a.risk_level<0?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",Gt,Object(n["toDisplayString"])(e.$t("highRisk")),1)):Object(n["createCommentVNode"])("",!0)]),(null!==a&&void 0!==a&&null!==(t=a.tags)&&void 0!==t&&t.includes("tokens")||null===a||void 0===a||!a.tags)&&a.address!==s.nativeToken?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",Ft,Object(n["toDisplayString"])(a.address.slice(0,6)+"..."+a.address.slice(-6)),1)):Object(n["createCommentVNode"])("",!0)]),Ut,Object(n["createElementVNode"])("div",Rt,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value):""),1),Mt,void 0!==a.price?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",zt,"$"+Object(n["toDisplayString"])(a.value?e.$f.formatNumber2(a.value*a.price):""),1)):Object(n["createCommentVNode"])("",!0)]),a.address===(o.token.address||o.token.token)?(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:0,size:"0.32rem",color:"#558BED",name:"success"})):(Object(n["openBlock"])(),Object(n["createBlock"])(d,{key:1,style:{opacity:"0"},size:"0.32rem",color:"#558BED",name:"success"}))],8,Pt)]})),_:2},1032,["item","active","data-index"])]})),_:1},8,["items"])])])]})),_:1},8,["show","title"])])}i("841c");var Ht=i("365c"),qt=i("c9d9"),Wt=i("aecc"),Jt=null,Yt={name:"SwapSelectToken",props:{tokens:Array,token:{type:Object,default:function(){return{address:"",chain:"",symbol:"",isbaseToken:!1}}},chain:String,hasNative:{type:Boolean,default:!0},isBalance:{type:Boolean,default:!1}},emits:["update:token"],data:function(){return{errorIcon:Wt,show:!1,keyword:"",searchTokens:this.tokens||[],loading:!1,nativeToken:qt["k"]}},computed:{searchResultTokens:function(){var e,t=this;return(null===(e=this.searchTokens)||void 0===e?void 0:e.length)>0?this.searchTokens:this.tokens.filter((function(e){return t.hasNative||e.address!==qt["k"]}))}},watch:{keyword:function(e){""!==e?this.tokenSearch():this.searchTokens=this.tokens},show:function(e){var t,i,n;e&&(this.searchTokens=this.tokens,this.keyword=""),console.log("isRefreshEnable",e),null===(t=window)||void 0===t||null===(i=t._tw_)||void 0===i||null===(n=i.isRefreshEnable)||void 0===n||n.call(i,"bridge",!e)}},methods:{onSearch:function(e){console.log(e),Jt&&(clearTimeout(Jt),Jt=null),this.search()},onCancel:function(){this.keyword="",this.show=!1},handleSelectToken:function(e){var t=this;if(null!==e&&void 0!==e&&e.address||null!==e&&void 0!==e&&e.token){var i=Object(Ye["a"])(Object(Ye["a"])({},e),{},{address:e.address||e.token,isbaseToken:this.token.isbaseToken});this.$emit("update:token",i),Object.keys(i).forEach((function(e){t.token[e]=i[e]})),this.show=!1}},tokenSearch:function(){var e=this;Jt&&(clearTimeout(Jt),Jt=null),Jt=setTimeout((function(){e.search()}),500)},search:function(){var e=this;if(""!==this.keyword){var t=new RegExp(this.keyword,"i"),i=this.tokens.filter((function(i){return(t.test(i.address)||t.test(i.symbol)||t.test(i.name))&&(e.hasNative||i.address!==qt["k"])}));this.loading=!0,Object(Ht["V"])(this.keyword,this.chain).then((function(t){var n,o,a,s=null===(n=t.filter)||void 0===n||null===(o=n.call(t,(function(t){return t.chain===e.chain&&!i.some((function(e){return e.token===t.token}))})))||void 0===o||null===(a=o.map)||void 0===a?void 0:a.call(o,(function(e){return Object(Ye["a"])(Object(Ye["a"])({},e),{},{address:e.token})}));e.searchTokens=[].concat(Object(Xe["a"])(i),Object(Xe["a"])(s))})).catch((function(t){console.log(t),e.searchTokens=[]})).finally((function(){e.loading=!1}))}else this.searchTokens=this.tokens.filter((function(t){return e.hasNative||t.address!==qt["k"]}))}}};i("7bce");const Xt=St()(Yt,[["render",Qt],["__scopeId","data-v-0574c0ab"]]);var Kt=Xt,Zt=i("a2ef"),ei=i("ce94"),ti=i("cf1a"),ii=i("449c"),ni=i("497e"),oi=i("fadf"),ai=function(e){return Object(n["pushScopeId"])("data-v-f897fa40"),e=e(),Object(n["popScopeId"])(),e},si={class:"select-box"},li={class:"flex items-center"},ri={style:{background:"#fff",padding:"0.2rem 0.3rem 1rem 0.3rem","--van-cell-background-color":"transparent"}},ci={class:"setting-title"},ui={class:"card-container"},di={class:"font-500"},mi={class:"color-999 ml-5"},hi=ai((function(){return Object(n["createElementVNode"])("div",{class:"setting-title"},"Gas Price(GWEI)",-1)})),pi={class:"slippage-setting"},bi=["onClick"],vi={class:"color-999"},fi={class:"mt-5 font-500"};function gi(e,t,i,o,a,s){var l=Object(n["resolveComponent"])("van-field"),r=Object(n["resolveComponent"])("van-button"),c=Object(n["resolveComponent"])("van-action-sheet");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",si,[Object(n["createElementVNode"])("div",li,[Object(n["createElementVNode"])("i",{class:"iconfont icon-settings",style:{color:"#999999"},onClick:t[0]||(t[0]=Object(n["withModifiers"])((function(e){return a.show=!0}),["stop"]))})]),Object(n["createVNode"])(c,{show:a.show,"onUpdate:show":t[2]||(t[2]=function(e){return a.show=e}),title:e.$t("gasSetting"),style:{"--van-popup-background-color":"#fff","min-height":"40%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",ri,[Object(n["createElementVNode"])("div",ci,Object(n["toDisplayString"])(e.$t("gasFee"))+"(BNB)",1),Object(n["createElementVNode"])("div",ui,[Object(n["createElementVNode"])("span",di,Object(n["toDisplayString"])(s.estimatedB),1),Object(n["createElementVNode"])("span",mi,"â‰ˆ"+Object(n["toDisplayString"])(s.estimatedU),1)]),hi,Object(n["createElementVNode"])("div",pi,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(s.gasPriceList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:t,type:"button",class:Object(n["normalizeClass"])({active:a.gasPriceValue===e.value}),onClick:function(t){return a.gasPriceValue=e.value}},[Object(n["createElementVNode"])("span",vi,Object(n["toDisplayString"])(e.name),1),Object(n["createElementVNode"])("span",fi,Object(n["toDisplayString"])(e.value),1)],10,bi)})),128)),Object(n["createVNode"])(l,{class:"input",type:"number",min:s.standardGasPriceD,placeholder:e.$t("custom"),modelValue:a.gasPriceValue,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.gasPriceValue=e}),onBlur:s.handleBlur,clearable:""},null,8,["min","placeholder","modelValue","onBlur"])]),Object(n["createVNode"])(r,{block:"",type:"primary","native-type":"button",color:"#3F80F7",class:"submit-btn",style:Object(n["normalizeStyle"])({marginTop:"1.5rem"}),onClick:Object(n["withModifiers"])(s.submitSwapGasSet,["stop"])},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$t("confirm")),1)]})),_:1},8,["style","onClick"])])]})),_:1},8,["show","title"])])}var ki=i("901e"),Oi=i.n(ki),ji=i("2c28"),wi={name:"SwapGasSet",props:{standardGasPrice:{type:[Number,String],default:"3000000000"},gas:{type:[Number,String],default:qt["d"]},nativePrice:[Number,String]},emits:["updateGasPrice"],setup:function(){var e=Object(ji["useStorage"])("gasSetting",{},localStorage);return{gasSetting:e}},data:function(){var e=this.$store.getters.netId,t=this.standardGasPrice;if(e){var i,n=null===(i=this.gasSetting)||void 0===i?void 0:i[e];t=(null===n||void 0===n?void 0:n.customGasPrice)||("bsc"===e?qt["c"]:this.standardGasPrice)}return{show:!1,gasPriceValue:new Oi.a(t||this.standardGasPrice).div(Math.pow(10,9)).toFixed()}},computed:{standardGasPriceD:function(){return new Oi.a(this.standardGasPrice).div(Math.pow(10,9)).toFixed(0)},gasPriceList:function(){var e=new Oi.a(this.standardGasPrice).div(Math.pow(10,9)),t=new Oi.a(4).div(3),i=new Oi.a(6).div(3);return[{name:this.$t("standard"),value:e.toFixed(0)},{name:this.$t("fast1"),value:t.times(e).toFixed(0)},{name:this.$t("instant"),value:i.times(e).toFixed(0)}]},estimatedB:function(){var e=this.gas;return e?this.$f.formatNumber2(new Oi.a(e.toString()).times(this.gasPriceValue).div(String(Math.pow(10,9))).toFixed()||"0",2):"0"},estimatedU:function(){var e=this.gas;if(!e)return"0";var t=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new Oi.a(e.toString()).times(t).times(this.gasPriceValue).div(String(Math.pow(10,9))).toFixed()||"0",2)}},watch:{show:function(e){if(e){var t=this.$store.getters.netId,i=this.standardGasPrice;if(t){var n,o=null===(n=this.gasSetting)||void 0===n?void 0:n[t];i=(null===o||void 0===o?void 0:o.customGasPrice)||("bsc"===t?qt["c"]:this.standardGasPrice)}this.gasPriceValue=new Oi.a(i).div(Math.pow(10,9)).toFixed()||this.standardGasPrice}}},methods:{handleBlur:function(){var e=new Oi.a(this.standardGasPrice).div(Math.pow(10,9));this.show&&e.gt(this.gasPriceValue)&&(this.gasPriceValue=e.toFixed(0))},submitSwapGasSet:function(){var e=new Oi.a(this.gasPriceValue||"0").times(Math.pow(10,9)).toFixed(0),t=this.$store.getters.netId;if(t){var i=this.gasSetting[t];this.gasSetting=Object(Ye["a"])(Object(Ye["a"])({},this.gasSetting),{},Object(We["a"])({},t,Object(Ye["a"])(Object(Ye["a"])({},i),{},{customGasPrice:e}))),this.$emit("updateGasPrice",this.gasSetting)}this.show=!1}}};i("eb18");const Ti=St()(wi,[["render",gi],["__scopeId","data-v-f897fa40"]]);var yi=Ti,Si=i("3edc"),Ni=i("f465"),$i=i("335a"),xi=null,_i=null,Vi=null,Ai=null,Ci=null,Ei=null,Bi=null;Si["a"].props.components.default=function(){return{OpenIndicator:{render:function(){return Object(n["h"])("span",{innerHTML:'<svg height="8" viewBox="0 0 14 8" width="14" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd" transform="matrix(0 1 -1 0 16 -5)"><path d="m0 0h18v18h-18z"/><path d="m12.8008158 9.14463395c-.0305856.13208319-.0973435.25748808-.2002738.36041835l-6.0104076 6.0104076c-.29289322.2928933-.76776696.2928933-1.06066017 0-.29289322-.2928932-.29289322-.7677669 0-1.0606601l5.48233267-5.48233272-5.48147681-5.48147682c-.29289322-.29289322-.29289322-.76776696 0-1.06066017.29289321-.29289322.76776695-.29289322 1.06066017 0l6.01040764 6.01040764c.1909127.19091266.2573853.45914247.1994179.70389622z" fill="#999"/></g></svg>'})}}}};var Ii="2",Li=["limit","limit","swap","noGas"],Pi={name:"Swap",components:{PercentStep:Ze["a"],TxItem:et["a"],SwapSelectToken:Kt,ConfirmSwap:Zt["a"],PriceChart:ti["a"],SlippageButton:ii["a"],ConfirmLimit:ei["a"],LimitTxItem:tt["a"],vSelect:Si["a"],RebateImg:ni["a"],SwapModeSet:oi["a"],NoGasTxItem:$t,SwapGasSet:yi},data:function(){var e,t,i,n,o,a,s,l,r,c,u,d,m=null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i?void 0:i.call(t,"-"),h=Object(Ke["a"])(m,2),p=h[0],b=h[1],v=!localStorage.autoSlippage||JSON.parse(localStorage.autoSlippage),f=localStorage.swapSlippage||"auto",g=this.$route.params.type?Number(this.$route.params.type):2;return 3!==g||null!==(n=window)&&void 0!==n&&null!==(o=n._tw_)&&void 0!==o&&o.appExchangeNoGas&&"eth"!==b||(g=2),{LimitExpiredDays:qt["f"],nativeToken:qt["k"],height:100,swapTokenInfo:{},tokens:[],token1:{address:p||"",chain:b||"",balance:0,symbol:""},token2:{address:"",chain:"",balance:0,symbol:""},fromAmount:"",toAmount:"",baseToken:{token:{symbol:""},pairs:[]},baseTokenExtra:{},selected:g,dataX:[],dataY:[],swapQuoteInfo:{},isPairShowMore:!1,quoteLoading:!1,allowance:0,loadingApprove:!1,loadingSwap:!1,dialogVisibleSwap:!1,swapSubmitInfo:{},swapInfo:{fromToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},toToken:{symbol:"",name:"",decimals:18,address:"",logoURI:""},isAmountOut:!1},loadingConfirmSwap:!1,tokensPrice:{},swapRouterPath:[],nativePrice:0,initTxs:[],txsLoading:!1,isCurrentToken:!0,userBalanceTokens:[],isAndroid:!(null===(a=window)||void 0===a||null===(s=a._tw_)||void 0===s||!s.appGetPlatform),gasPrice:"0",spender:"",isTaxHigh:!1,isCannotSellAll:!1,baseTokenPrice:0,isTax:!1,txsTokens:sessionStorage.txsTokens?JSON.parse(sessionStorage.txsTokens||[]):[],isAmount:!0,swapPathList:[],listRouter:[],dialogListRouterVisible:!1,selectedRouterIndex:0,openLp:null===(l=window)||void 0===l||null===(r=l._tw_)||void 0===r?void 0:r.openLp,tx:{},userTokenList:[],activeTab:Number(this.$route.query.dir)||0,limitFromToken:{address:"",chain:"",balance:0,symbol:"",price:0},limitFromAmount:"",limitToToken:{address:p||"",chain:b||"",balance:0,symbol:"",price:0},limitToAmount:"",limitPrice:"",loadingLimit:!1,dialogVisibleLimit:!1,loadingConfirmLimit:!1,limitInfo:{fromToken:{address:"",chain:"",balance:0,symbol:"",price:0},toToken:{address:p||"",chain:b||"",balance:0,symbol:"",price:0},fromAmount:"",toAmount:"",targetToken:"",targetLimitPrice:""},limitAllowance:0,loadingLimitApprove:!1,quoteLimitLoading:!1,tabActive1:null!==(c=Li[g])&&void 0!==c?c:"limit",limitOrders:[],limitMinReturn:0,loadingGetLimitOrder:!1,limitToken1:{address:p||"",chain:b||"",balance:0,symbol:"",price:0},limitAmount1:"",limitToken2:{address:"",chain:"",balance:0,symbol:"",price:0},limitAmount2:"",rateType:!0,autoSlippage:v,slippageInfo:{slippage:Ii,autoSlippage:!0},limitQuoteLoading:!1,limitSlippage:localStorage.limitSlippage||"5",loadingAllowance:!1,loadingLimitAllowance:!1,triggerPrice:"",limitGasU:"0",autoSwapMode:"fast",customSwapMode:localStorage.swapMode||"auto",autoSlippageValue:Ii,customSlippage:f,hasMEVBot:!1,isHotToken:!1,noGasSlippage:localStorage.noGasSlippage||"5",noGasTxList:[],loadingGetNoGasList:!1,isHasUnTx:!1,isSupportNoGas:null===(u=window)||void 0===u||null===(d=u._tw_)||void 0===d?void 0:d.appExchangeNoGas,gasBalance:0,isNoGas:!1,gasPriceKey:0,gasSetting:$i["a"].get("gasSetting",{})}},computed:{swapMode:function(){return"auto"===this.customSwapMode?this.autoSwapMode:this.customSwapMode},slippage:function(){return"auto"===this.customSlippage?this.autoSlippageValue:this.customSlippage},typeTabs:function(){return[{name:this.$t("buy"),type:0},{name:this.$t("sell"),type:1}]},types:function(){var e,t;return[].concat(Object(Xe["a"])(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas&&"eth"!==this.$store.getters.netId&&this.isNoGas?[{name:this.$t("noGasSwapT"),value:3}]:[{name:this.$t("swapT"),value:2}]),[{name:this.$t("limitT"),value:0},{name:this.$t("stopLimit"),value:1}])},typeName:function(){var e,t,i,n=this;return null===(e=this.types)||void 0===e||null===(t=e.find)||void 0===t||null===(i=t.call(e,(function(e){return e.value===n.selected})))||void 0===i?void 0:i.name},netId:function(){return this.$store.getters.netId||""},tokenInfo:function(){var e,t,i,n;if("Swap"!==this.$route.name)return{id:"",token:"",chain:""};var o=null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i?void 0:i.call(t,"-"),a=Object(Ke["a"])(o,2),s=a[0],l=a[1];return{id:null===(n=this.$route.params)||void 0===n?void 0:n.id,token:s,chain:l}},tabs:function(){return[{name:this.$t("buy"),value:"buy"},{name:this.$t("sell"),value:"sell"}]},isApprove:function(){if(!this.allowance)return!1;var e=this.fromToken.decimals||0;return Ot["utils"].parseUnits(new Oi.a(this.fromAmount||0).toFixed(e),e).lte(this.allowance)},isLimitApprove:function(){if(!this.limitAllowance)return!1;var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=e.decimals||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return Ot["utils"].parseUnits(new Oi.a(i||0).toFixed(t),t).lte(this.limitAllowance)},minReceived:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},i=t[t.length-1];return new Oi.a(null===i||void 0===i?void 0:i.amount).times(100-Number(this.slippage)).div(Math.pow(10,((null===i||void 0===i?void 0:i.decimals)||0)+2)).toFixed((null===i||void 0===i?void 0:i.decimals)||0)},maxSold:function(){var e,t=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.routerPath)||{},i=t[0];return new Oi.a(null===i||void 0===i?void 0:i.amount).times(1+Number(this.slippage)/100).div(Math.pow(10,(null===i||void 0===i?void 0:i.decimals)||0)).toFixed((null===i||void 0===i?void 0:i.decimals)||0)},txs:function(){if(this.isCurrentToken){var e,t,i,n,o,a,s,l,r,c,u,d=null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[0],m=null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[1],h=null===(r=this.$store.state)||void 0===r||null===(c=r.chainConfig)||void 0===c?void 0:c[m],p=null===h||void 0===h?void 0:h.wmainWrapper;return d=d===qt["k"]?p:d,null===(u=this.initTxs)||void 0===u?void 0:u.filter((function(e){return e.from_address===d||e.to_address===d||(d===qt["k"]||d===p)&&(e.from_address===qt["k"]||e.from_address===p||e.to_address===qt["k"]||e.to_address===p)}))}return this.initTxs},filterLimitOrders:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.limitOrders)||void 0===e?void 0:e.filter((function(e){return e.target_token===t}))}return this.limitOrders},filterNoGasTxList:function(){if(this.isCurrentToken){var e,t=this.limitToken1.address;return null===(e=this.noGasTxList)||void 0===e?void 0:e.filter((function(e){return e.from_token===t||e.to_token===t}))}return this.noGasTxList},taxStr:function(){var e,t,i,n,o,a,s,l=(null===(e=this.swapQuoteInfo)||void 0===e?void 0:e.totalTax)||((null===(t=this.swapQuoteInfo)||void 0===t?void 0:t.total_sell_tax)||0)+((null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.total_buy_tax)||0);return l>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(l,1),"%)"):0===this.activeTab&&(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(a=this.baseTokenExtra)||void 0===a?void 0:a.buy_tax,1),"%)"):1===this.activeTab&&(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.sell_tax)>0?"(".concat(this.$t("tax"),": ").concat(this.$f.formatNumber2(null===(s=this.baseTokenExtra)||void 0===s?void 0:s.sell_tax,1),"%)"):""},priceImpactV:function(){if(!Number(this.fromAmount)&&!Number(this.toAmount))return"";var e=this.swapQuoteInfo.routerPath,t=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[0]:null,i=(null===e||void 0===e?void 0:e.length)>0?null===e||void 0===e?void 0:e[e.length-1]:null;if(t&&i){var n=this.swapQuoteInfo.from_price,o=this.swapQuoteInfo.to_price,a=Ot["utils"].formatUnits(t.amount,t.decimals),s=Ot["utils"].formatUnits(i.amount,i.decimals);return new Oi.a(a).times(n).div(new Oi.a(s).times(o)).minus(1).abs()}return""},priceImpact:function(){return this.priceImpactV?this.$f.formatNumber2(this.priceImpactV.times(100).toFixed(),2)+"%":""},swapButtonColor:function(){var e,t,i,n;return this.$store.state.currentAccount&&window.ethereum?null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#999":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(n=i.gt)&&void 0!==n&&n.call(i,.1)?"#F7933F":0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},limitButtonColor:function(){return this.$store.state.currentAccount&&window.ethereum?0===this.activeTab?this.$store.getters.upColor[3]:1===this.activeTab?this.$store.getters.downColor[3]:"#558BED":"#999"},priceImpactColor:function(){var e,t,i,n,o,a;return null!==(e=this.priceImpactV)&&void 0!==e&&null!==(t=e.gt)&&void 0!==t&&t.call(e,.4)?"#F81111":null!==(i=this.priceImpactV)&&void 0!==i&&null!==(n=i.gt)&&void 0!==n&&n.call(i,.1)?"#F7933F":null!==(o=this.priceImpactV)&&void 0!==o&&null!==(a=o.gt)&&void 0!==a&&a.call(o,.05)?"#f8be46":""},swapTokens:function(){var e=Object(Xe["a"])(this.userBalanceTokens.slice());return this.tokens.slice().forEach((function(t){var i=e.find((function(e){return e.id===t.id}));i?i.logo_url=t.logo_url:e.push(t)})),e.length>0?e:this.tokens.slice()},isShow:function(){var e,t,i,n,o,a,s,l,r=this.$store.state.chainConfig||$i["a"].get("chainConfig"),c=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";return!(!r||!c)&&(null!==(o=null===(a=r[c])||void 0===a||null===(s=a.swaps)||void 0===s||null===(l=s.some)||void 0===l?void 0:l.call(s,(function(e){return e.router_address})))&&void 0!==o&&o)},fromToken:function(){return 1===this.activeTab?this.token1:this.token2},toToken:function(){return 1===this.activeTab?this.token2:this.token1},disabled1:function(){var e,t;if(!Number(this.limitPrice))return!0;var i=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 1===this.activeTab&&this.limitPrice<i},disabled2:function(){var e,t;if(!Number(this.limitPrice))return!0;var i=null===(e=this.baseToken)||void 0===e||null===(t=e.token)||void 0===t?void 0:t.current_price_usd;return 0===this.activeTab&&this.limitPrice>i},estimatedFee:function(){var e,t,i=null!==(e=this.swapInfo.gasValue)&&void 0!==e?e:qt["d"];if(!i)return"0";var n=this.$store.getters.netId,o=n?Object(Ye["a"])({},(null===(t=this.gasSetting)||void 0===t?void 0:t[n])||{}):{},a=(null===o||void 0===o?void 0:o.customGasPrice)||qt["c"],s="bsc"===n?a:this.gasPrice,l=this.nativePrice;return this.$f.formatNumberCurrencyUnit(new Oi.a(i.toString()).times(l).times(s).div(String(Math.pow(10,18))).toFixed()||"0",2)},customGasPrice:function(){var e,t,i=this.$store.getters.netId,n=(null===(e=this.gasSetting)||void 0===e||null===(t=e[i])||void 0===t?void 0:t.customGasPrice)||qt["c"],o="bsc"===i?n:this.gasPrice;return o}},watch:{"$route.params.id":function(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=Ii,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.baseTokenExtra={},this.baseTokenPrice=0,this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.selectedRouterIndex=0,this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getTokenDetails(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance())},"$store.state.currentAccount":function(e){e&&"Swap"===this.$route.name&&(this.autoSlippageValue=Ii,this.isTaxHigh=!1,this.isCannotSellAll=!1,this.selectedRouterIndex=0,this.getUserAllTxs(),this.getUserTokenList(),this.getSwapTokenList(),this.getAllowance(),this.getTokenDetails(),this.getLimitAllowance())},isPairShowMore:function(){this.getLeftHeight()},"$store.state.ws.tx":function(e){var t=this;this.tx=e,Ai||(Ai=setTimeout((function(){var e,i=t.tx,n=t.$store.state.chainConfig||$i["a"].get("chainConfig"),o=t.baseToken.token.chain||"",a=null===n||void 0===n?void 0:n[o],s=null===a||void 0===a?void 0:a.wmainWrapper,l=null===(e=t.baseToken)||void 0===e?void 0:e.token.token;l===qt["k"]&&o&&s&&(l=s);var r=t.baseToken.token.price_change,c=100*Number(t.baseToken.token.current_price_usd)/(100+Number(r));i.from_address===l?(t.baseToken.token.current_price_usd=i.from_price_usd,t.baseToken.token.price_change=100*(i.from_price_usd-c)/c):i.to_address===l&&(t.baseToken.token.current_price_usd=i.to_price_usd,t.baseToken.token.price_change=100*(i.to_price_usd-c)/c),i.from_address===t.limitToken1.address?t.limitToken1.price=i.from_price_usd:i.to_address===t.limitToken1.address&&(t.limitToken1.price=i.to_price_usd),i.to_address===t.limitToken2.address?t.limitToken2.price=i.to_price_usd:i.from_address===t.limitToken2.address&&(t.limitToken2.price=i.from_price_usd),t.dataY=t.dataY.map((function(e,i,n){return i===n.length-1?t.baseToken.token.current_price_usd:e}));var u=t.baseToken.pairs.findIndex((function(e){return e.pair===i.pair_address}));if(u>-1){var d=t.baseToken.pairs[u];i.from_address===d.token0_address?(i.from_reserve&&(t.baseToken.pairs[u].reserve0=i.from_reserve,t.baseToken.pairs[u].token0_price_usd=i.from_price_usd),i.to_reserve&&(t.baseToken.pairs[u].reserve1=i.to_reserve,t.baseToken.pairs[u].token1_price_usd=i.to_price_usd)):(i.to_reserve&&(t.baseToken.pairs[u].reserve0=i.to_reserve,t.baseToken.pairs[u].token0_price_usd=i.to_price_usd),i.from_reserve&&(t.baseToken.pairs[u].reserve1=i.from_reserve,t.baseToken.pairs[u].token1_price_usd=i.from_price_usd))}Ai=null}),1e3))},selected:function(e){var t,i,n;(this.$router.replace({name:"Swap",params:Object(Ye["a"])(Object(Ye["a"])({},this.$route.params),{},{type:e})}),2===this.selected)?(null===(t=this.$refs)||void 0===t||null===(i=t.percentStep)||void 0===i||null===(n=i.handleClick)||void 0===n||n.call(i,0),this.fromAmount="",this.toAmount="",this.getAllowance(),this.tabActive1="swap"):0===this.selected||1===this.selected?(this.supportChainLimit(),this.getLimitAllowance(),this.limitPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.triggerPrice=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"",this.tabActive1="limit"):3===this.selected&&(this.supportChainLimit(),this.getLimitAllowance(),this.tabActive1="noGas")},tabActive1:function(e){"swap"===e?this.getUserAllTxs():"limit"===e?this.getLimitOrder():"noGas"===e&&this.getNoGasList()}},mounted:function(){this.getFeeInfo()},activated:function(){var e,t,i,n,o,a,s,l,r,c,u;this.$f.setSwapSendType(""),this.handleWalletAddress(!1),this.selected=this.$route.params.type?Number(this.$route.params.type):2,3!==this.selected||null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas&&"eth"!==this.$store.getters.netId||(this.selected=2),this.tabActive1=null!==(i=Li[this.selected])&&void 0!==i?i:"swap";var d=sessionStorage.swap_token1?JSON.parse(sessionStorage.swap_token1):"",m=null===(n=this.$route.params)||void 0===n||null===(o=n.id)||void 0===o||null===(a=o.split)||void 0===a||null===(s=a.call(o,"-"))||void 0===s?void 0:s[0],h=this.$store.getters.netId||(null===(l=this.$route.params)||void 0===l||null===(r=l.id)||void 0===r||null===(c=r.split)||void 0===c||null===(u=c.call(r,"-"))||void 0===u?void 0:u[1])||"";m&&(m!==this.token1.address||d&&d.address!==m)?(this.token1={address:m||"",chain:h||"",balance:0,symbol:""},this.limitToken1=Object(Ye["a"])({},this.token1)):m||!d||h!==d.chain||this.token1.address||(this.limitToken1=Object(Ye["a"])({},this.swap_token1));var p=sessionStorage.swap_token2?JSON.parse(sessionStorage.swap_token2):"";p&&h===p.chain&&!this.token2.address&&(this.token2=Object(Ye["a"])({},p),this.limitToken2=Object(Ye["a"])({},p)),this.getBaseToken(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),"swap"===this.tabActive1?this.getUserAllTxs():"limit"===this.tabActive1?this.getLimitOrder():"noGas"===this.tabActive1&&this.getNoGasList(),this.getLimitAllowance(),this.getGasBalance(),this.getNativeTokenPrice(),this.getGasPrice()},methods:{init:function(){this.getBaseToken(),this.getUserAllTxs(),this.getUserTokenList(),this.getAllowance(),this.getSwapTokenList(),2===this.selected?this.supportChain():0!==this.selected&&1!==this.selected&&3!==this.selected||this.supportChainLimit(),this.getLimitAllowance(),this.getLimitOrder(),this.getNoGasList()},formatUnits:Ot["utils"].formatUnits,formatPrice:function(e){return this.$f.formatNumber(e&&""!==e&&this.$store.state.tokensPrice[e]||0)},getPrice:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return!e||!t||isNaN(Number(e))||isNaN(Number(t))?"0":this.$f.formatNumber2(new Oi.a(t).times(100-i).div(100*e).toFixed(7))||"0"},getFeeInfo:function(){var e=this;Object(Ht["u"])().then((function(t){var i=e.$store.getters.netId;e.$store.state.feeInfo=e.$f.formatFee(t,i)}))},watchFromAmount:function(){if(!this.quoteLoading||this.isAmount){var e=this.fromAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.toAmount)?(this.toAmount=0,this.quoteLoading=!1):t&&(this.isAmount=!0,this.toAmount="",this.getQuoteInfo())}},watchToAmount:function(){if(!this.quoteLoading||!this.isAmount){var e=this.toAmount,t=Number(e);""===e||"."===e?(this.fromAmount="",this.toAmount="",this.quoteLoading=!1):0===t&&0!==Number(this.fromAmount)?(this.fromAmount=0,this.quoteLoading=!1):t&&(this.fromAmount="",this.isAmount=!1,this.getQuoteInfo(!1))}},handleFromAmountMax:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.fromToken.balance||0;if(e){var i,n=this.fromToken.decimals||0;if((null===(i=this.fromToken)||void 0===i?void 0:i.address)===qt["k"]){var o=this.fromToken.chain,a=qt["j"][o]||.01;t=new Oi.a(t).minus(a).times(e).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0]}else t=new Oi.a(t).times(e).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n,"})?")))[0];0===Number(t)&&(t="")}this.fromAmount=t<0?0:t,this.watchFromAmount()},handlePercentChange:function(e,t){if(!t){var i=e/100,n=this.fromToken.balance||0;if(i){var o,a=this.fromToken.decimals||0;if((null===(o=this.fromToken)||void 0===o?void 0:o.address)===qt["k"]){var s=this.fromToken.chain,l=qt["j"][s]||.01;n=new Oi.a(n).minus(l).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0]}else n=new Oi.a(n).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0];0===Number(n)&&(n="")}else n="";this.fromAmount!==n&&(this.fromAmount=n<0?0:n,this.watchFromAmount())}},handleToAmountMax:function(){this.toAmount=this.toToken.balance||0,this.watchToAmount()},switchTab:function(e){this.activeTab=e,2===this.selected?(this.$refs.percentStep.handleClick(0),this.fromAmount="",this.toAmount="",this.getAllowance()):0!==this.selected&&1!==this.selected&&3!==this.selected||(this.$refs.percentStep1.handleClick(0),this.limitAmount1="",this.limitAmount2="",this.getLimitAllowance())},handlePercentChange1:function(e,t){if(!t){var i=e/100,n=0===this.activeTab?this.limitToken2:this.limitToken1,o=n.balance||0;if(i){var a=n.decimals||18;if((null===n||void 0===n?void 0:n.address)===qt["k"]){var s=n.chain,l=qt["j"][s]||.01;o=new Oi.a(o).minus(l).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0]}else o=new Oi.a(o).times(i).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0];0===Number(o)&&(o="")}else o="";0===this.activeTab?this.limitAmount2!==o&&(this.limitAmount2=o<0?0:o,this.watchLimitAmount2()):this.limitAmount1!==o&&(this.limitAmount1=o<0?0:o,this.watchLimitAmount1())}},watchLimitAmount1:function(){var e=this;this.limitQuoteLoading||(Ci&&(clearTimeout(Ci),Ci=null),Ci=setTimeout((function(){var t=e.limitAmount1,i=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===i&&0!==Number(e.limitAmount2)?e.limitAmount2=0:i&&(e.limitAmount2="",e.watchLimitPrice())}),500))},watchLimitAmount2:function(){var e=this;this.limitQuoteLoading||(Ei&&(clearTimeout(Ei),Ei=null),Ei=setTimeout((function(){var t=e.limitAmount2,i=Number(t);""===t||"."===t?(e.limitAmount1="",e.limitAmount2=""):0===i&&0!==Number(e.limitAmount1)?e.limitAmount1=0:i&&(e.limitAmount1="",e.watchLimitPrice())}),500))},watchLimitPrice:function(){var e=this;this.supportChainLimit()&&(Number(this.limitPrice)&&(Number(this.limitAmount1)||Number(this.limitAmount2))&&this.limitToken1.address!==this.limitToken2.address&&""!==this.$store.state.wallet?(Bi&&(clearTimeout(Bi),Bi=null),Bi=setTimeout((function(){var t=0===e.activeTab?e.limitToken2:e.limitToken1,i=1===e.activeTab?e.limitToken2:e.limitToken1,n=Ot["utils"].parseUnits((0===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",t.decimals).toString(),o=Ot["utils"].parseUnits((1===e.activeTab?e.limitAmount2:e.limitAmount1)||"0",i.decimals).toString(),a=t.address,s=i.address,l={from_token:a,to_token:s,amountIn:n,amountOut:o};3===e.selected&&(l.extraGas="250000"),e.limitQuoteLoading=!0,Object(Ht["U"])(l).then((function(t){var n,o,a,s;if(1!==t.toWrapper&&2!==t.toWrapper){e.limitGasU=t.gasU;var l=null===t||void 0===t||null===(n=t.routerPath)||void 0===n||null===(o=n.find)||void 0===o?void 0:o.call(n,(function(t){return t.address===e.limitToken1.address})),r=null===t||void 0===t||null===(a=t.routerPath)||void 0===a||null===(s=a.find)||void 0===s?void 0:s.call(a,(function(t){return t.address===e.limitToken2.address}));if(e.limitToken1.price=l.price,e.limitToken2.price=r.price,new Oi.a((null===l||void 0===l?void 0:l.amount)||0).lte(0)||new Oi.a((null===r||void 0===r?void 0:r.amount)||0).lte(0)||!t.isCanUseGas)e.$dialog.alert({title:e.$t("tips"),message:e.$t("limitOrderAmount"),confirmButtonText:e.$t("okay"),confirmButtonColor:"#558BED"});else{3===e.selected?e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=Ot["utils"].formatUnits(l.amount,l.decimals):e.limitAmount2=Ot["utils"].formatUnits(r.amount,r.decimals):e.limitAmount1?e.limitAmount2=Ot["utils"].formatUnits(r.amount,r.decimals):e.limitAmount2&&(e.limitAmount1=Ot["utils"].formatUnits(l.amount,l.decimals)):e.limitPrice&&e.limitAmount1&&e.limitAmount2?0===e.activeTab?e.limitAmount1=new Oi.a(Ot["utils"].formatUnits(l.amount,l.decimals)).times(l.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]:e.limitAmount2=new Oi.a(Ot["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(l.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount1?e.limitAmount2=new Oi.a(Ot["utils"].formatUnits(r.amount,r.decimals)).times(e.limitPrice||0).div(l.price||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken2.decimals,"})?")))[0]:e.limitPrice&&e.limitAmount2&&(e.limitAmount1=new Oi.a(Ot["utils"].formatUnits(l.amount,l.decimals)).times(l.price||0).div(e.limitPrice||1).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(e.limitToken1.decimals,"})?")))[0]);var c=new Oi.a(e.limitSlippage||0);3===e.selected&&(c=new Oi.a(e.noGasSlippage||0)),c=new Oi.a(1).minus(c.div(100));var u=0===e.activeTab?e.limitAmount1:e.limitAmount2;e.limitMinReturn=new Oi.a(u||0).times(c).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(i.decimals,"})?")))[0]}}else e.limitQuoteLoading=!1})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.limitQuoteLoading=!1}))}),500)):this.limitToken1.address===this.limitToken2.address&&this.$toast({position:"top",message:this.$t("twoIdenticalTokens")}))},minusLimitPrice:function(){this.limitPrice&&new Oi.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Oi.a(this.limitPrice).times(.99).toFixed()),this.watchLimitPrice())},addLimitPrice:function(){this.limitPrice&&new Oi.a(this.limitPrice).gt("0")&&(this.limitPrice=this.$f.formatNumber(new Oi.a(this.limitPrice).times(1.01).toFixed()),this.watchLimitPrice())},quoteLimitTokenPrice:function(){var e=this,t=this.limitToken1.chain,i=this.limitToken1.address+"-"+t,n=this.limitToken2.address+"-"+t;return Object(Ht["M"])([i,n]).then(function(){var t=Object(Je["a"])(regeneratorRuntime.mark((function t(i){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.limitToken1.price=(null===i||void 0===i||null===(n=i[0])||void 0===n?void 0:n.current_price_usd)||0,e.limitToken2.price=(null===i||void 0===i||null===(o=i[1])||void 0===o?void 0:o.current_price_usd)||0,t.abrupt("return",[e.limitToken1.price,e.limitToken2.price]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getLeftHeight:function(){var e=this;this.$nextTick((function(){var t=Object(Ni["o"])(e.$refs.swapLeft),i=t.height;e.height=i}))},handleWalletAddress:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet?window.ethereum?(this.$store.state.importAddressVisible=!1,this.$store.commit("changeConnectVisible",!0)):this.$toast({message:this.$t("browserWalletNotDetected"),position:"top"}):e&&this.$store.commit("changeDisconnectVisible",!0)},handleTaxSlippage:function(){if(1===this.activeTab){var e,t;if(Number(this.autoSlippageValue)>Number(null===(e=this.baseTokenExtra)||void 0===e?void 0:e.sell_tax)+1)return;var i=Math.max(Math.min(Number(null===(t=this.baseTokenExtra)||void 0===t?void 0:t.sell_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(i.toFixed(2)))}else{var n,o;if(Number(this.autoSlippageValue)>Number(null===(n=this.baseTokenExtra)||void 0===n?void 0:n.buy_tax)+1)return;var a=Math.max(Math.min(Number(null===(o=this.baseTokenExtra)||void 0===o?void 0:o.buy_tax)+1,49.99),.5);this.autoSlippageValue=String(Number(a.toFixed(2)))}},onSubmit:function(){try{var e,t,i,n;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChain())return;var o=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});2===this.selected&&(this.isApprove?this.getSwapTx():this.approve())}catch(a){console.log(a)}},getSwapTokenList:function(){var e,t,i,n,o=this,a=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"bsc";Object(Ht["I"])(a).then((function(e){if(o.tokens=(null===e||void 0===e?void 0:e.map((function(e){return Object(Ye["a"])(Object(Ye["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||[],(!o.token2.address||o.token1.address===o.token2.address)&&o.tokens.length>0){var t=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));t=t<0?0:t;var i,n=o.tokens[t];if(o.token1.address===n.address)n=0===t&&null!==(i=o.tokens[1])&&void 0!==i?i:o.tokens[0];o.token2=Object(Ye["a"])({},n)}if((!o.limitToken2.address||o.limitToken1.address===o.limitToken2.address)&&o.tokens.length>0){var a=o.tokens.findIndex((function(e){return/USDT/.test(e.symbol)}));a=a<0?0:a;var s,l=o.tokens[a];if(o.limitToken1.address===l.address)l=0===a&&null!==(s=o.tokens[1])&&void 0!==s?s:o.tokens[0];o.limitToken2=Object(Ye["a"])({},l)}o.getTokenDetails()}))},getUserTokenList:function(){var e,t,i,n,o=this,a=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"bsc";Object(Ht["Q"])(a).then((function(e){var t,i,n;o.userBalanceTokens=null===(t=(null===e||void 0===e||null===(i=e.map((function(e){return Object(Ye["a"])(Object(Ye["a"])({},e),{},{id:e.token+"-"+e.chain,address:e.token})})))||void 0===i||null===(n=i.filter)||void 0===n?void 0:n.call(i,(function(e){return(e.risk_score||0)<60&&(e.risk_level||0)>=0&&"blacklist"!==e.flag&&""!==e.symbol&&"lp"!==e.flag})))||[])||void 0===t?void 0:t.filter((function(e){return!!Number(e.value)})),o.userBalanceTokens.length>0&&"tron"!==a&&"brc20"!==a&&/^0x[0-9a-zA-Z]{40}$/.test(o.$store.state.currentAccount)&&Object(Ht["k"])(o.userBalanceTokens.map((function(e){return e.token||""})),a).then((function(e){var t,i,n;o.userBalanceTokens=null===(t=o.userBalanceTokens)||void 0===t||null===(i=t.map)||void 0===i||null===(n=i.call(t,(function(t,i){return Object(Ye["a"])(Object(Ye["a"])({},t),{},{value:Ot["utils"].formatUnits(e[i],t.decimals||0)})})))||void 0===n?void 0:n.filter((function(e){return!!Number(e.value)}))}))}))},getTokenDetails:function(){var e=this;Promise.all([this.getToken2Info(),this.getToken1Info()]).then((function(){0===e.activeTab?e.allowance=e.token2.allowance||"0":e.allowance=e.token1.allowance||"0"}))},getToken2Info:function(){var e,t,i=this;return Object(Ht["J"])(null===(e=this.token2)||void 0===e?void 0:e.address,null===(t=this.token2)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Je["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.token2=Object(Ye["a"])(Object(Ye["a"])({},i.token2),t),sessionStorage.swap_token2=JSON.stringify(i.token2),i.limitToken2=Object(Ye["a"])(Object(Ye["a"])({},i.limitToken2),t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getToken1Info:function(){var e,t,i=this;return Object(Ht["J"])(null===(e=this.token1)||void 0===e?void 0:e.address,null===(t=this.token1)||void 0===t?void 0:t.chain,this.$f.getSwapContract(this.$store.getters.netId)).then(function(){var e=Object(Je["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.token1=Object(Ye["a"])(Object(Ye["a"])({},i.token1),t),sessionStorage.swap_token1=JSON.stringify(i.token1),i.limitToken1=Object(Ye["a"])(Object(Ye["a"])({},i.limitToken1),t),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getBaseToken:function(){var e,t,i,n=this,o=(null===(e=this.$route.params)||void 0===e?void 0:e.id)||"",a=null===(t=o.split("-"))||void 0===t?void 0:t[0],s=null===(i=o.split("-"))||void 0===i?void 0:i[1];if(this.token1.address&&(a=this.token1.address),this.token1.chain&&(s=this.token1.chain),a&&s){var l,r,c=a+"-"+s,u=null===(l=this.$store.state)||void 0===l||null===(r=l.chainConfig)||void 0===r?void 0:r[s],d=null===u||void 0===u?void 0:u.wmainWrapper,m=null===u||void 0===u?void 0:u.mainName;a===qt["k"]&&s&&d&&(c=d+"-"+s);var h=Object(Ht["D"])(c).then(function(){var e=Object(Je["a"])(regeneratorRuntime.mark((function e(t){var i,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.baseToken=Object(Ye["a"])(Object(Ye["a"])({},t),a===qt["k"]?{token:Object(Ye["a"])(Object(Ye["a"])({},t.token),{},{token:a,symbol:m,logoURI:n.$f.formatIcon(c)})}:{}),o=null===t||void 0===t||null===(i=t.pairs)||void 0===i?void 0:i[0],s=null===o||void 0===o?void 0:o.pair,l=null===o||void 0===o?void 0:o.chain,s&&n.getKlineHistory(s+"-"+l),n.token1=Object(Ye["a"])(Object(Ye["a"])({},n.token1),{},{address:n.baseToken.token.token},n.baseToken.token),sessionStorage.swap_token1=JSON.stringify(n.token1),n.limitToken1=Object(Ye["a"])(Object(Ye["a"])({},n.limitToken1),{},{address:n.baseToken.token.token},n.baseToken.token),n.getLeftHeight(),n.limitPrice=n.baseToken.token.current_price_usd?n.$f.formatNumber(n.baseToken.token.current_price_usd):"",n.triggerPrice=n.baseToken.token.current_price_usd?n.$f.formatNumber(n.baseToken.token.current_price_usd):"",e.abrupt("return",t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(Ht["K"])(o).then(function(){var e=Object(Je["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.baseTokenExtra=Object(Ye["a"])(Object(Ye["a"])({},t),{},{buy_tax:Number(Number(t.buy_tax).toFixed(2)),sell_tax:Number(Number(t.sell_tax).toFixed(2))}),n.handleTaxSlippage(),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.all([h,p]).finally((function(){n.$store.dispatch("initWs",c)}));var b=["0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-eth","0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2-eth","0xdac17f958d2ee523a2206206994597c13d831ec7-eth","0x4fabb145d64652a948d72533023f6e7a623c7c53-eth","0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48-eth"];a===qt["k"]||b.includes(o)?(this.hasMEVBot=!1,this.isHotToken=!1):Object(Ht["z"])(o).then((function(e){n.hasMEVBot=(null===e||void 0===e?void 0:e.has_MEVBot)||!1,n.isHotToken=(null===e||void 0===e?void 0:e.is_hot_token)||!1})).catch((function(e){n.hasMEVBot=!1,n.isHotToken=!1}))}},getSelectedRouter:function(e){this.dialogListRouterVisible=!1,this.selectedRouterIndex=e,this.selectedRouter()},getQuoteInfo:function(){var e,t,i,n,o=this,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("Swap"===this.$route.name&&this.supportChain())if(Number(this.fromAmount)||Number(this.toAmount))if(this.token1.address!==this.token2.address){xi&&(clearTimeout(xi),xi=null);var s=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";xi=setTimeout((function(){o.dealGetQuoteInfo(a,s)}),500)}else this.$toast({position:"top",message:this.$t("twoIdenticalTokens")});else this.quoteLoading=!1},dealGetQuoteInfo:function(e,t){var i=this;if((this.fromAmount||this.toAmount)&&this.fromToken.address&&this.toToken.address){var n,o=this.fromToken.decimals,a=this.toToken.decimals;this.quoteLoading=!0;var s={from_token:this.fromToken.address,to_token:this.toToken.address,amountIn:e?Ot["utils"].parseUnits(new Oi.a(this.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o,"})?")))[0],o).toString():0,amountOut:e?0:Ot["utils"].parseUnits(new Oi.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString()},l=null===(n=this.baseToken)||void 0===n?void 0:n.pairs,r="";if("core"===t&&(null===l||void 0===l?void 0:l.length)>0){var c;console.log("pairs",l);var u=(null===l||void 0===l||null===(c=l.find)||void 0===c?void 0:c.call(l,(function(e){var t=[e.token0_address,e.token1_address];return t.includes(s.token0_address)||t.includes(s.token1_address)})))||(null===l||void 0===l?void 0:l[0]),d=null===u||void 0===u?void 0:u.amm,m={shadowswap:"0x191e94fa59739e188dce837f7f6978d84727ad01"};r=(null===m||void 0===m?void 0:m[d])||"0x40375c92d9faf44d2f9db9bd9ba41a3317a2404f",console.log("wrapper",r)}Object(Ht["T"])(s,r,t).then((function(e){i.swapPathList=e,i.selectedRouter(e),i.getSwapGas()})).catch((function(t){i.$f.handleError(t),e?i.toAmount="":i.fromAmount="",i.$nextTick((function(){setTimeout((function(){i.quoteLoading=!1,i.countDownFinishReset()}),800)}))}))}},selectedRouter:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.swapPathList,i=t[this.selectedRouterIndex],n=t[this.selectedRouterIndex].routerPath,o=this.isAmount,a=this.fromToken.decimals,s=this.toToken.decimals,l=!1;if(o){var r,c=Ot["utils"].parseUnits(new Oi.a(this.fromAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(a,"})?")))[0],a).toString(),u=(null===(r=n[0])||void 0===r?void 0:r.amount)||0;l=c===u}else{var d,m=Ot["utils"].parseUnits(new Oi.a(this.toAmount||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(s,"})?")))[0],s).toString(),h=(null===(d=n[n.length-1])||void 0===d?void 0:d.amount)||0;l=m===h}if(l){if(1===i.from_cannot_sell_all){var p,b=new Oi.a(Ot["utils"].parseUnits(String(this.fromToken.balance),null===(p=this.fromToken)||void 0===p?void 0:p.decimals).toString()),v=new Oi.a(null===i||void 0===i?void 0:i.routerPath[0].amount);this.isCannotSellAll=b.gt(0)&&v.div(b).gt(.99999)}else this.isCannotSellAll=!1;this.isTax=i.totalTax>0||i.total_sell_tax>0||i.total_buy_tax>0;var f=this.getPriceImpact(i);if(this.isTax||f.gt(.5)){this.isTaxHigh=i.total_sell_tax+i.total_buy_tax+1>49.99;var g=i.totalTax||i.total_sell_tax+i.total_buy_tax,k=Number(f);if(this.autoSlippage){var O=g+k+(g>5||k>5?2.5:2);console.log("swapPathList",t),O=Math.max(Math.min(O,49.99),.5),this.autoSlippageValue=String(Number(O.toFixed(2)))}}else this.isTaxHigh=!1,"auto"===this.customSlippage&&(this.autoSlippageValue=Ii);if((i.weight>5e4||i.totalTax>0||i.total_sell_tax>0||i.total_buy_tax>0)&&!this.hasMEVBot?this.autoSwapMode="fast":0===this.activeTab?this.autoSwapMode="protect":this.autoSwapMode="private",console.log("autoSwapMode",this.autoSwapMode),this.swapQuoteInfo=i,this.swapRouterPath=n.map((function(e,t){var n,o;return{symbol:e.symbol,nextAmm:(null===i||void 0===i||null===(n=i.pair_path)||void 0===n||null===(o=n[t])||void 0===o?void 0:o.amm)||""}})),this.listRouter=t.map((function(t){var i=0,n=0;if(o){var a,s=t.routerPath[t.routerPath.length-1];i=Ot["utils"].formatUnits(s.amount||"0",(null===s||void 0===s?void 0:s.decimals)||(null===(a=e.toToken)||void 0===a?void 0:a.decimals))}else{var l=t.routerPath[0];n=Ot["utils"].formatUnits(l.amount||"0",(null===l||void 0===l?void 0:l.decimals)||e.fromToken.decimals)}var r=t.routerPath.map((function(e,i){var n,o;return{symbol:e.symbol,nextAmm:(null===t||void 0===t||null===(n=t.pair_path)||void 0===n||null===(o=n[i])||void 0===o?void 0:o.amm)||""}}));return{path:r,amount:o?i:n,priceImpact:t.priceImpact}})),o){var j,w=n[n.length-1];this.toAmount=Ot["utils"].formatUnits(w.amount||"0",(null===w||void 0===w?void 0:w.decimals)||(null===(j=this.toToken)||void 0===j?void 0:j.decimals))}else{var T,y=n[0];this.fromAmount=Ot["utils"].formatUnits(y.amount||"0",(null===y||void 0===y?void 0:y.decimals)||(null===(T=this.fromToken)||void 0===T?void 0:T.decimals))}var S=i.totalTax||i.total_sell_tax+i.total_buy_tax||0;this.baseTokenPrice=new Oi.a(this.toAmount).div(this.fromAmount).times(100-S).div(100).toFixed(),l&&this.$nextTick((function(){setTimeout((function(){e.quoteLoading=!1,e.countDownFinishReset()}),800)}))}},handleSelectToken2:function(e){sessionStorage.swap_token2=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=Ii,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getAllowance(),this.getToken2Info()},handleSelectToken1:function(e){sessionStorage.swap_token1=JSON.stringify(e),this.swapRouterPath=[],this.swapQuoteInfo.totalTax=0,this.swapQuoteInfo.total_sell_tax=0,this.swapQuoteInfo.total_buy_tax=0,this.autoSlippageValue=Ii,this.baseTokenPrice=0,this.selectedRouterIndex=0,this.fromAmount="",this.toAmount="",this.getToken1Info(),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}})},handleSelectLimitToken1:function(e){this.autoSlippageValue=Ii,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),1===this.activeTab&&this.getLimitAllowance(),sessionStorage.swap_token1=JSON.stringify(e),this.token1=Object(Ye["a"])({},e),this.$router.replace({name:"Swap",params:{id:((null===e||void 0===e?void 0:e.address)||(null===e||void 0===e?void 0:e.token))+"-"+e.chain,type:this.$route.params.type||""}}).catch((function(e){console.log("err",e)})),this.getToken1Info()},handleSelectLimitToken2:function(e){this.autoSlippageValue=Ii,this.limitAmount1="",this.limitAmount2="",this.$refs.percentStep1.handleClick(0),sessionStorage.swap_token2=JSON.stringify(e),this.token2=Object(Ye["a"])({},e),this.getToken2Info(),0===this.activeTab&&this.getLimitAllowance()},getAllowance:function(){var e=this;if(this.$store.getters.netId&&this.$store.getters.netId===this.fromToken.chain&&this.fromToken.address){var t=this.$f.getSwapContract(this.$store.getters.netId);this.loadingAllowance=!0,Object(Ht["d"])(this.fromToken.address,t).then((function(t){e.allowance=t.toString()})).finally((function(){e.loadingAllowance=!1}))}},approve:function(){var e=this;return Object(Je["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.loadingApprove=!0,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(Ht["g"])(e.fromToken.address).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingApprove=!1,e.$f.setSwapSendType("")}));case 3:case"end":return t.stop()}}),t)})))()},getSwapGas:function(){var e=this;_i&&(clearTimeout(_i),_i=null),_i=setTimeout((function(){var t,i;e.checkAmount()&&e.isApprove&&e.$store.state.currentAccount&&!e.loadingSwap&&(null===(t=e.swapQuoteInfo)||void 0===t||null===(i=t.routerPath)||void 0===i?void 0:i.length)>0&&(Object(Ht["Y"])(e.swapQuoteInfo,e.slippage).then(function(){var t=Object(Je["a"])(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.swapSubmitInfo=i,e.swapInfo=i.swapInfo,e.swapInfo.gasValue=i.gasValue,console.log("gasValue",i.gasValue),e.swapInfo.swapRouterPath=e.swapRouterPath;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.$f.handleError(t)})),e.getNativeTokenPrice(),e.getGasPrice())}),1e3)},getSwapTx:function(){var e,t,i=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_i&&(clearTimeout(_i),_i=null),this.checkAmount()?(null===(e=this.swapQuoteInfo)||void 0===e||null===(t=e.routerPath)||void 0===t?void 0:t.length)>0&&(this.loadingSwap=!0,Object(Ht["Y"])(this.swapQuoteInfo,this.slippage,this.activeTab).then(function(){var e=Object(Je["a"])(regeneratorRuntime.mark((function e(t){var o,a,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i.swapSubmitInfo=t,i.swapInfo=t.swapInfo,i.swapInfo.gasValue=t.gasValue,i.swapInfo.swapRouterPath=i.swapRouterPath,i.swapInfo.subTxs=t.subTxs,i.loadingSwap=!1,n&&(l=(null===(o=window)||void 0===o||null===(a=o._tw_)||void 0===a||null===(s=a.appGetFreePay)||void 0===s?void 0:s.call(a))||!1,l=l&&"false"!==l,l?i.submitSwap():i.dialogVisibleSwap=!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){i.loadingSwap=!1,i.$f.handleError(e)})),this.getNativeTokenPrice(),this.getGasPrice()):this.$dialog.alert({title:this.$t("tips"),message:this.checkAmountMessage(),confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})},submitSwap:function(){var e=arguments,t=this;return Object(Je["a"])(regeneratorRuntime.mark((function i(){var n,o,a,s,l,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:t.swapSubmitInfo,i.prev=1,t.loadingConfirmSwap=!0,t.loadingSwap=!0,console.log("swapSubmitInfo",n),i.next=7,n.swapCallStatic();case 7:o=i.sent,console.log("swapCallStaticResult",o.toString()),a=n.swapInfo,s=!(a.fromToken.isWrapper&&a.toToken.isETH||a.toToken.isWrapper&&a.fromToken.isETH),console.log("isSwap",s),l={from_address:a.fromToken.address,from_symbol:a.fromToken.symbol,from_amount:Number(Ot["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:a.toToken.address,to_symbol:a.toToken.symbol,to_amount:Number(Ot["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),chain:t.netId,transaction:"",wallet_address:t.$store.state.currentAccount},r={},"bsc"!==t.$store.getters.netId&&"eth"!==t.$store.getters.netId||(console.log("set swapMode",t.swapMode||"fast"),t.$f.setSwapSendType(t.swapMode||"fast")),n.swap().then((function(e){var i,o,c;console.warn("swap confirm time end",t.$f.formatDate(Date.now())),console.log("---confirm transaction---",e),t.swapInfo.transaction=e.hash,s&&(l.transaction=e.hash,r={time:parseInt(Date.now()/1e3),id:l.transaction,chain:t.netId,transaction:e.hash,from_address:l.from_address,from_price_eth:0,from_price_usd:"",from_symbol:a.fromToken.symbol,from_amount:Number(Ot["utils"].formatUnits(a.fromTokenAmount||0,a.fromToken.decimals)),to_address:l.to_address,to_price_eth:0,to_price_usd:"",to_symbol:a.toToken.symbol,to_amount:Number(Ot["utils"].formatUnits(a.toTokenAmount||0,a.toToken.decimals)),is_merged:0},t.initTxs.unshift(r)),t.loadingSwap=!1,t.loadingConfirmSwap=!1,t.fromAmount="",t.toAmount="",null===(i=t.$refs)||void 0===i||null===(o=i.percentStep)||void 0===o||null===(c=o.handleClick)||void 0===c||c.call(o,0),t.dialogVisibleSwap=!1;try{Object(Ht["f"])(n.subTxs)}catch(u){console.log(u)}return e.wait()})).then((function(e){return console.warn("swap transaction end",t.$f.formatDate(Date.now())),console.log("----transaction---",e),1===e.status?(t.$notify({type:"success",message:t.$t("tradeSuccess")}),t.getTokenDetails(),t.getUserTokenList(),t.getAllowance(),s&&(t.initTxs.forEach((function(t){t.transaction===e.transactionHash&&(t.is_merged=1,t.time=parseInt(Date.now()/1e3))})),t.getUserAllTxs(r)),t.getGasBalance()):(t.$notify({type:"danger",message:t.$t("tradeFail")}),s&&(t.initTxs=t.initTxs.filter((function(t){return t.transaction!==e.transactionHash})))),t.$f.setSwapSendType(""),e})).catch((function(e){t.$refs.countDown.reset(),t.loadingSwap=!1,t.loadingConfirmSwap=!1,s&&t.getUserAllTxs(),t.$f.handleError(e,"swap"),t.$f.setSwapSendType("")})),i.next=24;break;case 18:i.prev=18,i.t0=i["catch"](1),t.loadingSwap=!1,t.loadingConfirmSwap=!1,t.$f.handleError(i.t0,"swap"),t.$f.setSwapSendType("");case 24:case"end":return i.stop()}}),i,null,[[1,18]])})))()},checkAmount:function(){if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return!0;var e=this.fromToken.balance||0;return!(0===Number(e)||Number(e)<Number(this.fromAmount)||""===this.$store.state.wallet||"0"===String(this.fromAmount)||this.token1.address===this.token2.address)},checkAmountMessage:function(){var e=this.fromToken.balance||0;return this.$store.state.currentAccount?this.$store.state.currentAccount&&!window.ethereum?this.$t("observeAddressNotSwap"):0===Number(e)||Number(e)<Number(this.fromAmount)||!this.$store.state.currentAccount?this.$t("insufficientBalance"):"0"===String(this.fromAmount)?this.$t("AmountCannotBeZero"):void 0:this.$t("pConnectWallet")},getNativeTokenPrice:function(){var e,t,i,n,o,a,s,l,r=this;if(this.$store.getters.netId===(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])){var c=this.$store.getters.netId||(null===(o=this.$route.params)||void 0===o||null===(a=o.id)||void 0===a||null===(s=a.split)||void 0===s||null===(l=s.call(a,"-"))||void 0===l?void 0:l[1])||"";Object(Ht["E"])(c).then((function(e){var t;r.nativePrice=e;var i=(null===(t=r.gasSetting)||void 0===t?void 0:t[c])||{};r.gasSetting=Object(Ye["a"])(Object(Ye["a"])({},r.gasSetting),{},Object(We["a"])({},c,Object(Ye["a"])(Object(Ye["a"])({},i),{},{nativePrice:e}))),$i["a"].set("gasSetting",r.gasSetting)}))}},getKlineHistory:function(e){var t,i,n,o,a=this;Object(Ht["A"])(e,"1",(null===(t=this.$route.params)||void 0===t||null===(i=t.id)||void 0===i||null===(n=i.split)||void 0===n||null===(o=n.call(i,"-"))||void 0===o?void 0:o[1])||"").then((function(e){var t,i=(null===e||void 0===e||null===(t=e.slice)||void 0===t?void 0:t.call(e,-10))||[];a.dataX=i.map((function(e){return e.time})),a.dataY=i.map((function(e){return e.close}))}))},getUserAllTxs:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=this.$store.state.currentAccount;i&&(this.txsLoading=!0,Object(Ht["O"])().then((function(i){var n,o,a,s,l=Array.isArray(i)?i:[],r=t&&!(null!==l&&void 0!==l&&null!==(n=l.some)&&void 0!==n&&n.call(l,(function(e){return e.transaction===t.transaction})))&&Date.now()-1e3*t.time<6e5;r&&setTimeout((function(){e.getUserAllTxs(t)}),1e4),l.length>0&&(e.initTxs=(null===l||void 0===l?void 0:l.map((function(e){return e.id?Object(Ye["a"])({},e):Object(Ye["a"])(Object(Ye["a"])({},e),{},{id:e.transaction})})))||[]),!r||null!==(o=(a=e.initTxs).some)&&void 0!==o&&o.call(a,(function(e){return e.transaction===t.transaction}))||e.initTxs.unshift(t);var c=[],u={};null===l||void 0===l||null===(s=l.forEach)||void 0===s||s.call(l,(function(e){u[e.from_address]||(c.push({address:e.from_address,symbol:e.from_symbol,chain:e.chain}),u[e.from_address]=!0),u[e.to_address]||(c.push({address:e.to_address,symbol:e.to_symbol,chain:e.chain}),u[e.to_address]=!0)})),e.txsTokens=c,sessionStorage.txsTokens=JSON.stringify(c||[])})).finally((function(){e.txsLoading=!1})))},alertTips:function(e,t){this.$dialog.alert({title:e,message:t,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"}).then((function(){}))},alertSupportChainTips:function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?this.$dialog.confirm({title:"",message:e,confirmButtonText:null!==(t=window)&&void 0!==t&&null!==(i=t._tw_)&&void 0!==i&&i.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,i,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(i=window)||void 0===i||null===(n=i._tw_)||void 0===n||n.appSwitchChain())})):this.$dialog.alert({title:"",message:e,confirmButtonText:this.$t("getIt"),confirmButtonColor:"#558BED"})},supportChain:function(){if("Swap"===this.$route.name){var e,t,i,n,o,a,s,l,r,c,u,d,m,h,p,b=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"",v=Object.keys(qt["t"]),f=this.$store.state.chainConfig||$i["a"].get("chainConfig"),g=null===v||void 0===v||null===(o=v.map)||void 0===o||null===(a=o.call(v,(function(e){return f[e].name})))||void 0===a||null===(s=a.join)||void 0===s?void 0:s.call(a,", "),k=null===f||void 0===f||null===(l=f[b])||void 0===l?void 0:l.name;if(!this.$store.getters.netId&&this.$store.state.chainId)return this.alertSupportChainTips(this.$t("notYetSupportedChainTips",{chains:g}),!0),!1;if(null!==(r=this.$store.state.currentAccount)&&void 0!==r&&null!==(c=r.startsWith)&&void 0!==c&&c.call(r,"T"))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:"TRON",chains:g})),!1;if(b&&(null===v||void 0===v||null===(u=v.includes)||void 0===u||!u.call(v,b)))return this.alertSupportChainTips(this.$t("notYetSupportedChainTips1",{chain:k,chains:g}),!0),!1;if((null===(d=this.$route.params)||void 0===d||null===(m=d.id)||void 0===m||null===(h=m.split)||void 0===h||null===(p=h.call(m,"-"))||void 0===p?void 0:p[1])!==this.$store.getters.netId&&this.$store.getters.netId)return this.alertSupportChainTips(this.$t("chainNotSame"),!0),!1}return!0},getGasPrice:function(){var e,t,i,n,o=this,a=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";Object(Ht["w"])(a).then((function(e){var t,i,n=e.toString();"bsc"===a&&null!==e&&void 0!==e&&null!==(t=e.lt)&&void 0!==t&&t.call(e,"3000000000")&&(n="3000000000"),o.gasPrice=n;var s=(null===(i=o.gasSetting)||void 0===i?void 0:i[a])||{};o.gasSetting=Object(Ye["a"])(Object(Ye["a"])({},o.gasSetting),{},Object(We["a"])({},a,Object(Ye["a"])(Object(Ye["a"])({},s),{},{gasPrice:n}))),$i["a"].set("gasSetting",o.gasSetting)})).catch((function(e){console.log(e),o.gasPrice="0","bsc"===a&&(o.gasPrice="3000000000")}))},getPriceImpact:function(e){if(!Number(this.fromAmount)&&!Number(this.toAmount))return new Oi.a(0);var t=e.routerPath,i=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[0]:null,n=(null===t||void 0===t?void 0:t.length)>0?null===t||void 0===t?void 0:t[t.length-1]:null;if(i&&n){var o=e.from_price,a=e.to_price,s=Ot["utils"].formatUnits(i.amount,i.decimals),l=Ot["utils"].formatUnits(n.amount,n.decimals);return new Oi.a(s).times(o).div(new Oi.a(l).times(a)).minus(1).abs().times(100)}return new Oi.a(0)},goAudit:function(){this.$f.openBrowser("https://beosin.com/audits/SwapFinder_202209021725.pdf")},onCountDownFinish:function(){2===this.selected&&this.token1.address!==this.token2.address&&(this.loadingConfirmSwap||this.loadingApprove||"hidden"===document.visibilityState?this.$refs.countDown.reset():this.isAmount?this.watchFromAmount():this.watchToAmount())},countDownFinishReset:function(){this.$refs.countDown.reset(),this.dialogVisibleSwap&&this.isApprove&&!this.loadingConfirmSwap&&this.getSwapTx(!1)},appSwitchChain:function(e){var t,i,n,o;null!==(t=window)&&void 0!==t&&null!==(i=t._tw_)&&void 0!==i&&i.appSwitchChain&&(null===(n=window)||void 0===n||null===(o=n._tw_)||void 0===o||o.appSwitchChain(),e.stopPropagation())},formatPriceImpactColor:function(e){return e>40?"#F81111":e>10?"#F7933F":e>5?"#f8be46":""},goLiquidity:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.openLp){var i,n,o,a,s,l,r=this.$store.state.chainConfig||$i["a"].get("chainConfig"),c=this.$store.getters.netId||(null===(i=this.$route.params)||void 0===i||null===(n=i.id)||void 0===n||null===(o=n.split)||void 0===o||null===(a=o.call(n,"-"))||void 0===a?void 0:a[1])||"",u=null===r||void 0===r?void 0:r[c],d=null===u||void 0===u?void 0:u.wmainWrapper,m=null===(s=r[c])||void 0===s?void 0:s.swaps,h=null===(l=this.baseToken)||void 0===l?void 0:l.pairs,p=h.find((function(e){return m.some((function(t){return t.name===e.amm&&t.router_address}))}));if(p){var b,v,f=p.token0_address===d?qt["k"]:p.token0_address,g=p.token1_address===d?qt["k"]:p.token1_address,k=p.amm;null===(b=window)||void 0===b||null===(v=b._tw_)||void 0===v||v.openLp(f,g,k)}else{var O,j,w,T,y=this.tokenInfo.address||(null===(O=this.baseToken)||void 0===O||null===(j=O.token)||void 0===j?void 0:j.token)||"";y=y===d?qt["k"]:y,null===(w=window)||void 0===w||null===(T=w._tw_)||void 0===T||T.openLp(y,"","")}}},checkLimitAmount:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1;if(e.address===qt["k"]&&3===this.selected)return!1;var t=e.balance||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return!(0===Number(t)||Number(t)<Number(i)||""===this.$store.state.wallet||"0"===String(i)||this.limitToken1.address===this.limitToken2.address)},checkLimitAmountMessage:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1;if(e.address===qt["k"]&&3===this.selected)return this.$t("noSNativeToken");var t=e.balance||0,i=0===this.activeTab?this.limitAmount2:this.limitAmount1;return this.$store.state.currentAccount?this.$store.state.currentAccount&&!window.ethereum?this.$t("observeAddressNotSwap"):Number(0===t||Number(t)<Number(i)||""===this.$store.state.wallet)?this.$t("insufficientBalance"):"0"===String(i)?this.$t("AmountCannotBeZero"):"":this.$t("pConnectWallet")},getLimitAllowance:function(){var e=this,t=0===this.activeTab?this.limitToken2:this.limitToken1;if(this.$store.getters.netId&&this.$store.getters.netId===t.chain&&t.address){var i=t.chain||this.$store.getters.netId||"bsc",n=qt["q"][i];this.loadingLimitAllowance=!0,Object(Ht["d"])(t.address,n).then((function(t){e.limitAllowance=t.toString(),console.log("limitAllowance",e.limitAllowance)})).finally((function(){e.loadingLimitAllowance=!1}))}},getLimitOrder:function(){var e=this;if(this.$store.getters.netId){var t=this.limitToken1.chain||this.$store.getters.netId||"bsc";this.loadingGetLimitOrder=!0,Object(Ht["B"])({chain:t}).then((function(t){e.limitOrders=t})).finally((function(){setTimeout((function(){e.loadingGetLimitOrder=!1}),800)}))}},refreshLimit:function(e){this.getLimitOrder(),e.from_token===qt["k"]&&(e.from_token===this.limitToken1.address?this.getToken1Info():e.from_token===this.limitToken2.address&&this.getToken2Info())},approveLimit:function(){var e=this;return Object(Je["a"])(regeneratorRuntime.mark((function t(){var i,n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.supportChainLimit()){t.next=2;break}return t.abrupt("return");case 2:e.loadingLimitApprove=!0,i=e.limitToken1.chain||e.$store.getters.netId||"bsc",n=qt["q"][i],o=0===e.activeTab?e.limitToken2:e.limitToken1,"bsc"!==e.$store.getters.netId&&"eth"!==e.$store.getters.netId||e.$f.setSwapSendType("fast"),Object(Ht["g"])(o.address,n).then((function(e){return e.wait()})).then((function(t){console.log(t),e.getLimitAllowance(),e.getGasBalance()})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingLimitApprove=!1,e.$f.setSwapSendType("")}));case 8:case"end":return t.stop()}}),t)})))()},supportChainLimit:function(){if("Swap"===this.$route.name){var e,t,i,n,o,a,s,l,r,c,u,d,m,h=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"",p=Object.keys(qt["q"]),b=this.$store.state.chainConfig||$i["a"].get("chainConfig"),v=p.map((function(e){return b[e].name})).join(", ");if(null!==(o=this.$store.state.currentAccount)&&void 0!==o&&null!==(a=o.startsWith)&&void 0!==a&&a.call(o,"T")||h&&(null===p||void 0===p||null===(s=p.includes)||void 0===s||!s.call(p,h))){this.$t("notYetSupportedChainNoGasTips",{chains:v});return this.$toast({message:this.$t("notYetSupportedChainLimitTips",{chains:v}),position:"top"}),!1}if((null===(l=this.$route.params)||void 0===l||null===(r=l.id)||void 0===r||null===(c=r.split)||void 0===c||null===(u=c.call(r,"-"))||void 0===u?void 0:u[1])!==this.$store.getters.netId&&this.$store.getters.netId)return this.$dialog.confirm({title:"",message:this.$t("chainNotSame"),confirmButtonText:null!==(d=window)&&void 0!==d&&null!==(m=d._tw_)&&void 0!==m&&m.appSwitchChain?this.$t("switchChain"):this.$t("getIt"),confirmButtonColor:"#558BED",cancelButtonText:this.$t("cancel")}).then((function(){var e,t,i,n;null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appSwitchChain&&(null===(i=window)||void 0===i||null===(n=i._tw_)||void 0===n||n.appSwitchChain())})),!1}return!0},onLimitSubmit:function(){try{var e,t,i,n;if(""===this.$store.state.wallet||"importAddress"===this.$store.state.wallet)return void this.handleWalletAddress();if(!this.supportChainLimit())return;var o=this.$store.getters.netId||(null===(e=this.$route.params)||void 0===e||null===(t=e.id)||void 0===t||null===(i=t.split)||void 0===i||null===(n=i.call(t,"-"))||void 0===n?void 0:n[1])||"";if(o!==this.netId)return void this.$toast({message:this.$t("plsSwitchChain",{chain:o}),position:"top"});0!==this.selected&&1!==this.selected&&3!==this.selected||(this.isLimitApprove||3===this.selected?this.openConfirmLimit():this.approveLimit())}catch(a){console.log(a)}},openConfirmLimit:function(){var e=0===this.activeTab?this.limitToken2:this.limitToken1,t=0===this.activeTab?this.limitToken1:this.limitToken2,i=0===this.activeTab?this.limitAmount2:this.limitAmount1,n=0===this.activeTab?this.limitAmount1:this.limitAmount2,o=0===this.activeTab?this.limitToken1.decimals:this.limitToken2.decimals,a=new Oi.a(this.limitSlippage||0);3===this.selected&&(a=new Oi.a(this.noGasSlippage||0)),a=new Oi.a(1).minus(a.div(100));var s=new Oi.a(qt["r"][e.chain||this.$store.getters.netId]||0).times(5);s=s.gte(3)?s.gte(50)?new Oi.a(50):s:new Oi.a(3);var l=new Oi.a(i).times(e.price).gte(s.times(.999));if(!l){var r=this.$t("minimumTransactionAmount",{n:s.toFixed()});return 3===this.selected&&(r=this.$t("minimumTransactionNoGasAmount",{n:s.toFixed()})),void this.$dialog.alert({title:this.$t("tips"),message:r,confirmButtonText:this.$t("okay"),confirmButtonColor:"#558BED"})}this.limitInfo={orderType:3===this.selected?2:this.selected,fromToken:e,toToken:t,fromAmount:i,toAmount:n,targetToken:this.limitToken1.address,targetTokenInfo:this.limitToken1,targetLimitPrice:this.limitPrice,triggerPrice:this.triggerPrice,activeTab:this.activeTab,minReturn:new Oi.a(n||0).times(a).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o,"})?")))[0],slippage:3===this.selected?this.noGasSlippage:this.limitSlippage},console.log("limitInfo",this.limitInfo),this.dialogVisibleLimit=!0},submitLimitOrder:function(){var e=this;if(this.supportChainLimit()){var t=new Oi.a(this.limitSlippage||0);3===this.selected&&(t=new Oi.a(this.noGasSlippage||0)),t=new Oi.a(1).minus(t.div(100));var i=this.$store.state.currentAccount;console.log("maker",i);var n=0===this.activeTab?this.limitToken2:this.limitToken1,o=0===this.activeTab?this.limitToken1:this.limitToken2,a=0===this.activeTab?this.limitAmount2:this.limitAmount1,s=0===this.activeTab?this.limitAmount1:this.limitAmount2,l=n.address,r=Ot["utils"].parseUnits(new Oi.a(a||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(n.decimals,"})?")))[0],n.decimals).toString(),c=o.address,u=Ot["utils"].parseUnits(new Oi.a(s||0).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0],o.decimals).toString(),d=Ot["utils"].parseUnits(new Oi.a(s||0).times(t).toFixed().match(new RegExp("[0-9]*(\\.[0-9]{0,".concat(o.decimals,"})?")))[0],o.decimals).toString(),m=this.limitToken1.address,h=this.limitPrice;this.loadingConfirmLimit=!0;var p=3===this.selected?2:this.selected,b=this.triggerPrice,v=this.baseToken.token.current_price_usd?this.$f.formatNumber(this.baseToken.token.current_price_usd):"";if(3===this.selected){var f={chain:this.$store.getters.netId,from_token:l,from_amount:r,to_token:c,to_amount:u,maker:i,to_min_amount:d,target_token:m,target_limit_price:"0",trigger_price:"0",current_price:"0",order_type:2,open_time:0};Object(Ht["e"])(f).then((function(t){console.log("appExchangeNoGas result",t),t?setTimeout((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1,e.$toast.success(e.$t("transactionsSubmitted")),e.limitAmount1="",e.limitAmount2="",e.getNoGasList(!0)}),1e3):(e.loadingConfirmLimit=!1,e.$toast({message:e.$t("fail"),type:"fail"}))})).catch((function(t){console.log(t),e.loadingConfirmLimit=!1,e.$f.handleError(t)}))}else Object(Ht["X"])(i,l,r,c,d,u,m,h,p,b,v).then((function(t){console.log(t),e.$notify({type:"success",message:e.$t("submitOrdersSuccess")}),e.getLimitOrder(),e.limitAmount1="",e.limitAmount2="",e.getGasBalance(),l===qt["k"]&&(l===e.limitToken1.address?e.getToken1Info():l===e.limitToken2.address&&e.getToken2Info())})).catch((function(t){e.$f.handleError(t)})).finally((function(){e.loadingConfirmLimit=!1,e.dialogVisibleLimit=!1}))}},getAvgPrice:function(){if(!this.fromAmount||!this.toAmount)return"--";var e=this.fromAmount,t=this.toAmount;if(this.isTax){var i,n,o,a,s=(null===(i=this.swapQuoteInfo)||void 0===i?void 0:i.totalTax)||((null===(n=this.swapQuoteInfo)||void 0===n?void 0:n.total_sell_tax)||0)+((null===(o=this.swapQuoteInfo)||void 0===o?void 0:o.total_buy_tax)||0);s=Math.min(49,s),null!==(a=this.swapQuoteInfo)&&void 0!==a&&a.isAmountOut?e=new Oi.a(e).times(100+s).div(100):t=new Oi.a(t).times(100-s).div(100)}var l=this.swapQuoteInfo.from_price,r=this.swapQuoteInfo.to_price;return l&&r?0===this.activeTab?this.$f.formatNumber2(e/t/(r/l)*r):1===this.activeTab?this.$f.formatNumber2(t/e/(l/r)*l):void 0:"--"},onSubmitSlippage:function(e){this.slippageInfo=e,this.autoSlippage!==e.autoSlippage&&e.autoSlippage?(this.slippage=Ii,localStorage.slippage=JSON.stringify(e.slippage),this.onCountDownFinish()):(this.slippage=e.slippage,localStorage.slippage=JSON.stringify(e.slippage)),this.autoSlippage=e.autoSlippage,localStorage.autoSlippage=JSON.stringify(e.autoSlippage)},onSubmitLimitSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.limitSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},onSubmitNoGasSlippage:function(e){console.log("slippageInfo",e),null!==e&&void 0!==e&&e.slippage&&(localStorage.noGasSlippage=(null===e||void 0===e?void 0:e.slippage)||"5")},minusTriggerPrice:function(){this.triggerPrice&&new Oi.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Oi.a(this.triggerPrice).times(.99).toFixed()))},addTriggerPrice:function(){this.limitPrice&&new Oi.a(this.triggerPrice).gt("0")&&(this.triggerPrice=this.$f.formatNumber(new Oi.a(this.triggerPrice).times(1.01).toFixed()))},getNoGasList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={account:this.$store.state.currentAccount,chain:this.$store.getters.netId};if(null!==i&&void 0!==i&&i.account&&null!==i&&void 0!==i&&i.chain){var n={maker:null===i||void 0===i?void 0:i.account,chain:null===i||void 0===i?void 0:i.chain};this.loadingGetNoGasList=!0,this.isHasUnTx=!0,Object(Ht["F"])(n).then((function(i){var n,o;e.noGasTxList=i||[],e.isHasUnTx=null===(n=e.noGasTxList)||void 0===n||null===(o=n.some)||void 0===o?void 0:o.call(n,(function(e){return 0===e.status||-1===e.status})),!e.isHasUnTx&&t&&(e.getUserTokenList(),e.getGasBalance(),e.getTokenDetails())})).finally((function(){setTimeout((function(){e.loadingGetNoGasList=!1}),800),Vi&&(clearTimeout(Vi),Vi=null),Vi=setTimeout((function(){var i,n;null!==(i=e.noGasTxList)&&void 0!==i&&null!==(n=i.some)&&void 0!==n&&n.call(i,(function(e){return 0===e.status||-1===e.status}))&&e.getNoGasList(t)}),1e4)}))}},getGasBalance:function(){var e=this;Object(Ht["v"])().then((function(t){e.gasBalance=t,e.hasNoGas()}))},hasNoGas:function(){var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e._tw_)&&void 0!==t&&t.appExchangeNoGas){var i,n,o=new Oi.a(this.gasBalance||0),a=0===this.activeTab?this.token2:this.token1,s=a.chain||this.$store.getters.netId,l=new Oi.a(qt["j"][s]||.001).div(2),r=o.lt(l)&&(null===(i=window)||void 0===i||null===(n=i._tw_)||void 0===n?void 0:n.appExchangeNoGas)&&"eth"!==s;return r&&2===this.selected?(this.selected=3,this.$dialog.alert({title:this.$t("tips"),message:this.$t("freeGasTips"),confirmButtonText:this.$t("confirm"),confirmButtonColor:"#3F80F7"})):r||3!==this.selected||(this.selected=2),void(this.isNoGas=r)}3===this.selected&&(this.selected=2),this.isNoGas=!1},updateGasPrice:function(e){this.gasSetting=e}}};i("5fe4");const Di=St()(Pi,[["render",qe],["__scopeId","data-v-616ea84b"]]);t["default"]=Di},"580e":function(e,t,i){},"5fe4":function(e,t,i){"use strict";i("b95a")},"7bce":function(e,t,i){"use strict";i("c539")},"959c":function(e,t,i){"use strict";i("580e")},b95a:function(e,t,i){},c2b9:function(e,t,i){},c539:function(e,t,i){},eb18:function(e,t,i){"use strict";i("c2b9")}}]);